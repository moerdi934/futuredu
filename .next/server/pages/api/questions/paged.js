"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/questions/paged";
exports.ids = ["pages/api/questions/paged"];
exports.modules = {

/***/ "(api-node)/./controllers/questions.controller.ts":
/*!*********************************************!*\
  !*** ./controllers/questions.controller.ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appendExamId: () => (/* binding */ appendExamId),\n/* harmony export */   createBulkQuestions: () => (/* binding */ createBulkQuestions),\n/* harmony export */   createPassage: () => (/* binding */ createPassage),\n/* harmony export */   createQuestion: () => (/* binding */ createQuestion),\n/* harmony export */   deleteQuestion: () => (/* binding */ deleteQuestion),\n/* harmony export */   getAllQuestions: () => (/* binding */ getAllQuestions),\n/* harmony export */   getDiagnosticQuestionsByExamString: () => (/* binding */ getDiagnosticQuestionsByExamString),\n/* harmony export */   getPagedQuestions: () => (/* binding */ getPagedQuestions),\n/* harmony export */   getPassageById: () => (/* binding */ getPassageById),\n/* harmony export */   getQuestionById: () => (/* binding */ getQuestionById),\n/* harmony export */   getQuestionByUId: () => (/* binding */ getQuestionByUId),\n/* harmony export */   getQuestionsByExamId: () => (/* binding */ getQuestionsByExamId),\n/* harmony export */   getQuestionsByExamString: () => (/* binding */ getQuestionsByExamString),\n/* harmony export */   handleSingleQuestion: () => (/* binding */ handleSingleQuestion),\n/* harmony export */   searchPassages: () => (/* binding */ searchPassages),\n/* harmony export */   searchQuestions: () => (/* binding */ searchQuestions),\n/* harmony export */   updateBulkQuestions: () => (/* binding */ updateBulkQuestions),\n/* harmony export */   updatePassage: () => (/* binding */ updatePassage),\n/* harmony export */   updateQuestion: () => (/* binding */ updateQuestion),\n/* harmony export */   verifyCsv: () => (/* binding */ verifyCsv)\n/* harmony export */ });\n/* harmony import */ var _models_questions_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../models/questions.model */ \"(api-node)/./models/questions.model.ts\");\n/* harmony import */ var _models_examTypes_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/examTypes.model */ \"(api-node)/./models/examTypes.model.ts\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/db */ \"(api-node)/./lib/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_models_questions_model__WEBPACK_IMPORTED_MODULE_0__, _models_examTypes_model__WEBPACK_IMPORTED_MODULE_1__, _lib_db__WEBPACK_IMPORTED_MODULE_3__]);\n([_models_questions_model__WEBPACK_IMPORTED_MODULE_0__, _models_examTypes_model__WEBPACK_IMPORTED_MODULE_1__, _lib_db__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// controllers/questions.controller.ts\n\n\n\n\n// Mock queue implementation\nlet questionQueue = null;\n// Initialize queue\nconst initializeQueue = async ()=>{\n    if (!questionQueue) {\n        try {\n            const PQueue = (await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! p-queue */ \"p-queue\"))).default;\n            questionQueue = new PQueue({\n                concurrency: 1\n            });\n        } catch (error) {\n            console.error('Failed to initialize queue:', error);\n        }\n    }\n};\n// Helper Functions\nconst encryptData = (data)=>{\n    const algorithm = 'aes-256-cbc';\n    const key = Buffer.from(process.env.EXAM_ENCRYPTION_KEY || '', 'utf-8');\n    const iv = crypto__WEBPACK_IMPORTED_MODULE_2__.randomBytes(16);\n    const cipher = crypto__WEBPACK_IMPORTED_MODULE_2__.createCipheriv(algorithm, key.slice(0, 32), iv);\n    let encrypted = cipher.update(JSON.stringify(data), 'utf-8', 'base64');\n    encrypted += cipher.final('base64');\n    return iv.toString('hex') + ':' + encrypted;\n};\n// Controller Functions\nconst searchQuestions = async (req, res)=>{\n    const { search } = req.query;\n    try {\n        const results = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.searchQuestionsByCodeOrId(search);\n        return res.status(200).json({\n            message: 'Questions retrieved successfully',\n            data: results\n        });\n    } catch (error) {\n        return res.status(500).json({\n            error: error.message\n        });\n    }\n};\nconst getAllQuestions = async (req, res)=>{\n    try {\n        const questions = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.getAllQuestions();\n        res.status(200).json(questions);\n    } catch (error) {\n        console.error('Error fetching questions:', error);\n        res.status(500).json({\n            error: 'Failed to fetch questions'\n        });\n    }\n};\nconst getPagedQuestions = async (req, res)=>{\n    try {\n        const filters = {\n            page: parseInt(req.query.page) || 1,\n            limit: parseInt(req.query.limit) || 50,\n            search: req.query.search || '',\n            question_type: req.query.question_type || 'All',\n            exam_id: req.query.exam_id ? parseInt(req.query.exam_id) : undefined,\n            topic: req.query.topic || undefined,\n            subtopic: req.query.subtopic || undefined,\n            creator: req.query.creator || undefined,\n            start_date: req.query.start_date || undefined,\n            end_date: req.query.end_date || undefined,\n            sortKey: req.query.sortKey || 'q.id',\n            sortOrder: req.query.sortOrder || 'asc',\n            userId: req.query.userId || undefined\n        };\n        const result = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.getPagedQuestions(filters);\n        res.status(200).json(result);\n    } catch (error) {\n        console.error('Error in getQuestions controller:', error);\n        res.status(500).json({\n            message: 'Internal Server Error'\n        });\n    }\n};\nconst getQuestionsByExamString = async (req, res)=>{\n    const examString = req.query.exam_string;\n    try {\n        const questions = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.getQuestionsByExamString(examString);\n        const encryptedQuestions = encryptData(questions);\n        res.status(200).json({\n            encryptedData: encryptedQuestions\n        });\n    } catch (error) {\n        console.error('Error fetching questions by exam_string:', error);\n        res.status(500).json({\n            error: 'Failed to fetch questions'\n        });\n    }\n};\nconst getDiagnosticQuestionsByExamString = async (req, res)=>{\n    const examString = req.query.exam_string;\n    try {\n        const payload = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.getDiagnosticQuestionsByExamString(examString);\n        console.log(payload);\n        res.status(200).json({\n            encryptedData: encryptData(payload)\n        });\n    } catch (err) {\n        console.error('Error fetching diagnostic questions:', err);\n        res.status(500).json({\n            error: 'Failed to fetch diagnostic questions'\n        });\n    }\n};\nconst getQuestionsByExamId = async (req, res)=>{\n    const examId = parseInt(req.query.examid);\n    try {\n        const questions = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.getQuestionsByExamId(examId);\n        res.status(200).json(questions);\n    } catch (error) {\n        console.error('Error fetching questions by exam_string:', error);\n        res.status(500).json({\n            error: 'Failed to fetch questions'\n        });\n    }\n};\nconst getQuestionById = async (req, res)=>{\n    const id = parseInt(req.query.id);\n    try {\n        const question = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.getQuestionById(id);\n        if (!question) {\n            return res.status(404).json({\n                error: 'Question not found'\n            });\n        }\n        res.status(200).json(question);\n    } catch (error) {\n        console.error('Error fetching question:', error);\n        res.status(500).json({\n            error: 'Failed to fetch question'\n        });\n    }\n};\nconst getQuestionByUId = async (req, res)=>{\n    const id = parseInt(req.query.id);\n    try {\n        const question = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.getQuestionByUId(id);\n        if (!question) {\n            return res.status(404).json({\n                error: 'Question not found'\n            });\n        }\n        res.status(200).json(question);\n    } catch (error) {\n        console.error('Error fetching question:', error);\n        res.status(500).json({\n            error: 'Failed to fetch question'\n        });\n    }\n};\nconst createQuestion = async (req, res)=>{\n    await initializeQueue();\n    if (!questionQueue) {\n        return res.status(503).json({\n            error: 'Queue not initialized yet. Please try again shortly.'\n        });\n    }\n    const questionData = req.body;\n    const create_user_id = req.user?.id;\n    if (!create_user_id) {\n        return res.status(400).json({\n            error: 'create_user_id is required'\n        });\n    }\n    try {\n        const result = await questionQueue.add(()=>handleSingleQuestion({\n                questionData,\n                create_user_id\n            }));\n        res.status(201).json(result);\n    } catch (error) {\n        console.error('Error in question queue:', error);\n        res.status(500).json({\n            error: error.message\n        });\n    }\n};\nconst handleSingleQuestion = async ({ questionData, create_user_id })=>{\n    const client = await _lib_db__WEBPACK_IMPORTED_MODULE_3__[\"default\"].connect();\n    const startTime = Date.now();\n    console.log('[handleSingleQuestion] START', {\n        questionData,\n        create_user_id\n    });\n    try {\n        // --- Begin transaction --------------------------------------------------\n        await client.query('BEGIN');\n        console.log('[handleSingleQuestion] BEGIN transaction');\n        // --- Resolve subâ€‘topic metadata ----------------------------------------\n        const subtopicId = questionData.exam_type_id;\n        console.log('[handleSingleQuestion] subtopicId:', subtopicId);\n        const subtopicsInfo = await _models_examTypes_model__WEBPACK_IMPORTED_MODULE_1__.getSubtopicsInfo([\n            subtopicId\n        ]);\n        console.log('[handleSingleQuestion] subtopicsInfo:', subtopicsInfo);\n        if (!subtopicsInfo.length) {\n            console.error('[handleSingleQuestion] Subtopic not found', {\n                subtopicId\n            });\n            throw new Error(`Subtopik dengan ID ${subtopicId} tidak ditemukan`);\n        }\n        const { bid_code, top_code, sub_code, last_sequence } = subtopicsInfo[0];\n        console.log('[handleSingleQuestion] subtopicInfo:', {\n            bid_code,\n            top_code,\n            sub_code,\n            last_sequence\n        });\n        // --- Generate next question code ---------------------------------------\n        const nextSequence = last_sequence ? parseInt(last_sequence) + 1 : 1;\n        const sequence = nextSequence.toString().padStart(4, '0');\n        const question_code = `${bid_code}${top_code}${sub_code}${sequence}`;\n        console.log('[handleSingleQuestion] Generated question_code:', question_code);\n        // --- Prepare payload ----------------------------------------------------\n        const questionWithCode = {\n            ...questionData,\n            code: question_code,\n            passage_id: questionData.passage_id || null\n        };\n        console.log('[handleSingleQuestion] questionWithCode:', questionWithCode);\n        // --- Persist question ---------------------------------------------------\n        const savedQuestion = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.createQuestion(questionWithCode, create_user_id);\n        console.log('[handleSingleQuestion] savedQuestion:', savedQuestion);\n        // --- Commit transaction -------------------------------------------------\n        await client.query('COMMIT');\n        console.log('[handleSingleQuestion] COMMIT transaction (elapsed %dms)', Date.now() - startTime);\n        return savedQuestion;\n    } catch (error) {\n        await client.query('ROLLBACK');\n        console.error('[handleSingleQuestion] ROLLBACK transaction due to error', error);\n        throw error;\n    } finally{\n        client.release();\n        console.log('[handleSingleQuestion] client released (total %dms)', Date.now() - startTime);\n    }\n};\nconst createBulkQuestions = async (req, res)=>{\n    await initializeQueue();\n    if (!questionQueue) {\n        return res.status(503).json({\n            error: 'Queue not initialized yet. Please try again shortly.'\n        });\n    }\n    const { questions } = req.body;\n    const create_user_id = req.user?.id;\n    if (!questions || !Array.isArray(questions) || questions.length === 0) {\n        return res.status(400).json({\n            error: 'No questions provided'\n        });\n    }\n    if (!create_user_id) {\n        return res.status(400).json({\n            error: 'create_user_id is required'\n        });\n    }\n    try {\n        const result = await questionQueue.add(()=>handleBulkQuestions({\n                questions,\n                create_user_id\n            }));\n        res.status(201).json(result);\n    } catch (error) {\n        console.error('Error in bulk queue:', error);\n        res.status(500).json({\n            error: error.message\n        });\n    }\n};\nconst handleBulkQuestions = async ({ questions, create_user_id })=>{\n    const client = await _lib_db__WEBPACK_IMPORTED_MODULE_3__[\"default\"].connect();\n    try {\n        await client.query('BEGIN');\n        const subtopicMap = new Map();\n        questions.forEach((q)=>{\n            const subtopicId = q.exam_type_id;\n            if (!subtopicMap.has(subtopicId)) {\n                subtopicMap.set(subtopicId, []);\n            }\n            subtopicMap.get(subtopicId).push(q);\n        });\n        const subtopicIds = [\n            ...subtopicMap.keys()\n        ];\n        const subtopicsInfo = await _models_examTypes_model__WEBPACK_IMPORTED_MODULE_1__.getSubtopicsInfo(subtopicIds);\n        const questionsWithCodes = [];\n        const codeCounters = new Map();\n        for (const { id, last_sequence } of subtopicsInfo){\n            codeCounters.set(id, last_sequence ? parseInt(last_sequence) + 1 : 1);\n        }\n        for (const [subtopicId, questionGroup] of subtopicMap){\n            const subtopicInfo = subtopicsInfo.find((info)=>info.id === subtopicId);\n            if (!subtopicInfo) {\n                throw new Error(`Subtopik dengan ID ${subtopicId} tidak ditemukan`);\n            }\n            const { bid_code, top_code, sub_code } = subtopicInfo;\n            let counter = codeCounters.get(subtopicId);\n            for (const question of questionGroup){\n                const sequence = counter.toString().padStart(4, '0');\n                const question_code = `${bid_code}${top_code}${sub_code}${sequence}`;\n                questionsWithCodes.push({\n                    ...question,\n                    question_code,\n                    passage_id: question.passage_id || null,\n                    create_user_id\n                });\n                counter++;\n            }\n            codeCounters.set(subtopicId, counter);\n        }\n        const savedQuestions = [];\n        for (const q of questionsWithCodes){\n            const savedQuestion = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.createQuestion(q, create_user_id);\n            savedQuestions.push(savedQuestion);\n        }\n        await client.query('COMMIT');\n        return savedQuestions;\n    } catch (error) {\n        await client.query('ROLLBACK');\n        throw error;\n    } finally{\n        client.release();\n    }\n};\nconst updateQuestion = async (req, res)=>{\n    const questionId = parseInt(req.query.id);\n    const questionData = req.body;\n    const edit_user_id = req.user?.id;\n    if (!edit_user_id) {\n        return res.status(400).json({\n            error: 'edit_user_id is required'\n        });\n    }\n    try {\n        const updatedQuestion = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.updateQuestion(questionId, questionData, edit_user_id);\n        if (!updatedQuestion) {\n            return res.status(404).json({\n                error: 'Question not found'\n            });\n        }\n        res.json(updatedQuestion);\n    } catch (error) {\n        console.error('Error updating question:', error);\n        res.status(500).json({\n            error: 'Failed to update question'\n        });\n    }\n};\nconst updateBulkQuestions = async (req, res)=>{\n    const { questions } = req.body;\n    const edit_user_id = req.user?.id;\n    if (!Array.isArray(questions) || questions.length === 0) {\n        return res.status(400).json({\n            error: 'Questions array is required and must not be empty'\n        });\n    }\n    if (!edit_user_id) {\n        return res.status(400).json({\n            error: 'edit_user_id is required'\n        });\n    }\n    const missingIds = questions.some((q)=>!q.id);\n    if (missingIds) {\n        return res.status(400).json({\n            error: 'All questions must have an ID for bulk update'\n        });\n    }\n    try {\n        const updatedQuestions = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.updateBulkQuestions(questions, edit_user_id);\n        res.status(200).json(updatedQuestions);\n    } catch (error) {\n        console.error('Error updating bulk questions:', error);\n        res.status(500).json({\n            error: 'Failed to update questions in bulk'\n        });\n    }\n};\nconst appendExamId = async (req, res)=>{\n    const { questionId, examId } = req.body;\n    try {\n        if (!questionId || !examId) {\n            return res.status(400).json({\n                error: 'questionId and examId are required'\n            });\n        }\n        const result = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.appendExamIdToQuestion(questionId, examId);\n        return res.status(200).json({\n            message: 'Exam ID appended successfully',\n            data: result\n        });\n    } catch (error) {\n        return res.status(500).json({\n            error: error.message\n        });\n    }\n};\nconst deleteQuestion = async (req, res)=>{\n    const questionId = parseInt(req.query.id);\n    try {\n        const deletedQuestion = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.deleteQuestion(questionId);\n        if (!deletedQuestion) {\n            return res.status(404).json({\n                error: 'Question not found'\n            });\n        }\n        res.json({\n            message: 'Question deleted successfully',\n            question: deletedQuestion\n        });\n    } catch (error) {\n        console.error('Error deleting question:', error);\n        res.status(500).json({\n            error: 'Failed to delete question'\n        });\n    }\n};\n// Passage Controllers\nconst searchPassages = async (req, res)=>{\n    const { search } = req.query;\n    try {\n        const results = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.searchPassages(search);\n        res.status(200).json(results);\n    } catch (error) {\n        res.status(500).json({\n            error: error.message\n        });\n    }\n};\nconst getPassageById = async (req, res)=>{\n    const id = parseInt(req.query.id);\n    try {\n        const passage = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.getPassageById(id);\n        if (!passage) {\n            return res.status(404).json({\n                error: 'Passage not found'\n            });\n        }\n        res.status(200).json(passage);\n    } catch (error) {\n        res.status(500).json({\n            error: error.message\n        });\n    }\n};\nconst createPassage = async (req, res)=>{\n    const { title, passage } = req.body;\n    const create_user_id = req.user?.id;\n    if (!title || !passage) {\n        return res.status(400).json({\n            error: 'Title and passage are required'\n        });\n    }\n    if (!create_user_id) {\n        return res.status(400).json({\n            error: 'create_user_id is required'\n        });\n    }\n    try {\n        const newPassage = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.createPassage({\n            title,\n            passage\n        }, create_user_id);\n        res.status(201).json(newPassage);\n    } catch (error) {\n        res.status(500).json({\n            error: error.message\n        });\n    }\n};\nconst updatePassage = async (req, res)=>{\n    const passageId = parseInt(req.query.id);\n    const { title, passage } = req.body;\n    const update_user_id = req.user?.id;\n    if (!title || !passage) {\n        return res.status(400).json({\n            error: 'Title and passage are required'\n        });\n    }\n    if (!update_user_id) {\n        return res.status(400).json({\n            error: 'update_user_id is required'\n        });\n    }\n    try {\n        const updatedPassage = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.updatePassage(passageId, {\n            title,\n            passage\n        }, update_user_id);\n        if (!updatedPassage) {\n            return res.status(404).json({\n                error: 'Passage not found'\n            });\n        }\n        res.status(200).json(updatedPassage);\n    } catch (error) {\n        res.status(500).json({\n            error: error.message\n        });\n    }\n};\nconst verifyCsv = async (req, res)=>{\n    try {\n        const payload = req.body;\n        if (!Array.isArray(payload) || payload.length === 0) {\n            return res.status(400).json({\n                error: 'Payload harus berupa array dan tidak boleh kosong',\n                example: [\n                    {\n                        \"id\": \"194\",\n                        \"code\": \"LOGFRPR0152\"\n                    },\n                    {\n                        \"id\": \"195\",\n                        \"code\": \"LOGFRPR0153\"\n                    }\n                ]\n            });\n        }\n        const invalidItems = payload.filter((item)=>!item.id || !item.code || typeof item.id !== 'string' || typeof item.code !== 'string');\n        if (invalidItems.length > 0) {\n            return res.status(400).json({\n                error: 'Setiap item harus memiliki property id dan code yang valid',\n                invalidItems: invalidItems,\n                example: {\n                    \"id\": \"194\",\n                    \"code\": \"LOGFRPR0152\"\n                }\n            });\n        }\n        const verificationResult = await _models_questions_model__WEBPACK_IMPORTED_MODULE_0__.verifyIdCodePairs(payload);\n        const matchedPairs = verificationResult.results.filter((r)=>r.is_match);\n        const notFoundIds = verificationResult.results.filter((r)=>r.status === 'id_not_found');\n        const mismatchedCodes = verificationResult.results.filter((r)=>r.status === 'code_mismatch');\n        const response = {\n            status: 'success',\n            message: 'Verifikasi pasangan ID-Code berhasil dilakukan',\n            summary: verificationResult.summary,\n            data: {\n                matched_pairs: matchedPairs,\n                id_not_found: notFoundIds,\n                code_mismatched: mismatchedCodes\n            }\n        };\n        if (verificationResult.summary.matched === verificationResult.summary.total) {\n            res.status(200).json(response);\n        } else if (verificationResult.summary.matched === 0) {\n            res.status(404).json({\n                ...response,\n                status: 'no_match',\n                message: 'Tidak ada pasangan ID-Code yang cocok'\n            });\n        } else {\n            res.status(206).json({\n                ...response,\n                status: 'partial_match',\n                message: 'Sebagian pasangan ID-Code cocok, sebagian tidak cocok'\n            });\n        }\n    } catch (error) {\n        console.error('Error verifying CSV:', error);\n        res.status(500).json({\n            error: 'Gagal melakukan verifikasi CSV',\n            details:  true ? error.message : 0\n        });\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2NvbnRyb2xsZXJzL3F1ZXN0aW9ucy5jb250cm9sbGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxzQ0FBc0M7QUFFcUI7QUFFQztBQUMzQjtBQUNKO0FBaUM3Qiw0QkFBNEI7QUFDNUIsSUFBSUksZ0JBQXFCO0FBRXpCLG1CQUFtQjtBQUNuQixNQUFNQyxrQkFBa0I7SUFDdEIsSUFBSSxDQUFDRCxlQUFlO1FBQ2xCLElBQUk7WUFDRixNQUFNRSxTQUFTLENBQUMsTUFBTSw4R0FBZ0IsRUFBR0MsT0FBTztZQUNoREgsZ0JBQWdCLElBQUlFLE9BQU87Z0JBQUVFLGFBQWE7WUFBRTtRQUM5QyxFQUFFLE9BQU9DLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUErQkE7UUFDL0M7SUFDRjtBQUNGO0FBRUEsbUJBQW1CO0FBQ25CLE1BQU1FLGNBQWMsQ0FBQ0M7SUFDbkIsTUFBTUMsWUFBWTtJQUNsQixNQUFNQyxNQUFNQyxPQUFPQyxJQUFJLENBQUNDLFFBQVFDLEdBQUcsQ0FBQ0MsbUJBQW1CLElBQUksSUFBSTtJQUMvRCxNQUFNQyxLQUFLbEIsK0NBQWtCLENBQUM7SUFFOUIsTUFBTW9CLFNBQVNwQixrREFBcUIsQ0FBQ1csV0FBV0MsSUFBSVUsS0FBSyxDQUFDLEdBQUcsS0FBS0o7SUFFbEUsSUFBSUssWUFBWUgsT0FBT0ksTUFBTSxDQUFDQyxLQUFLQyxTQUFTLENBQUNoQixPQUFPLFNBQVM7SUFDN0RhLGFBQWFILE9BQU9PLEtBQUssQ0FBQztJQUUxQixPQUFPVCxHQUFHVSxRQUFRLENBQUMsU0FBUyxNQUFNTDtBQUNwQztBQUVBLHVCQUF1QjtBQUNoQixNQUFNTSxrQkFBa0IsT0FBT0MsS0FBcUJDO0lBQ3pELE1BQU0sRUFBRUMsTUFBTSxFQUFFLEdBQUdGLElBQUlHLEtBQUs7SUFFNUIsSUFBSTtRQUNGLE1BQU1DLFVBQVUsTUFBTXBDLDhFQUF1QyxDQUFDa0M7UUFDOUQsT0FBT0QsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUNUIsTUFBTXdCO1FBQ1I7SUFDRixFQUFFLE9BQU8zQixPQUFZO1FBQ25CLE9BQU93QixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUU5QixPQUFPQSxNQUFNK0IsT0FBTztRQUFDO0lBQ3JEO0FBQ0YsRUFBRTtBQUVLLE1BQU1DLGtCQUFrQixPQUFPVCxLQUFxQkM7SUFDekQsSUFBSTtRQUNGLE1BQU1TLFlBQVksTUFBTTFDLG9FQUE2QjtRQUNyRGlDLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNHO0lBQ3ZCLEVBQUUsT0FBT2pDLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0N3QixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUU5QixPQUFPO1FBQTRCO0lBQzVEO0FBQ0YsRUFBRTtBQUVLLE1BQU1rQyxvQkFBb0IsT0FBT1gsS0FBcUJDO0lBQzNELElBQUk7UUFDRixNQUFNVyxVQUFVO1lBQ2RDLE1BQU1DLFNBQVNkLElBQUlHLEtBQUssQ0FBQ1UsSUFBSSxLQUFlO1lBQzVDRSxPQUFPRCxTQUFTZCxJQUFJRyxLQUFLLENBQUNZLEtBQUssS0FBZTtZQUM5Q2IsUUFBUUYsSUFBSUcsS0FBSyxDQUFDRCxNQUFNLElBQWM7WUFDdENjLGVBQWVoQixJQUFJRyxLQUFLLENBQUNhLGFBQWEsSUFBYztZQUNwREMsU0FBU2pCLElBQUlHLEtBQUssQ0FBQ2MsT0FBTyxHQUFHSCxTQUFTZCxJQUFJRyxLQUFLLENBQUNjLE9BQU8sSUFBY0M7WUFDckVDLE9BQU9uQixJQUFJRyxLQUFLLENBQUNnQixLQUFLLElBQWNEO1lBQ3BDRSxVQUFVcEIsSUFBSUcsS0FBSyxDQUFDaUIsUUFBUSxJQUFjRjtZQUMxQ0csU0FBU3JCLElBQUlHLEtBQUssQ0FBQ2tCLE9BQU8sSUFBY0g7WUFDeENJLFlBQVl0QixJQUFJRyxLQUFLLENBQUNtQixVQUFVLElBQWNKO1lBQzlDSyxVQUFVdkIsSUFBSUcsS0FBSyxDQUFDb0IsUUFBUSxJQUFjTDtZQUMxQ00sU0FBU3hCLElBQUlHLEtBQUssQ0FBQ3FCLE9BQU8sSUFBYztZQUN4Q0MsV0FBV3pCLElBQUlHLEtBQUssQ0FBQ3NCLFNBQVMsSUFBYztZQUM1Q0MsUUFBUTFCLElBQUlHLEtBQUssQ0FBQ3VCLE1BQU0sSUFBY1I7UUFDeEM7UUFFQSxNQUFNUyxTQUFTLE1BQU0zRCxzRUFBK0IsQ0FBQzRDO1FBQ3JEWCxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDb0I7SUFDdkIsRUFBRSxPQUFPbEQsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMscUNBQXFDQTtRQUNuRHdCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUF3QjtJQUMxRDtBQUNGLEVBQUU7QUFFSyxNQUFNb0IsMkJBQTJCLE9BQU81QixLQUFxQkM7SUFDbEUsTUFBTTRCLGFBQWE3QixJQUFJRyxLQUFLLENBQUMyQixXQUFXO0lBRXhDLElBQUk7UUFDRixNQUFNcEIsWUFBWSxNQUFNMUMsNkVBQXNDLENBQUM2RDtRQUUvRCxNQUFNRSxxQkFBcUJwRCxZQUFZK0I7UUFFdkNULElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRXlCLGVBQWVEO1FBQW1CO0lBQzNELEVBQUUsT0FBT3RELE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDRDQUE0Q0E7UUFDMUR3QixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUU5QixPQUFPO1FBQTRCO0lBQzVEO0FBQ0YsRUFBRTtBQUVLLE1BQU13RCxxQ0FBcUMsT0FBT2pDLEtBQXFCQztJQUM1RSxNQUFNNEIsYUFBYTdCLElBQUlHLEtBQUssQ0FBQzJCLFdBQVc7SUFDeEMsSUFBSTtRQUNGLE1BQU1JLFVBQVUsTUFBTWxFLHVGQUFnRCxDQUFDNkQ7UUFFdkVuRCxRQUFReUQsR0FBRyxDQUFDRDtRQUNaakMsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFeUIsZUFBZXJELFlBQVl1RDtRQUFTO0lBQzdELEVBQUUsT0FBT0UsS0FBSztRQUNaMUQsUUFBUUQsS0FBSyxDQUFDLHdDQUF3QzJEO1FBQ3REbkMsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFOUIsT0FBTztRQUF1QztJQUN2RTtBQUNGLEVBQUU7QUFFSyxNQUFNNEQsdUJBQXVCLE9BQU9yQyxLQUFxQkM7SUFDOUQsTUFBTXFDLFNBQVN4QixTQUFTZCxJQUFJRyxLQUFLLENBQUNvQyxNQUFNO0lBRXhDLElBQUk7UUFDRixNQUFNN0IsWUFBWSxNQUFNMUMseUVBQWtDLENBQUNzRTtRQUMzRHJDLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNHO0lBQ3ZCLEVBQUUsT0FBT2pDLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDRDQUE0Q0E7UUFDMUR3QixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUU5QixPQUFPO1FBQTRCO0lBQzVEO0FBQ0YsRUFBRTtBQUVLLE1BQU0rRCxrQkFBa0IsT0FBT3hDLEtBQXFCQztJQUN6RCxNQUFNd0MsS0FBSzNCLFNBQVNkLElBQUlHLEtBQUssQ0FBQ3NDLEVBQUU7SUFDaEMsSUFBSTtRQUNGLE1BQU1DLFdBQVcsTUFBTTFFLG9FQUE2QixDQUFDeUU7UUFDckQsSUFBSSxDQUFDQyxVQUFVO1lBQ2IsT0FBT3pDLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUU5QixPQUFPO1lBQXFCO1FBQzVEO1FBQ0F3QixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDbUM7SUFDdkIsRUFBRSxPQUFPakUsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQ3dCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRTlCLE9BQU87UUFBMkI7SUFDM0Q7QUFDRixFQUFFO0FBRUssTUFBTWtFLG1CQUFtQixPQUFPM0MsS0FBcUJDO0lBQzFELE1BQU13QyxLQUFLM0IsU0FBU2QsSUFBSUcsS0FBSyxDQUFDc0MsRUFBRTtJQUNoQyxJQUFJO1FBQ0YsTUFBTUMsV0FBVyxNQUFNMUUscUVBQThCLENBQUN5RTtRQUN0RCxJQUFJLENBQUNDLFVBQVU7WUFDYixPQUFPekMsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRTlCLE9BQU87WUFBcUI7UUFDNUQ7UUFDQXdCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNtQztJQUN2QixFQUFFLE9BQU9qRSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDd0IsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFOUIsT0FBTztRQUEyQjtJQUMzRDtBQUNGLEVBQUU7QUFFSyxNQUFNbUUsaUJBQWlCLE9BQU81QyxLQUEyQkM7SUFDOUQsTUFBTTVCO0lBRU4sSUFBSSxDQUFDRCxlQUFlO1FBQ2xCLE9BQU82QixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUU5QixPQUFPO1FBQXVEO0lBQzlGO0lBRUEsTUFBTW9FLGVBQTZCN0MsSUFBSThDLElBQUk7SUFDM0MsTUFBTUMsaUJBQWlCL0MsSUFBSWdELElBQUksRUFBRVA7SUFFakMsSUFBSSxDQUFDTSxnQkFBZ0I7UUFDbkIsT0FBTzlDLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRTlCLE9BQU87UUFBNkI7SUFDcEU7SUFFQSxJQUFJO1FBQ0YsTUFBTWtELFNBQVMsTUFBTXZELGNBQWM2RSxHQUFHLENBQUMsSUFDckNDLHFCQUFxQjtnQkFBRUw7Z0JBQWNFO1lBQWU7UUFHdEQ5QyxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDb0I7SUFDdkIsRUFBRSxPQUFPbEQsT0FBWTtRQUNuQkMsUUFBUUQsS0FBSyxDQUFDLDRCQUE0QkE7UUFDMUN3QixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUU5QixPQUFPQSxNQUFNK0IsT0FBTztRQUFDO0lBQzlDO0FBQ0YsRUFBRTtBQUVLLE1BQU0wQyx1QkFBdUIsT0FDbEMsRUFBRUwsWUFBWSxFQUFFRSxjQUFjLEVBQTBEO0lBRXhGLE1BQU1JLFNBQVMsTUFBTWhGLHVEQUFZO0lBQ2pDLE1BQU1rRixZQUFZQyxLQUFLQyxHQUFHO0lBQzFCN0UsUUFBUXlELEdBQUcsQ0FBQyxnQ0FBZ0M7UUFBRVU7UUFBY0U7SUFBZTtJQUUzRSxJQUFJO1FBQ0YsMkVBQTJFO1FBQzNFLE1BQU1JLE9BQU9oRCxLQUFLLENBQUM7UUFDbkJ6QixRQUFReUQsR0FBRyxDQUFDO1FBRVosMEVBQTBFO1FBQzFFLE1BQU1xQixhQUFhWCxhQUFhWSxZQUFZO1FBQzVDL0UsUUFBUXlELEdBQUcsQ0FBQyxzQ0FBc0NxQjtRQUVsRCxNQUFNRSxnQkFBZ0IsTUFBTXpGLHFFQUErQixDQUFDO1lBQUN1RjtTQUFZO1FBQ3pFOUUsUUFBUXlELEdBQUcsQ0FBQyx5Q0FBeUN1QjtRQUVyRCxJQUFJLENBQUNBLGNBQWNFLE1BQU0sRUFBRTtZQUN6QmxGLFFBQVFELEtBQUssQ0FBQyw2Q0FBNkM7Z0JBQUUrRTtZQUFXO1lBQ3hFLE1BQU0sSUFBSUssTUFBTSxDQUFDLG1CQUFtQixFQUFFTCxXQUFXLGdCQUFnQixDQUFDO1FBQ3BFO1FBRUEsTUFBTSxFQUFFTSxRQUFRLEVBQUVDLFFBQVEsRUFBRUMsUUFBUSxFQUFFQyxhQUFhLEVBQUUsR0FBR1AsYUFBYSxDQUFDLEVBQUU7UUFDeEVoRixRQUFReUQsR0FBRyxDQUFDLHdDQUF3QztZQUNsRDJCO1lBQ0FDO1lBQ0FDO1lBQ0FDO1FBQ0Y7UUFFQSwwRUFBMEU7UUFDMUUsTUFBTUMsZUFBZUQsZ0JBQWdCbkQsU0FBU21ELGlCQUFpQixJQUFJO1FBQ25FLE1BQU1FLFdBQVdELGFBQWFwRSxRQUFRLEdBQUdzRSxRQUFRLENBQUMsR0FBRztRQUNyRCxNQUFNQyxnQkFBZ0IsR0FBR1AsV0FBV0MsV0FBV0MsV0FBV0csVUFBVTtRQUNwRXpGLFFBQVF5RCxHQUFHLENBQUMsbURBQW1Ea0M7UUFFL0QsMkVBQTJFO1FBQzNFLE1BQU1DLG1CQUFtQjtZQUN2QixHQUFHekIsWUFBWTtZQUNmMEIsTUFBS0Y7WUFDTEcsWUFBWTNCLGFBQWEyQixVQUFVLElBQUk7UUFDekM7UUFDQTlGLFFBQVF5RCxHQUFHLENBQUMsNENBQTRDbUM7UUFFeEQsMkVBQTJFO1FBQzNFLE1BQU1HLGdCQUFnQixNQUFNekcsbUVBQTRCLENBQ3REc0csa0JBQ0F2QjtRQUVGckUsUUFBUXlELEdBQUcsQ0FBQyx5Q0FBeUNzQztRQUVyRCwyRUFBMkU7UUFDM0UsTUFBTXRCLE9BQU9oRCxLQUFLLENBQUM7UUFDbkJ6QixRQUFReUQsR0FBRyxDQUNULDREQUNBbUIsS0FBS0MsR0FBRyxLQUFLRjtRQUdmLE9BQU9vQjtJQUNULEVBQUUsT0FBT2hHLE9BQU87UUFDZCxNQUFNMEUsT0FBT2hELEtBQUssQ0FBQztRQUNuQnpCLFFBQVFELEtBQUssQ0FBQyw0REFBNERBO1FBQzFFLE1BQU1BO0lBQ1IsU0FBVTtRQUNSMEUsT0FBT3VCLE9BQU87UUFDZGhHLFFBQVF5RCxHQUFHLENBQ1QsdURBQ0FtQixLQUFLQyxHQUFHLEtBQUtGO0lBRWpCO0FBQ0YsRUFBRTtBQUdLLE1BQU1zQixzQkFBc0IsT0FBTzNFLEtBQTJCQztJQUNuRSxNQUFNNUI7SUFFTixJQUFJLENBQUNELGVBQWU7UUFDbEIsT0FBTzZCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRTlCLE9BQU87UUFBdUQ7SUFDOUY7SUFFQSxNQUFNLEVBQUVpQyxTQUFTLEVBQUUsR0FBd0JWLElBQUk4QyxJQUFJO0lBQ25ELE1BQU1DLGlCQUFpQi9DLElBQUlnRCxJQUFJLEVBQUVQO0lBRWpDLElBQUksQ0FBQy9CLGFBQWEsQ0FBQ2tFLE1BQU1DLE9BQU8sQ0FBQ25FLGNBQWNBLFVBQVVrRCxNQUFNLEtBQUssR0FBRztRQUNyRSxPQUFPM0QsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFOUIsT0FBTztRQUF3QjtJQUMvRDtJQUVBLElBQUksQ0FBQ3NFLGdCQUFnQjtRQUNuQixPQUFPOUMsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFOUIsT0FBTztRQUE2QjtJQUNwRTtJQUVBLElBQUk7UUFDRixNQUFNa0QsU0FBUyxNQUFNdkQsY0FBYzZFLEdBQUcsQ0FBQyxJQUNyQzZCLG9CQUFvQjtnQkFBRXBFO2dCQUFXcUM7WUFBZTtRQUdsRDlDLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNvQjtJQUN2QixFQUFFLE9BQU9sRCxPQUFZO1FBQ25CQyxRQUFRRCxLQUFLLENBQUMsd0JBQXdCQTtRQUN0Q3dCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRTlCLE9BQU9BLE1BQU0rQixPQUFPO1FBQUM7SUFDOUM7QUFDRixFQUFFO0FBRUYsTUFBTXNFLHNCQUFzQixPQUFPLEVBQUVwRSxTQUFTLEVBQUVxQyxjQUFjLEVBQXlEO0lBQ3JILE1BQU1JLFNBQVMsTUFBTWhGLHVEQUFZO0lBRWpDLElBQUk7UUFDRixNQUFNZ0YsT0FBT2hELEtBQUssQ0FBQztRQUVuQixNQUFNNEUsY0FBYyxJQUFJQztRQUV4QnRFLFVBQVV1RSxPQUFPLENBQUNDLENBQUFBO1lBQ2hCLE1BQU0xQixhQUFhMEIsRUFBRXpCLFlBQVk7WUFDakMsSUFBSSxDQUFDc0IsWUFBWUksR0FBRyxDQUFDM0IsYUFBYTtnQkFDaEN1QixZQUFZSyxHQUFHLENBQUM1QixZQUFZLEVBQUU7WUFDaEM7WUFDQXVCLFlBQVlNLEdBQUcsQ0FBQzdCLFlBQWE4QixJQUFJLENBQUNKO1FBQ3BDO1FBRUEsTUFBTUssY0FBYztlQUFJUixZQUFZUyxJQUFJO1NBQUc7UUFDM0MsTUFBTTlCLGdCQUFnQixNQUFNekYscUVBQStCLENBQUNzSDtRQUU1RCxNQUFNRSxxQkFBNEIsRUFBRTtRQUNwQyxNQUFNQyxlQUFlLElBQUlWO1FBRXpCLEtBQUssTUFBTSxFQUFFdkMsRUFBRSxFQUFFd0IsYUFBYSxFQUFFLElBQUlQLGNBQWU7WUFDakRnQyxhQUFhTixHQUFHLENBQUMzQyxJQUFJd0IsZ0JBQWdCbkQsU0FBU21ELGlCQUFpQixJQUFJO1FBQ3JFO1FBRUEsS0FBSyxNQUFNLENBQUNULFlBQVltQyxjQUFjLElBQUlaLFlBQWE7WUFDckQsTUFBTWEsZUFBZWxDLGNBQWNtQyxJQUFJLENBQUNDLENBQUFBLE9BQVFBLEtBQUtyRCxFQUFFLEtBQUtlO1lBQzVELElBQUksQ0FBQ29DLGNBQWM7Z0JBQ2pCLE1BQU0sSUFBSS9CLE1BQU0sQ0FBQyxtQkFBbUIsRUFBRUwsV0FBVyxnQkFBZ0IsQ0FBQztZQUNwRTtZQUVBLE1BQU0sRUFBRU0sUUFBUSxFQUFFQyxRQUFRLEVBQUVDLFFBQVEsRUFBRSxHQUFHNEI7WUFDekMsSUFBSUcsVUFBVUwsYUFBYUwsR0FBRyxDQUFDN0I7WUFFL0IsS0FBSyxNQUFNZCxZQUFZaUQsY0FBZTtnQkFDcEMsTUFBTXhCLFdBQVc0QixRQUFRakcsUUFBUSxHQUFHc0UsUUFBUSxDQUFDLEdBQUc7Z0JBQ2hELE1BQU1DLGdCQUFnQixHQUFHUCxXQUFXQyxXQUFXQyxXQUFXRyxVQUFVO2dCQUVwRXNCLG1CQUFtQkgsSUFBSSxDQUFDO29CQUN0QixHQUFHNUMsUUFBUTtvQkFDWDJCO29CQUNBRyxZQUFZOUIsU0FBUzhCLFVBQVUsSUFBSTtvQkFDbkN6QjtnQkFDRjtnQkFFQWdEO1lBQ0Y7WUFFQUwsYUFBYU4sR0FBRyxDQUFDNUIsWUFBWXVDO1FBQy9CO1FBRUEsTUFBTUMsaUJBQWlCLEVBQUU7UUFDekIsS0FBSyxNQUFNZCxLQUFLTyxtQkFBb0I7WUFDbEMsTUFBTWhCLGdCQUFnQixNQUFNekcsbUVBQTRCLENBQUNrSCxHQUFHbkM7WUFDNURpRCxlQUFlVixJQUFJLENBQUNiO1FBQ3RCO1FBRUEsTUFBTXRCLE9BQU9oRCxLQUFLLENBQUM7UUFDbkIsT0FBTzZGO0lBQ1QsRUFBRSxPQUFPdkgsT0FBTztRQUNkLE1BQU0wRSxPQUFPaEQsS0FBSyxDQUFDO1FBQ25CLE1BQU0xQjtJQUNSLFNBQVU7UUFDUjBFLE9BQU91QixPQUFPO0lBQ2hCO0FBQ0Y7QUFFTyxNQUFNdUIsaUJBQWlCLE9BQU9qRyxLQUEyQkM7SUFDOUQsTUFBTWlHLGFBQWFwRixTQUFTZCxJQUFJRyxLQUFLLENBQUNzQyxFQUFFO0lBQ3hDLE1BQU1JLGVBQTZCN0MsSUFBSThDLElBQUk7SUFFM0MsTUFBTXFELGVBQWVuRyxJQUFJZ0QsSUFBSSxFQUFFUDtJQUMvQixJQUFJLENBQUMwRCxjQUFjO1FBQ2pCLE9BQU9sRyxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUU5QixPQUFPO1FBQTJCO0lBQ2xFO0lBRUEsSUFBSTtRQUNGLE1BQU0ySCxrQkFBa0IsTUFBTXBJLG1FQUE0QixDQUFDa0ksWUFBWXJELGNBQWNzRDtRQUNyRixJQUFJLENBQUNDLGlCQUFpQjtZQUNwQixPQUFPbkcsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRTlCLE9BQU87WUFBcUI7UUFDNUQ7UUFDQXdCLElBQUlNLElBQUksQ0FBQzZGO0lBQ1gsRUFBRSxPQUFPM0gsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQ3dCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRTlCLE9BQU87UUFBNEI7SUFDNUQ7QUFDRixFQUFFO0FBRUssTUFBTTRILHNCQUFzQixPQUFPckcsS0FBMkJDO0lBQ25FLE1BQU0sRUFBRVMsU0FBUyxFQUFFLEdBQXdCVixJQUFJOEMsSUFBSTtJQUNuRCxNQUFNcUQsZUFBZW5HLElBQUlnRCxJQUFJLEVBQUVQO0lBRS9CLElBQUksQ0FBQ21DLE1BQU1DLE9BQU8sQ0FBQ25FLGNBQWNBLFVBQVVrRCxNQUFNLEtBQUssR0FBRztRQUN2RCxPQUFPM0QsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFOUIsT0FBTztRQUFvRDtJQUMzRjtJQUVBLElBQUksQ0FBQzBILGNBQWM7UUFDakIsT0FBT2xHLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRTlCLE9BQU87UUFBMkI7SUFDbEU7SUFFQSxNQUFNNkgsYUFBYTVGLFVBQVU2RixJQUFJLENBQUNyQixDQUFBQSxJQUFLLENBQUMsRUFBV3pDLEVBQUU7SUFDckQsSUFBSTZELFlBQVk7UUFDZCxPQUFPckcsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFOUIsT0FBTztRQUFnRDtJQUN2RjtJQUVBLElBQUk7UUFDRixNQUFNK0gsbUJBQW1CLE1BQU14SSx3RUFBaUMsQ0FBQzBDLFdBQVd5RjtRQUM1RWxHLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNpRztJQUN2QixFQUFFLE9BQU8vSCxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxrQ0FBa0NBO1FBQ2hEd0IsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFOUIsT0FBTztRQUFxQztJQUNyRTtBQUNGLEVBQUU7QUFFSyxNQUFNZ0ksZUFBZSxPQUFPekcsS0FBcUJDO0lBQ3RELE1BQU0sRUFBRWlHLFVBQVUsRUFBRTVELE1BQU0sRUFBRSxHQUF3QnRDLElBQUk4QyxJQUFJO0lBRTVELElBQUk7UUFDRixJQUFJLENBQUNvRCxjQUFjLENBQUM1RCxRQUFRO1lBQzFCLE9BQU9yQyxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFOUIsT0FBTztZQUFxQztRQUM1RTtRQUVBLE1BQU1rRCxTQUFTLE1BQU0zRCwyRUFBb0MsQ0FBQ2tJLFlBQVk1RDtRQUN0RSxPQUFPckMsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUNUIsTUFBTStDO1FBQ1I7SUFDRixFQUFFLE9BQU9sRCxPQUFZO1FBQ25CLE9BQU93QixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUU5QixPQUFPQSxNQUFNK0IsT0FBTztRQUFDO0lBQ3JEO0FBQ0YsRUFBRTtBQUVLLE1BQU1tRyxpQkFBaUIsT0FBTzNHLEtBQXFCQztJQUN4RCxNQUFNaUcsYUFBYXBGLFNBQVNkLElBQUlHLEtBQUssQ0FBQ3NDLEVBQUU7SUFFeEMsSUFBSTtRQUNGLE1BQU1tRSxrQkFBa0IsTUFBTTVJLG1FQUE0QixDQUFDa0k7UUFDM0QsSUFBSSxDQUFDVSxpQkFBaUI7WUFDcEIsT0FBTzNHLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUU5QixPQUFPO1lBQXFCO1FBQzVEO1FBQ0F3QixJQUFJTSxJQUFJLENBQUM7WUFBRUMsU0FBUztZQUFpQ2tDLFVBQVVrRTtRQUFnQjtJQUNqRixFQUFFLE9BQU9uSSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDd0IsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFOUIsT0FBTztRQUE0QjtJQUM1RDtBQUNGLEVBQUU7QUFFRixzQkFBc0I7QUFDZixNQUFNb0ksaUJBQWlCLE9BQU83RyxLQUFxQkM7SUFDeEQsTUFBTSxFQUFFQyxNQUFNLEVBQUUsR0FBR0YsSUFBSUcsS0FBSztJQUM1QixJQUFJO1FBQ0YsTUFBTUMsVUFBVSxNQUFNcEMsbUVBQTRCLENBQUNrQztRQUNuREQsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ0g7SUFDdkIsRUFBRSxPQUFPM0IsT0FBWTtRQUNuQndCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRTlCLE9BQU9BLE1BQU0rQixPQUFPO1FBQUM7SUFDOUM7QUFDRixFQUFFO0FBRUssTUFBTXNHLGlCQUFpQixPQUFPOUcsS0FBcUJDO0lBQ3hELE1BQU13QyxLQUFLM0IsU0FBU2QsSUFBSUcsS0FBSyxDQUFDc0MsRUFBRTtJQUNoQyxJQUFJO1FBQ0YsTUFBTXNFLFVBQVUsTUFBTS9JLG1FQUE0QixDQUFDeUU7UUFDbkQsSUFBSSxDQUFDc0UsU0FBUztZQUNaLE9BQU85RyxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFOUIsT0FBTztZQUFvQjtRQUMzRDtRQUNBd0IsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ3dHO0lBQ3ZCLEVBQUUsT0FBT3RJLE9BQVk7UUFDbkJ3QixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUU5QixPQUFPQSxNQUFNK0IsT0FBTztRQUFDO0lBQzlDO0FBQ0YsRUFBRTtBQUVLLE1BQU13RyxnQkFBZ0IsT0FBT2hILEtBQTJCQztJQUM3RCxNQUFNLEVBQUVnSCxLQUFLLEVBQUVGLE9BQU8sRUFBRSxHQUFHL0csSUFBSThDLElBQUk7SUFDbkMsTUFBTUMsaUJBQWlCL0MsSUFBSWdELElBQUksRUFBRVA7SUFFakMsSUFBSSxDQUFDd0UsU0FBUyxDQUFDRixTQUFTO1FBQ3RCLE9BQU85RyxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUU5QixPQUFPO1FBQWlDO0lBQ3hFO0lBRUEsSUFBSSxDQUFDc0UsZ0JBQWdCO1FBQ25CLE9BQU85QyxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUU5QixPQUFPO1FBQTZCO0lBQ3BFO0lBRUEsSUFBSTtRQUNGLE1BQU15SSxhQUFhLE1BQU1sSixrRUFBMkIsQ0FBQztZQUFFaUo7WUFBT0Y7UUFBUSxHQUFHaEU7UUFDekU5QyxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDMkc7SUFDdkIsRUFBRSxPQUFPekksT0FBWTtRQUNuQndCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRTlCLE9BQU9BLE1BQU0rQixPQUFPO1FBQUM7SUFDOUM7QUFDRixFQUFFO0FBRUssTUFBTTJHLGdCQUFnQixPQUFPbkgsS0FBMkJDO0lBQzdELE1BQU1tSCxZQUFZdEcsU0FBU2QsSUFBSUcsS0FBSyxDQUFDc0MsRUFBRTtJQUN2QyxNQUFNLEVBQUV3RSxLQUFLLEVBQUVGLE9BQU8sRUFBRSxHQUFHL0csSUFBSThDLElBQUk7SUFDbkMsTUFBTXVFLGlCQUFpQnJILElBQUlnRCxJQUFJLEVBQUVQO0lBRWpDLElBQUksQ0FBQ3dFLFNBQVMsQ0FBQ0YsU0FBUztRQUN0QixPQUFPOUcsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFOUIsT0FBTztRQUFpQztJQUN4RTtJQUVBLElBQUksQ0FBQzRJLGdCQUFnQjtRQUNuQixPQUFPcEgsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFOUIsT0FBTztRQUE2QjtJQUNwRTtJQUVBLElBQUk7UUFDRixNQUFNNkksaUJBQWlCLE1BQU10SixrRUFBMkIsQ0FBQ29KLFdBQVc7WUFBRUg7WUFBT0Y7UUFBUSxHQUFHTTtRQUN4RixJQUFJLENBQUNDLGdCQUFnQjtZQUNuQixPQUFPckgsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRTlCLE9BQU87WUFBb0I7UUFDM0Q7UUFDQXdCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUMrRztJQUN2QixFQUFFLE9BQU83SSxPQUFZO1FBQ25Cd0IsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFOUIsT0FBT0EsTUFBTStCLE9BQU87UUFBQztJQUM5QztBQUNGLEVBQUU7QUFFSyxNQUFNK0csWUFBWSxPQUFPdkgsS0FBcUJDO0lBQ25ELElBQUk7UUFDRixNQUFNaUMsVUFBVWxDLElBQUk4QyxJQUFJO1FBRXhCLElBQUksQ0FBQzhCLE1BQU1DLE9BQU8sQ0FBQzNDLFlBQVlBLFFBQVEwQixNQUFNLEtBQUssR0FBRztZQUNuRCxPQUFPM0QsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUI5QixPQUFPO2dCQUNQK0ksU0FBUztvQkFBQzt3QkFBQyxNQUFLO3dCQUFNLFFBQU87b0JBQWE7b0JBQUU7d0JBQUMsTUFBSzt3QkFBTSxRQUFPO29CQUFhO2lCQUFFO1lBQ2hGO1FBQ0Y7UUFFQSxNQUFNQyxlQUFldkYsUUFBUXdGLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FDbEMsQ0FBQ0EsS0FBS2xGLEVBQUUsSUFBSSxDQUFDa0YsS0FBS3BELElBQUksSUFDdEIsT0FBT29ELEtBQUtsRixFQUFFLEtBQUssWUFDbkIsT0FBT2tGLEtBQUtwRCxJQUFJLEtBQUs7UUFHdkIsSUFBSWtELGFBQWE3RCxNQUFNLEdBQUcsR0FBRztZQUMzQixPQUFPM0QsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUI5QixPQUFPO2dCQUNQZ0osY0FBY0E7Z0JBQ2RELFNBQVM7b0JBQUMsTUFBSztvQkFBTSxRQUFPO2dCQUFhO1lBQzNDO1FBQ0Y7UUFFQSxNQUFNSSxxQkFBcUIsTUFBTTVKLHNFQUErQixDQUFDa0U7UUFFakUsTUFBTTRGLGVBQWVGLG1CQUFtQnhILE9BQU8sQ0FBQ3NILE1BQU0sQ0FBQ0ssQ0FBQUEsSUFBS0EsRUFBRUMsUUFBUTtRQUN0RSxNQUFNQyxjQUFjTCxtQkFBbUJ4SCxPQUFPLENBQUNzSCxNQUFNLENBQUNLLENBQUFBLElBQUtBLEVBQUV6SCxNQUFNLEtBQUs7UUFDeEUsTUFBTTRILGtCQUFrQk4sbUJBQW1CeEgsT0FBTyxDQUFDc0gsTUFBTSxDQUFDSyxDQUFBQSxJQUFLQSxFQUFFekgsTUFBTSxLQUFLO1FBRTVFLE1BQU02SCxXQUFXO1lBQ2Y3SCxRQUFRO1lBQ1JFLFNBQVM7WUFDVDRILFNBQVNSLG1CQUFtQlEsT0FBTztZQUNuQ3hKLE1BQU07Z0JBQ0p5SixlQUFlUDtnQkFDZlEsY0FBY0w7Z0JBQ2RNLGlCQUFpQkw7WUFDbkI7UUFDRjtRQUVBLElBQUlOLG1CQUFtQlEsT0FBTyxDQUFDSSxPQUFPLEtBQUtaLG1CQUFtQlEsT0FBTyxDQUFDSyxLQUFLLEVBQUU7WUFDM0V4SSxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDNEg7UUFDdkIsT0FBTyxJQUFJUCxtQkFBbUJRLE9BQU8sQ0FBQ0ksT0FBTyxLQUFLLEdBQUc7WUFDbkR2SSxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUNuQixHQUFHNEgsUUFBUTtnQkFDWDdILFFBQVE7Z0JBQ1JFLFNBQVM7WUFDWDtRQUNGLE9BQU87WUFDTFAsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDbkIsR0FBRzRILFFBQVE7Z0JBQ1g3SCxRQUFRO2dCQUNSRSxTQUFTO1lBQ1g7UUFDRjtJQUVGLEVBQUUsT0FBTy9CLE9BQVk7UUFDbkJDLFFBQVFELEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3RDd0IsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQjlCLE9BQU87WUFDUGlLLFNBQVN6SixLQUFzQyxHQUFHUixNQUFNK0IsT0FBTyxHQUFHVSxDQUFTQTtRQUM3RTtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiRDpcXExhdGloYW5cXE5ldyBmb2xkZXIgKDIpXFxGRVxcMVxcRkVcXE5leHRcXGZ1dHVyZWR1XFxjb250cm9sbGVyc1xccXVlc3Rpb25zLmNvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY29udHJvbGxlcnMvcXVlc3Rpb25zLmNvbnRyb2xsZXIudHNcclxuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5pbXBvcnQgKiBhcyBxdWVzdGlvbk1vZGVsIGZyb20gJy4uL21vZGVscy9xdWVzdGlvbnMubW9kZWwnO1xyXG5pbXBvcnQgKiBhcyBleGFtU2Vzc2lvbk1vZGVsIGZyb20gJy4uL21vZGVscy9leGFtU2Vzc2lvbi5tb2RlbCc7XHJcbmltcG9ydCAqIGFzIGV4YW1UeXBlc01vZGVsIGZyb20gJy4uL21vZGVscy9leGFtVHlwZXMubW9kZWwnO1xyXG5pbXBvcnQgKiBhcyBjcnlwdG8gZnJvbSAnY3J5cHRvJztcclxuaW1wb3J0IHBvb2wgZnJvbSAnLi4vbGliL2RiJztcclxuaW1wb3J0IHsgQXV0aGVudGljYXRlZFJlcXVlc3QgfSBmcm9tICcuLi9saWIvbWlkZGxld2FyZS9hdXRoJztcclxuXHJcbi8vIFR5cGVzXHJcbmludGVyZmFjZSBRdWVzdGlvbkRhdGEge1xyXG4gIGV4YW1fdHlwZV9pZD86IG51bWJlcjtcclxuICBxdWVzdGlvbl90b3BpY190eXBlPzogbnVtYmVyO1xyXG4gIHF1ZXN0aW9uX3R5cGU6IHN0cmluZztcclxuICBxdWVzdGlvbl90ZXh0OiBzdHJpbmc7XHJcbiAgb3B0aW9ucz86IHN0cmluZ1tdO1xyXG4gIGNvcnJlY3RfYW5zd2VyPzogc3RyaW5nW107XHJcbiAgc3RhdGVtZW50cz86IHN0cmluZ1tdO1xyXG4gIHBhc3NhZ2VfaWQ/OiBudW1iZXI7XHJcbiAgcXVlc3Rpb25fY29kZT86IHN0cmluZztcclxuICBwZW1iYWhhc2FuPzogc3RyaW5nO1xyXG4gIGxldmVsPzogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQnVsa1F1ZXN0aW9uUmVxdWVzdCB7XHJcbiAgcXVlc3Rpb25zOiBRdWVzdGlvbkRhdGFbXTtcclxufVxyXG5cclxuaW50ZXJmYWNlIEFwcGVuZEV4YW1JZFJlcXVlc3Qge1xyXG4gIHF1ZXN0aW9uSWQ6IG51bWJlcjtcclxuICBleGFtSWQ6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFF1ZXVlSXRlbSB7XHJcbiAgcXVlc3Rpb25EYXRhPzogUXVlc3Rpb25EYXRhO1xyXG4gIHF1ZXN0aW9ucz86IFF1ZXN0aW9uRGF0YVtdO1xyXG4gIGNyZWF0ZV91c2VyX2lkOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8vIE1vY2sgcXVldWUgaW1wbGVtZW50YXRpb25cclxubGV0IHF1ZXN0aW9uUXVldWU6IGFueSA9IG51bGw7XHJcblxyXG4vLyBJbml0aWFsaXplIHF1ZXVlXHJcbmNvbnN0IGluaXRpYWxpemVRdWV1ZSA9IGFzeW5jICgpID0+IHtcclxuICBpZiAoIXF1ZXN0aW9uUXVldWUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IFBRdWV1ZSA9IChhd2FpdCBpbXBvcnQoJ3AtcXVldWUnKSkuZGVmYXVsdDtcclxuICAgICAgcXVlc3Rpb25RdWV1ZSA9IG5ldyBQUXVldWUoeyBjb25jdXJyZW5jeTogMSB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIHF1ZXVlOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG4vLyBIZWxwZXIgRnVuY3Rpb25zXHJcbmNvbnN0IGVuY3J5cHREYXRhID0gKGRhdGE6IGFueSk6IHN0cmluZyA9PiB7XHJcbiAgY29uc3QgYWxnb3JpdGhtID0gJ2Flcy0yNTYtY2JjJztcclxuICBjb25zdCBrZXkgPSBCdWZmZXIuZnJvbShwcm9jZXNzLmVudi5FWEFNX0VOQ1JZUFRJT05fS0VZIHx8ICcnLCAndXRmLTgnKTtcclxuICBjb25zdCBpdiA9IGNyeXB0by5yYW5kb21CeXRlcygxNik7XHJcbiAgXHJcbiAgY29uc3QgY2lwaGVyID0gY3J5cHRvLmNyZWF0ZUNpcGhlcml2KGFsZ29yaXRobSwga2V5LnNsaWNlKDAsIDMyKSwgaXYpO1xyXG4gIFxyXG4gIGxldCBlbmNyeXB0ZWQgPSBjaXBoZXIudXBkYXRlKEpTT04uc3RyaW5naWZ5KGRhdGEpLCAndXRmLTgnLCAnYmFzZTY0Jyk7XHJcbiAgZW5jcnlwdGVkICs9IGNpcGhlci5maW5hbCgnYmFzZTY0Jyk7XHJcbiAgXHJcbiAgcmV0dXJuIGl2LnRvU3RyaW5nKCdoZXgnKSArICc6JyArIGVuY3J5cHRlZDtcclxufTtcclxuXHJcbi8vIENvbnRyb2xsZXIgRnVuY3Rpb25zXHJcbmV4cG9ydCBjb25zdCBzZWFyY2hRdWVzdGlvbnMgPSBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICBjb25zdCB7IHNlYXJjaCB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHF1ZXN0aW9uTW9kZWwuc2VhcmNoUXVlc3Rpb25zQnlDb2RlT3JJZChzZWFyY2ggYXMgc3RyaW5nKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6ICdRdWVzdGlvbnMgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgIGRhdGE6IHJlc3VsdHMsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0QWxsUXVlc3Rpb25zID0gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHF1ZXN0aW9ucyA9IGF3YWl0IHF1ZXN0aW9uTW9kZWwuZ2V0QWxsUXVlc3Rpb25zKCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihxdWVzdGlvbnMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBxdWVzdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBxdWVzdGlvbnMnIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRQYWdlZFF1ZXN0aW9ucyA9IGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBmaWx0ZXJzID0ge1xyXG4gICAgICBwYWdlOiBwYXJzZUludChyZXEucXVlcnkucGFnZSBhcyBzdHJpbmcpIHx8IDEsXHJcbiAgICAgIGxpbWl0OiBwYXJzZUludChyZXEucXVlcnkubGltaXQgYXMgc3RyaW5nKSB8fCA1MCxcclxuICAgICAgc2VhcmNoOiByZXEucXVlcnkuc2VhcmNoIGFzIHN0cmluZyB8fCAnJyxcclxuICAgICAgcXVlc3Rpb25fdHlwZTogcmVxLnF1ZXJ5LnF1ZXN0aW9uX3R5cGUgYXMgc3RyaW5nIHx8ICdBbGwnLFxyXG4gICAgICBleGFtX2lkOiByZXEucXVlcnkuZXhhbV9pZCA/IHBhcnNlSW50KHJlcS5xdWVyeS5leGFtX2lkIGFzIHN0cmluZykgOiB1bmRlZmluZWQsXHJcbiAgICAgIHRvcGljOiByZXEucXVlcnkudG9waWMgYXMgc3RyaW5nIHx8IHVuZGVmaW5lZCxcclxuICAgICAgc3VidG9waWM6IHJlcS5xdWVyeS5zdWJ0b3BpYyBhcyBzdHJpbmcgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBjcmVhdG9yOiByZXEucXVlcnkuY3JlYXRvciBhcyBzdHJpbmcgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBzdGFydF9kYXRlOiByZXEucXVlcnkuc3RhcnRfZGF0ZSBhcyBzdHJpbmcgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBlbmRfZGF0ZTogcmVxLnF1ZXJ5LmVuZF9kYXRlIGFzIHN0cmluZyB8fCB1bmRlZmluZWQsXHJcbiAgICAgIHNvcnRLZXk6IHJlcS5xdWVyeS5zb3J0S2V5IGFzIHN0cmluZyB8fCAncS5pZCcsXHJcbiAgICAgIHNvcnRPcmRlcjogcmVxLnF1ZXJ5LnNvcnRPcmRlciBhcyBzdHJpbmcgfHwgJ2FzYycsXHJcbiAgICAgIHVzZXJJZDogcmVxLnF1ZXJ5LnVzZXJJZCBhcyBzdHJpbmcgfHwgdW5kZWZpbmVkLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVzdGlvbk1vZGVsLmdldFBhZ2VkUXVlc3Rpb25zKGZpbHRlcnMpO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0UXVlc3Rpb25zIGNvbnRyb2xsZXI6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0UXVlc3Rpb25zQnlFeGFtU3RyaW5nID0gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgY29uc3QgZXhhbVN0cmluZyA9IHJlcS5xdWVyeS5leGFtX3N0cmluZyBhcyBzdHJpbmc7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBxdWVzdGlvbnMgPSBhd2FpdCBxdWVzdGlvbk1vZGVsLmdldFF1ZXN0aW9uc0J5RXhhbVN0cmluZyhleGFtU3RyaW5nKTtcclxuICAgIFxyXG4gICAgY29uc3QgZW5jcnlwdGVkUXVlc3Rpb25zID0gZW5jcnlwdERhdGEocXVlc3Rpb25zKTtcclxuICAgIFxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBlbmNyeXB0ZWREYXRhOiBlbmNyeXB0ZWRRdWVzdGlvbnMgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHF1ZXN0aW9ucyBieSBleGFtX3N0cmluZzonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHF1ZXN0aW9ucycgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldERpYWdub3N0aWNRdWVzdGlvbnNCeUV4YW1TdHJpbmcgPSBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICBjb25zdCBleGFtU3RyaW5nID0gcmVxLnF1ZXJ5LmV4YW1fc3RyaW5nIGFzIHN0cmluZztcclxuICB0cnkge1xyXG4gICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHF1ZXN0aW9uTW9kZWwuZ2V0RGlhZ25vc3RpY1F1ZXN0aW9uc0J5RXhhbVN0cmluZyhleGFtU3RyaW5nKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhwYXlsb2FkKTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZW5jcnlwdGVkRGF0YTogZW5jcnlwdERhdGEocGF5bG9hZCkgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBkaWFnbm9zdGljIHF1ZXN0aW9uczonLCBlcnIpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBkaWFnbm9zdGljIHF1ZXN0aW9ucycgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFF1ZXN0aW9uc0J5RXhhbUlkID0gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgY29uc3QgZXhhbUlkID0gcGFyc2VJbnQocmVxLnF1ZXJ5LmV4YW1pZCBhcyBzdHJpbmcpO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBxdWVzdGlvbnMgPSBhd2FpdCBxdWVzdGlvbk1vZGVsLmdldFF1ZXN0aW9uc0J5RXhhbUlkKGV4YW1JZCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihxdWVzdGlvbnMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBxdWVzdGlvbnMgYnkgZXhhbV9zdHJpbmc6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCBxdWVzdGlvbnMnIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRRdWVzdGlvbkJ5SWQgPSBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICBjb25zdCBpZCA9IHBhcnNlSW50KHJlcS5xdWVyeS5pZCBhcyBzdHJpbmcpO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBxdWVzdGlvbiA9IGF3YWl0IHF1ZXN0aW9uTW9kZWwuZ2V0UXVlc3Rpb25CeUlkKGlkKTtcclxuICAgIGlmICghcXVlc3Rpb24pIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdRdWVzdGlvbiBub3QgZm91bmQnIH0pO1xyXG4gICAgfVxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocXVlc3Rpb24pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBxdWVzdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHF1ZXN0aW9uJyB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0UXVlc3Rpb25CeVVJZCA9IGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gIGNvbnN0IGlkID0gcGFyc2VJbnQocmVxLnF1ZXJ5LmlkIGFzIHN0cmluZyk7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHF1ZXN0aW9uID0gYXdhaXQgcXVlc3Rpb25Nb2RlbC5nZXRRdWVzdGlvbkJ5VUlkKGlkKTtcclxuICAgIGlmICghcXVlc3Rpb24pIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdRdWVzdGlvbiBub3QgZm91bmQnIH0pO1xyXG4gICAgfVxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24ocXVlc3Rpb24pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBxdWVzdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHF1ZXN0aW9uJyB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlUXVlc3Rpb24gPSBhc3luYyAocmVxOiBBdXRoZW50aWNhdGVkUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICBhd2FpdCBpbml0aWFsaXplUXVldWUoKTtcclxuICBcclxuICBpZiAoIXF1ZXN0aW9uUXVldWUpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMykuanNvbih7IGVycm9yOiAnUXVldWUgbm90IGluaXRpYWxpemVkIHlldC4gUGxlYXNlIHRyeSBhZ2FpbiBzaG9ydGx5LicgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBxdWVzdGlvbkRhdGE6IFF1ZXN0aW9uRGF0YSA9IHJlcS5ib2R5O1xyXG4gIGNvbnN0IGNyZWF0ZV91c2VyX2lkID0gcmVxLnVzZXI/LmlkO1xyXG5cclxuICBpZiAoIWNyZWF0ZV91c2VyX2lkKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ2NyZWF0ZV91c2VyX2lkIGlzIHJlcXVpcmVkJyB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVzdGlvblF1ZXVlLmFkZCgoKSA9PlxyXG4gICAgICBoYW5kbGVTaW5nbGVRdWVzdGlvbih7IHF1ZXN0aW9uRGF0YSwgY3JlYXRlX3VzZXJfaWQgfSlcclxuICAgICk7XHJcblxyXG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24ocmVzdWx0KTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBxdWVzdGlvbiBxdWV1ZTonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBoYW5kbGVTaW5nbGVRdWVzdGlvbiA9IGFzeW5jIChcclxuICB7IHF1ZXN0aW9uRGF0YSwgY3JlYXRlX3VzZXJfaWQgfTogeyBxdWVzdGlvbkRhdGE6IFF1ZXN0aW9uRGF0YTsgY3JlYXRlX3VzZXJfaWQ6IHN0cmluZyB9XHJcbikgPT4ge1xyXG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xyXG4gIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgY29uc29sZS5sb2coJ1toYW5kbGVTaW5nbGVRdWVzdGlvbl0gU1RBUlQnLCB7IHF1ZXN0aW9uRGF0YSwgY3JlYXRlX3VzZXJfaWQgfSk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyAtLS0gQmVnaW4gdHJhbnNhY3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIGF3YWl0IGNsaWVudC5xdWVyeSgnQkVHSU4nKTtcclxuICAgIGNvbnNvbGUubG9nKCdbaGFuZGxlU2luZ2xlUXVlc3Rpb25dIEJFR0lOIHRyYW5zYWN0aW9uJyk7XHJcblxyXG4gICAgLy8gLS0tIFJlc29sdmUgc3Vi4oCRdG9waWMgbWV0YWRhdGEgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgY29uc3Qgc3VidG9waWNJZCA9IHF1ZXN0aW9uRGF0YS5leGFtX3R5cGVfaWQ7XHJcbiAgICBjb25zb2xlLmxvZygnW2hhbmRsZVNpbmdsZVF1ZXN0aW9uXSBzdWJ0b3BpY0lkOicsIHN1YnRvcGljSWQpO1xyXG5cclxuICAgIGNvbnN0IHN1YnRvcGljc0luZm8gPSBhd2FpdCBleGFtVHlwZXNNb2RlbC5nZXRTdWJ0b3BpY3NJbmZvKFtzdWJ0b3BpY0lkIV0pO1xyXG4gICAgY29uc29sZS5sb2coJ1toYW5kbGVTaW5nbGVRdWVzdGlvbl0gc3VidG9waWNzSW5mbzonLCBzdWJ0b3BpY3NJbmZvKTtcclxuXHJcbiAgICBpZiAoIXN1YnRvcGljc0luZm8ubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1toYW5kbGVTaW5nbGVRdWVzdGlvbl0gU3VidG9waWMgbm90IGZvdW5kJywgeyBzdWJ0b3BpY0lkIH0pO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFN1YnRvcGlrIGRlbmdhbiBJRCAke3N1YnRvcGljSWR9IHRpZGFrIGRpdGVtdWthbmApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgYmlkX2NvZGUsIHRvcF9jb2RlLCBzdWJfY29kZSwgbGFzdF9zZXF1ZW5jZSB9ID0gc3VidG9waWNzSW5mb1swXTtcclxuICAgIGNvbnNvbGUubG9nKCdbaGFuZGxlU2luZ2xlUXVlc3Rpb25dIHN1YnRvcGljSW5mbzonLCB7XHJcbiAgICAgIGJpZF9jb2RlLFxyXG4gICAgICB0b3BfY29kZSxcclxuICAgICAgc3ViX2NvZGUsXHJcbiAgICAgIGxhc3Rfc2VxdWVuY2VcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIC0tLSBHZW5lcmF0ZSBuZXh0IHF1ZXN0aW9uIGNvZGUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBjb25zdCBuZXh0U2VxdWVuY2UgPSBsYXN0X3NlcXVlbmNlID8gcGFyc2VJbnQobGFzdF9zZXF1ZW5jZSkgKyAxIDogMTtcclxuICAgIGNvbnN0IHNlcXVlbmNlID0gbmV4dFNlcXVlbmNlLnRvU3RyaW5nKCkucGFkU3RhcnQoNCwgJzAnKTtcclxuICAgIGNvbnN0IHF1ZXN0aW9uX2NvZGUgPSBgJHtiaWRfY29kZX0ke3RvcF9jb2RlfSR7c3ViX2NvZGV9JHtzZXF1ZW5jZX1gO1xyXG4gICAgY29uc29sZS5sb2coJ1toYW5kbGVTaW5nbGVRdWVzdGlvbl0gR2VuZXJhdGVkIHF1ZXN0aW9uX2NvZGU6JywgcXVlc3Rpb25fY29kZSk7XHJcblxyXG4gICAgLy8gLS0tIFByZXBhcmUgcGF5bG9hZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBjb25zdCBxdWVzdGlvbldpdGhDb2RlID0ge1xyXG4gICAgICAuLi5xdWVzdGlvbkRhdGEsXHJcbiAgICAgIGNvZGU6cXVlc3Rpb25fY29kZSxcclxuICAgICAgcGFzc2FnZV9pZDogcXVlc3Rpb25EYXRhLnBhc3NhZ2VfaWQgfHwgbnVsbFxyXG4gICAgfTtcclxuICAgIGNvbnNvbGUubG9nKCdbaGFuZGxlU2luZ2xlUXVlc3Rpb25dIHF1ZXN0aW9uV2l0aENvZGU6JywgcXVlc3Rpb25XaXRoQ29kZSk7XHJcblxyXG4gICAgLy8gLS0tIFBlcnNpc3QgcXVlc3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBjb25zdCBzYXZlZFF1ZXN0aW9uID0gYXdhaXQgcXVlc3Rpb25Nb2RlbC5jcmVhdGVRdWVzdGlvbihcclxuICAgICAgcXVlc3Rpb25XaXRoQ29kZSxcclxuICAgICAgY3JlYXRlX3VzZXJfaWRcclxuICAgICk7XHJcbiAgICBjb25zb2xlLmxvZygnW2hhbmRsZVNpbmdsZVF1ZXN0aW9uXSBzYXZlZFF1ZXN0aW9uOicsIHNhdmVkUXVlc3Rpb24pO1xyXG5cclxuICAgIC8vIC0tLSBDb21taXQgdHJhbnNhY3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KCdDT01NSVQnKTtcclxuICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAnW2hhbmRsZVNpbmdsZVF1ZXN0aW9uXSBDT01NSVQgdHJhbnNhY3Rpb24gKGVsYXBzZWQgJWRtcyknLFxyXG4gICAgICBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBzYXZlZFF1ZXN0aW9uO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoJ1JPTExCQUNLJyk7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbaGFuZGxlU2luZ2xlUXVlc3Rpb25dIFJPTExCQUNLIHRyYW5zYWN0aW9uIGR1ZSB0byBlcnJvcicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICBjbGllbnQucmVsZWFzZSgpO1xyXG4gICAgY29uc29sZS5sb2coXHJcbiAgICAgICdbaGFuZGxlU2luZ2xlUXVlc3Rpb25dIGNsaWVudCByZWxlYXNlZCAodG90YWwgJWRtcyknLFxyXG4gICAgICBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXHJcbiAgICApO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlQnVsa1F1ZXN0aW9ucyA9IGFzeW5jIChyZXE6IEF1dGhlbnRpY2F0ZWRSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gIGF3YWl0IGluaXRpYWxpemVRdWV1ZSgpO1xyXG4gIFxyXG4gIGlmICghcXVlc3Rpb25RdWV1ZSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAzKS5qc29uKHsgZXJyb3I6ICdRdWV1ZSBub3QgaW5pdGlhbGl6ZWQgeWV0LiBQbGVhc2UgdHJ5IGFnYWluIHNob3J0bHkuJyB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgcXVlc3Rpb25zIH06IEJ1bGtRdWVzdGlvblJlcXVlc3QgPSByZXEuYm9keTtcclxuICBjb25zdCBjcmVhdGVfdXNlcl9pZCA9IHJlcS51c2VyPy5pZDtcclxuXHJcbiAgaWYgKCFxdWVzdGlvbnMgfHwgIUFycmF5LmlzQXJyYXkocXVlc3Rpb25zKSB8fCBxdWVzdGlvbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ05vIHF1ZXN0aW9ucyBwcm92aWRlZCcgfSk7XHJcbiAgfVxyXG5cclxuICBpZiAoIWNyZWF0ZV91c2VyX2lkKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ2NyZWF0ZV91c2VyX2lkIGlzIHJlcXVpcmVkJyB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVzdGlvblF1ZXVlLmFkZCgoKSA9PlxyXG4gICAgICBoYW5kbGVCdWxrUXVlc3Rpb25zKHsgcXVlc3Rpb25zLCBjcmVhdGVfdXNlcl9pZCB9KVxyXG4gICAgKTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbihyZXN1bHQpO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGJ1bGsgcXVldWU6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVCdWxrUXVlc3Rpb25zID0gYXN5bmMgKHsgcXVlc3Rpb25zLCBjcmVhdGVfdXNlcl9pZCB9OiB7IHF1ZXN0aW9uczogUXVlc3Rpb25EYXRhW107IGNyZWF0ZV91c2VyX2lkOiBzdHJpbmcgfSkgPT4ge1xyXG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xyXG5cclxuICB0cnkge1xyXG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KCdCRUdJTicpO1xyXG5cclxuICAgIGNvbnN0IHN1YnRvcGljTWFwID0gbmV3IE1hcDxudW1iZXIsIFF1ZXN0aW9uRGF0YVtdPigpO1xyXG4gICAgXHJcbiAgICBxdWVzdGlvbnMuZm9yRWFjaChxID0+IHtcclxuICAgICAgY29uc3Qgc3VidG9waWNJZCA9IHEuZXhhbV90eXBlX2lkITtcclxuICAgICAgaWYgKCFzdWJ0b3BpY01hcC5oYXMoc3VidG9waWNJZCkpIHtcclxuICAgICAgICBzdWJ0b3BpY01hcC5zZXQoc3VidG9waWNJZCwgW10pO1xyXG4gICAgICB9XHJcbiAgICAgIHN1YnRvcGljTWFwLmdldChzdWJ0b3BpY0lkKSEucHVzaChxKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHN1YnRvcGljSWRzID0gWy4uLnN1YnRvcGljTWFwLmtleXMoKV07XHJcbiAgICBjb25zdCBzdWJ0b3BpY3NJbmZvID0gYXdhaXQgZXhhbVR5cGVzTW9kZWwuZ2V0U3VidG9waWNzSW5mbyhzdWJ0b3BpY0lkcyk7XHJcblxyXG4gICAgY29uc3QgcXVlc3Rpb25zV2l0aENvZGVzOiBhbnlbXSA9IFtdO1xyXG4gICAgY29uc3QgY29kZUNvdW50ZXJzID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj4oKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHsgaWQsIGxhc3Rfc2VxdWVuY2UgfSBvZiBzdWJ0b3BpY3NJbmZvKSB7XHJcbiAgICAgIGNvZGVDb3VudGVycy5zZXQoaWQsIGxhc3Rfc2VxdWVuY2UgPyBwYXJzZUludChsYXN0X3NlcXVlbmNlKSArIDEgOiAxKTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGNvbnN0IFtzdWJ0b3BpY0lkLCBxdWVzdGlvbkdyb3VwXSBvZiBzdWJ0b3BpY01hcCkge1xyXG4gICAgICBjb25zdCBzdWJ0b3BpY0luZm8gPSBzdWJ0b3BpY3NJbmZvLmZpbmQoaW5mbyA9PiBpbmZvLmlkID09PSBzdWJ0b3BpY0lkKTtcclxuICAgICAgaWYgKCFzdWJ0b3BpY0luZm8pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFN1YnRvcGlrIGRlbmdhbiBJRCAke3N1YnRvcGljSWR9IHRpZGFrIGRpdGVtdWthbmApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB7IGJpZF9jb2RlLCB0b3BfY29kZSwgc3ViX2NvZGUgfSA9IHN1YnRvcGljSW5mbztcclxuICAgICAgbGV0IGNvdW50ZXIgPSBjb2RlQ291bnRlcnMuZ2V0KHN1YnRvcGljSWQpITtcclxuXHJcbiAgICAgIGZvciAoY29uc3QgcXVlc3Rpb24gb2YgcXVlc3Rpb25Hcm91cCkge1xyXG4gICAgICAgIGNvbnN0IHNlcXVlbmNlID0gY291bnRlci50b1N0cmluZygpLnBhZFN0YXJ0KDQsICcwJyk7XHJcbiAgICAgICAgY29uc3QgcXVlc3Rpb25fY29kZSA9IGAke2JpZF9jb2RlfSR7dG9wX2NvZGV9JHtzdWJfY29kZX0ke3NlcXVlbmNlfWA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcXVlc3Rpb25zV2l0aENvZGVzLnB1c2goe1xyXG4gICAgICAgICAgLi4ucXVlc3Rpb24sXHJcbiAgICAgICAgICBxdWVzdGlvbl9jb2RlLFxyXG4gICAgICAgICAgcGFzc2FnZV9pZDogcXVlc3Rpb24ucGFzc2FnZV9pZCB8fCBudWxsLFxyXG4gICAgICAgICAgY3JlYXRlX3VzZXJfaWRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY291bnRlcisrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb2RlQ291bnRlcnMuc2V0KHN1YnRvcGljSWQsIGNvdW50ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNhdmVkUXVlc3Rpb25zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IHEgb2YgcXVlc3Rpb25zV2l0aENvZGVzKSB7XHJcbiAgICAgIGNvbnN0IHNhdmVkUXVlc3Rpb24gPSBhd2FpdCBxdWVzdGlvbk1vZGVsLmNyZWF0ZVF1ZXN0aW9uKHEsIGNyZWF0ZV91c2VyX2lkKTtcclxuICAgICAgc2F2ZWRRdWVzdGlvbnMucHVzaChzYXZlZFF1ZXN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoJ0NPTU1JVCcpO1xyXG4gICAgcmV0dXJuIHNhdmVkUXVlc3Rpb25zO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoJ1JPTExCQUNLJyk7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgY2xpZW50LnJlbGVhc2UoKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdXBkYXRlUXVlc3Rpb24gPSBhc3luYyAocmVxOiBBdXRoZW50aWNhdGVkUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICBjb25zdCBxdWVzdGlvbklkID0gcGFyc2VJbnQocmVxLnF1ZXJ5LmlkIGFzIHN0cmluZyk7XHJcbiAgY29uc3QgcXVlc3Rpb25EYXRhOiBRdWVzdGlvbkRhdGEgPSByZXEuYm9keTtcclxuICBcclxuICBjb25zdCBlZGl0X3VzZXJfaWQgPSByZXEudXNlcj8uaWQ7XHJcbiAgaWYgKCFlZGl0X3VzZXJfaWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnZWRpdF91c2VyX2lkIGlzIHJlcXVpcmVkJyB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1cGRhdGVkUXVlc3Rpb24gPSBhd2FpdCBxdWVzdGlvbk1vZGVsLnVwZGF0ZVF1ZXN0aW9uKHF1ZXN0aW9uSWQsIHF1ZXN0aW9uRGF0YSwgZWRpdF91c2VyX2lkKTtcclxuICAgIGlmICghdXBkYXRlZFF1ZXN0aW9uKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnUXVlc3Rpb24gbm90IGZvdW5kJyB9KTtcclxuICAgIH1cclxuICAgIHJlcy5qc29uKHVwZGF0ZWRRdWVzdGlvbik7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHF1ZXN0aW9uOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gdXBkYXRlIHF1ZXN0aW9uJyB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdXBkYXRlQnVsa1F1ZXN0aW9ucyA9IGFzeW5jIChyZXE6IEF1dGhlbnRpY2F0ZWRSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gIGNvbnN0IHsgcXVlc3Rpb25zIH06IEJ1bGtRdWVzdGlvblJlcXVlc3QgPSByZXEuYm9keTtcclxuICBjb25zdCBlZGl0X3VzZXJfaWQgPSByZXEudXNlcj8uaWQ7XHJcblxyXG4gIGlmICghQXJyYXkuaXNBcnJheShxdWVzdGlvbnMpIHx8IHF1ZXN0aW9ucy5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUXVlc3Rpb25zIGFycmF5IGlzIHJlcXVpcmVkIGFuZCBtdXN0IG5vdCBiZSBlbXB0eScgfSk7XHJcbiAgfVxyXG5cclxuICBpZiAoIWVkaXRfdXNlcl9pZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdlZGl0X3VzZXJfaWQgaXMgcmVxdWlyZWQnIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbWlzc2luZ0lkcyA9IHF1ZXN0aW9ucy5zb21lKHEgPT4gIShxIGFzIGFueSkuaWQpO1xyXG4gIGlmIChtaXNzaW5nSWRzKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0FsbCBxdWVzdGlvbnMgbXVzdCBoYXZlIGFuIElEIGZvciBidWxrIHVwZGF0ZScgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgdXBkYXRlZFF1ZXN0aW9ucyA9IGF3YWl0IHF1ZXN0aW9uTW9kZWwudXBkYXRlQnVsa1F1ZXN0aW9ucyhxdWVzdGlvbnMsIGVkaXRfdXNlcl9pZCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih1cGRhdGVkUXVlc3Rpb25zKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgYnVsayBxdWVzdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgcXVlc3Rpb25zIGluIGJ1bGsnIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBhcHBlbmRFeGFtSWQgPSBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICBjb25zdCB7IHF1ZXN0aW9uSWQsIGV4YW1JZCB9OiBBcHBlbmRFeGFtSWRSZXF1ZXN0ID0gcmVxLmJvZHk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBpZiAoIXF1ZXN0aW9uSWQgfHwgIWV4YW1JZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ3F1ZXN0aW9uSWQgYW5kIGV4YW1JZCBhcmUgcmVxdWlyZWQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXN0aW9uTW9kZWwuYXBwZW5kRXhhbUlkVG9RdWVzdGlvbihxdWVzdGlvbklkLCBleGFtSWQpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ0V4YW0gSUQgYXBwZW5kZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgZGF0YTogcmVzdWx0LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlbGV0ZVF1ZXN0aW9uID0gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgY29uc3QgcXVlc3Rpb25JZCA9IHBhcnNlSW50KHJlcS5xdWVyeS5pZCBhcyBzdHJpbmcpO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZGVsZXRlZFF1ZXN0aW9uID0gYXdhaXQgcXVlc3Rpb25Nb2RlbC5kZWxldGVRdWVzdGlvbihxdWVzdGlvbklkKTtcclxuICAgIGlmICghZGVsZXRlZFF1ZXN0aW9uKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnUXVlc3Rpb24gbm90IGZvdW5kJyB9KTtcclxuICAgIH1cclxuICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ1F1ZXN0aW9uIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JywgcXVlc3Rpb246IGRlbGV0ZWRRdWVzdGlvbiB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgcXVlc3Rpb246JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBkZWxldGUgcXVlc3Rpb24nIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFBhc3NhZ2UgQ29udHJvbGxlcnNcclxuZXhwb3J0IGNvbnN0IHNlYXJjaFBhc3NhZ2VzID0gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgY29uc3QgeyBzZWFyY2ggfSA9IHJlcS5xdWVyeTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHF1ZXN0aW9uTW9kZWwuc2VhcmNoUGFzc2FnZXMoc2VhcmNoIGFzIHN0cmluZyk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyZXN1bHRzKTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRQYXNzYWdlQnlJZCA9IGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xyXG4gIGNvbnN0IGlkID0gcGFyc2VJbnQocmVxLnF1ZXJ5LmlkIGFzIHN0cmluZyk7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBhc3NhZ2UgPSBhd2FpdCBxdWVzdGlvbk1vZGVsLmdldFBhc3NhZ2VCeUlkKGlkKTtcclxuICAgIGlmICghcGFzc2FnZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1Bhc3NhZ2Ugbm90IGZvdW5kJyB9KTtcclxuICAgIH1cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHBhc3NhZ2UpO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBhc3NhZ2UgPSBhc3luYyAocmVxOiBBdXRoZW50aWNhdGVkUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICBjb25zdCB7IHRpdGxlLCBwYXNzYWdlIH0gPSByZXEuYm9keTtcclxuICBjb25zdCBjcmVhdGVfdXNlcl9pZCA9IHJlcS51c2VyPy5pZDtcclxuXHJcbiAgaWYgKCF0aXRsZSB8fCAhcGFzc2FnZSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdUaXRsZSBhbmQgcGFzc2FnZSBhcmUgcmVxdWlyZWQnIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKCFjcmVhdGVfdXNlcl9pZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdjcmVhdGVfdXNlcl9pZCBpcyByZXF1aXJlZCcgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgbmV3UGFzc2FnZSA9IGF3YWl0IHF1ZXN0aW9uTW9kZWwuY3JlYXRlUGFzc2FnZSh7IHRpdGxlLCBwYXNzYWdlIH0sIGNyZWF0ZV91c2VyX2lkKTtcclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKG5ld1Bhc3NhZ2UpO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHVwZGF0ZVBhc3NhZ2UgPSBhc3luYyAocmVxOiBBdXRoZW50aWNhdGVkUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICBjb25zdCBwYXNzYWdlSWQgPSBwYXJzZUludChyZXEucXVlcnkuaWQgYXMgc3RyaW5nKTtcclxuICBjb25zdCB7IHRpdGxlLCBwYXNzYWdlIH0gPSByZXEuYm9keTtcclxuICBjb25zdCB1cGRhdGVfdXNlcl9pZCA9IHJlcS51c2VyPy5pZDtcclxuXHJcbiAgaWYgKCF0aXRsZSB8fCAhcGFzc2FnZSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdUaXRsZSBhbmQgcGFzc2FnZSBhcmUgcmVxdWlyZWQnIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKCF1cGRhdGVfdXNlcl9pZCkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICd1cGRhdGVfdXNlcl9pZCBpcyByZXF1aXJlZCcgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgdXBkYXRlZFBhc3NhZ2UgPSBhd2FpdCBxdWVzdGlvbk1vZGVsLnVwZGF0ZVBhc3NhZ2UocGFzc2FnZUlkLCB7IHRpdGxlLCBwYXNzYWdlIH0sIHVwZGF0ZV91c2VyX2lkKTtcclxuICAgIGlmICghdXBkYXRlZFBhc3NhZ2UpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdQYXNzYWdlIG5vdCBmb3VuZCcgfSk7XHJcbiAgICB9XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih1cGRhdGVkUGFzc2FnZSk7XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdmVyaWZ5Q3N2ID0gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBheWxvYWQgPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocGF5bG9hZCkgfHwgcGF5bG9hZC5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXHJcbiAgICAgICAgZXJyb3I6ICdQYXlsb2FkIGhhcnVzIGJlcnVwYSBhcnJheSBkYW4gdGlkYWsgYm9sZWgga29zb25nJyxcclxuICAgICAgICBleGFtcGxlOiBbe1wiaWRcIjpcIjE5NFwiLFwiY29kZVwiOlwiTE9HRlJQUjAxNTJcIn0se1wiaWRcIjpcIjE5NVwiLFwiY29kZVwiOlwiTE9HRlJQUjAxNTNcIn1dXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGludmFsaWRJdGVtcyA9IHBheWxvYWQuZmlsdGVyKGl0ZW0gPT4gXHJcbiAgICAgICFpdGVtLmlkIHx8ICFpdGVtLmNvZGUgfHwgXHJcbiAgICAgIHR5cGVvZiBpdGVtLmlkICE9PSAnc3RyaW5nJyB8fCBcclxuICAgICAgdHlwZW9mIGl0ZW0uY29kZSAhPT0gJ3N0cmluZydcclxuICAgICk7XHJcblxyXG4gICAgaWYgKGludmFsaWRJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxyXG4gICAgICAgIGVycm9yOiAnU2V0aWFwIGl0ZW0gaGFydXMgbWVtaWxpa2kgcHJvcGVydHkgaWQgZGFuIGNvZGUgeWFuZyB2YWxpZCcsXHJcbiAgICAgICAgaW52YWxpZEl0ZW1zOiBpbnZhbGlkSXRlbXMsXHJcbiAgICAgICAgZXhhbXBsZToge1wiaWRcIjpcIjE5NFwiLFwiY29kZVwiOlwiTE9HRlJQUjAxNTJcIn1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uUmVzdWx0ID0gYXdhaXQgcXVlc3Rpb25Nb2RlbC52ZXJpZnlJZENvZGVQYWlycyhwYXlsb2FkKTtcclxuXHJcbiAgICBjb25zdCBtYXRjaGVkUGFpcnMgPSB2ZXJpZmljYXRpb25SZXN1bHQucmVzdWx0cy5maWx0ZXIociA9PiByLmlzX21hdGNoKTtcclxuICAgIGNvbnN0IG5vdEZvdW5kSWRzID0gdmVyaWZpY2F0aW9uUmVzdWx0LnJlc3VsdHMuZmlsdGVyKHIgPT4gci5zdGF0dXMgPT09ICdpZF9ub3RfZm91bmQnKTtcclxuICAgIGNvbnN0IG1pc21hdGNoZWRDb2RlcyA9IHZlcmlmaWNhdGlvblJlc3VsdC5yZXN1bHRzLmZpbHRlcihyID0+IHIuc3RhdHVzID09PSAnY29kZV9taXNtYXRjaCcpO1xyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0ge1xyXG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcclxuICAgICAgbWVzc2FnZTogJ1ZlcmlmaWthc2kgcGFzYW5nYW4gSUQtQ29kZSBiZXJoYXNpbCBkaWxha3VrYW4nLFxyXG4gICAgICBzdW1tYXJ5OiB2ZXJpZmljYXRpb25SZXN1bHQuc3VtbWFyeSxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIG1hdGNoZWRfcGFpcnM6IG1hdGNoZWRQYWlycyxcclxuICAgICAgICBpZF9ub3RfZm91bmQ6IG5vdEZvdW5kSWRzLFxyXG4gICAgICAgIGNvZGVfbWlzbWF0Y2hlZDogbWlzbWF0Y2hlZENvZGVzXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgaWYgKHZlcmlmaWNhdGlvblJlc3VsdC5zdW1tYXJ5Lm1hdGNoZWQgPT09IHZlcmlmaWNhdGlvblJlc3VsdC5zdW1tYXJ5LnRvdGFsKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3BvbnNlKTtcclxuICAgIH0gZWxzZSBpZiAodmVyaWZpY2F0aW9uUmVzdWx0LnN1bW1hcnkubWF0Y2hlZCA9PT0gMCkge1xyXG4gICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgLi4ucmVzcG9uc2UsXHJcbiAgICAgICAgc3RhdHVzOiAnbm9fbWF0Y2gnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdUaWRhayBhZGEgcGFzYW5nYW4gSUQtQ29kZSB5YW5nIGNvY29rJ1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjA2KS5qc29uKHtcclxuICAgICAgICAuLi5yZXNwb25zZSxcclxuICAgICAgICBzdGF0dXM6ICdwYXJ0aWFsX21hdGNoJyxcclxuICAgICAgICBtZXNzYWdlOiAnU2ViYWdpYW4gcGFzYW5nYW4gSUQtQ29kZSBjb2Nvaywgc2ViYWdpYW4gdGlkYWsgY29jb2snXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2ZXJpZnlpbmcgQ1NWOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXHJcbiAgICAgIGVycm9yOiAnR2FnYWwgbWVsYWt1a2FuIHZlcmlmaWthc2kgQ1NWJyxcclxuICAgICAgZGV0YWlsczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBlcnJvci5tZXNzYWdlIDogdW5kZWZpbmVkXHJcbiAgICB9KTtcclxuICB9XHJcbn07Il0sIm5hbWVzIjpbInF1ZXN0aW9uTW9kZWwiLCJleGFtVHlwZXNNb2RlbCIsImNyeXB0byIsInBvb2wiLCJxdWVzdGlvblF1ZXVlIiwiaW5pdGlhbGl6ZVF1ZXVlIiwiUFF1ZXVlIiwiZGVmYXVsdCIsImNvbmN1cnJlbmN5IiwiZXJyb3IiLCJjb25zb2xlIiwiZW5jcnlwdERhdGEiLCJkYXRhIiwiYWxnb3JpdGhtIiwia2V5IiwiQnVmZmVyIiwiZnJvbSIsInByb2Nlc3MiLCJlbnYiLCJFWEFNX0VOQ1JZUFRJT05fS0VZIiwiaXYiLCJyYW5kb21CeXRlcyIsImNpcGhlciIsImNyZWF0ZUNpcGhlcml2Iiwic2xpY2UiLCJlbmNyeXB0ZWQiLCJ1cGRhdGUiLCJKU09OIiwic3RyaW5naWZ5IiwiZmluYWwiLCJ0b1N0cmluZyIsInNlYXJjaFF1ZXN0aW9ucyIsInJlcSIsInJlcyIsInNlYXJjaCIsInF1ZXJ5IiwicmVzdWx0cyIsInNlYXJjaFF1ZXN0aW9uc0J5Q29kZU9ySWQiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImdldEFsbFF1ZXN0aW9ucyIsInF1ZXN0aW9ucyIsImdldFBhZ2VkUXVlc3Rpb25zIiwiZmlsdGVycyIsInBhZ2UiLCJwYXJzZUludCIsImxpbWl0IiwicXVlc3Rpb25fdHlwZSIsImV4YW1faWQiLCJ1bmRlZmluZWQiLCJ0b3BpYyIsInN1YnRvcGljIiwiY3JlYXRvciIsInN0YXJ0X2RhdGUiLCJlbmRfZGF0ZSIsInNvcnRLZXkiLCJzb3J0T3JkZXIiLCJ1c2VySWQiLCJyZXN1bHQiLCJnZXRRdWVzdGlvbnNCeUV4YW1TdHJpbmciLCJleGFtU3RyaW5nIiwiZXhhbV9zdHJpbmciLCJlbmNyeXB0ZWRRdWVzdGlvbnMiLCJlbmNyeXB0ZWREYXRhIiwiZ2V0RGlhZ25vc3RpY1F1ZXN0aW9uc0J5RXhhbVN0cmluZyIsInBheWxvYWQiLCJsb2ciLCJlcnIiLCJnZXRRdWVzdGlvbnNCeUV4YW1JZCIsImV4YW1JZCIsImV4YW1pZCIsImdldFF1ZXN0aW9uQnlJZCIsImlkIiwicXVlc3Rpb24iLCJnZXRRdWVzdGlvbkJ5VUlkIiwiY3JlYXRlUXVlc3Rpb24iLCJxdWVzdGlvbkRhdGEiLCJib2R5IiwiY3JlYXRlX3VzZXJfaWQiLCJ1c2VyIiwiYWRkIiwiaGFuZGxlU2luZ2xlUXVlc3Rpb24iLCJjbGllbnQiLCJjb25uZWN0Iiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsInN1YnRvcGljSWQiLCJleGFtX3R5cGVfaWQiLCJzdWJ0b3BpY3NJbmZvIiwiZ2V0U3VidG9waWNzSW5mbyIsImxlbmd0aCIsIkVycm9yIiwiYmlkX2NvZGUiLCJ0b3BfY29kZSIsInN1Yl9jb2RlIiwibGFzdF9zZXF1ZW5jZSIsIm5leHRTZXF1ZW5jZSIsInNlcXVlbmNlIiwicGFkU3RhcnQiLCJxdWVzdGlvbl9jb2RlIiwicXVlc3Rpb25XaXRoQ29kZSIsImNvZGUiLCJwYXNzYWdlX2lkIiwic2F2ZWRRdWVzdGlvbiIsInJlbGVhc2UiLCJjcmVhdGVCdWxrUXVlc3Rpb25zIiwiQXJyYXkiLCJpc0FycmF5IiwiaGFuZGxlQnVsa1F1ZXN0aW9ucyIsInN1YnRvcGljTWFwIiwiTWFwIiwiZm9yRWFjaCIsInEiLCJoYXMiLCJzZXQiLCJnZXQiLCJwdXNoIiwic3VidG9waWNJZHMiLCJrZXlzIiwicXVlc3Rpb25zV2l0aENvZGVzIiwiY29kZUNvdW50ZXJzIiwicXVlc3Rpb25Hcm91cCIsInN1YnRvcGljSW5mbyIsImZpbmQiLCJpbmZvIiwiY291bnRlciIsInNhdmVkUXVlc3Rpb25zIiwidXBkYXRlUXVlc3Rpb24iLCJxdWVzdGlvbklkIiwiZWRpdF91c2VyX2lkIiwidXBkYXRlZFF1ZXN0aW9uIiwidXBkYXRlQnVsa1F1ZXN0aW9ucyIsIm1pc3NpbmdJZHMiLCJzb21lIiwidXBkYXRlZFF1ZXN0aW9ucyIsImFwcGVuZEV4YW1JZCIsImFwcGVuZEV4YW1JZFRvUXVlc3Rpb24iLCJkZWxldGVRdWVzdGlvbiIsImRlbGV0ZWRRdWVzdGlvbiIsInNlYXJjaFBhc3NhZ2VzIiwiZ2V0UGFzc2FnZUJ5SWQiLCJwYXNzYWdlIiwiY3JlYXRlUGFzc2FnZSIsInRpdGxlIiwibmV3UGFzc2FnZSIsInVwZGF0ZVBhc3NhZ2UiLCJwYXNzYWdlSWQiLCJ1cGRhdGVfdXNlcl9pZCIsInVwZGF0ZWRQYXNzYWdlIiwidmVyaWZ5Q3N2IiwiZXhhbXBsZSIsImludmFsaWRJdGVtcyIsImZpbHRlciIsIml0ZW0iLCJ2ZXJpZmljYXRpb25SZXN1bHQiLCJ2ZXJpZnlJZENvZGVQYWlycyIsIm1hdGNoZWRQYWlycyIsInIiLCJpc19tYXRjaCIsIm5vdEZvdW5kSWRzIiwibWlzbWF0Y2hlZENvZGVzIiwicmVzcG9uc2UiLCJzdW1tYXJ5IiwibWF0Y2hlZF9wYWlycyIsImlkX25vdF9mb3VuZCIsImNvZGVfbWlzbWF0Y2hlZCIsIm1hdGNoZWQiLCJ0b3RhbCIsImRldGFpbHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./controllers/questions.controller.ts\n");

/***/ }),

/***/ "(api-node)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// lib/db.ts\n\n\n// Read CA certificate\nconst ca = fs__WEBPACK_IMPORTED_MODULE_1__.readFileSync('./ca.pem').toString();\nconst config = {\n    host: process.env.DB_HOST,\n    user: process.env.DB_USER,\n    password: process.env.DB_PASSWORD,\n    database: process.env.DB_DATABASE,\n    port: parseInt(process.env.DB_PORT),\n    ssl: {\n        ca: ca,\n        rejectUnauthorized: false\n    }\n};\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool(config);\n// Test the database connection\npool.connect((err, client, release)=>{\n    if (err) {\n        console.error('Error acquiring client', err.stack);\n    } else {\n        console.log('Connected to the database');\n    }\n    release();\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsWUFBWTtBQUMwQjtBQUNiO0FBZXpCLHNCQUFzQjtBQUN0QixNQUFNRSxLQUFLRCw0Q0FBZSxDQUFDLFlBQVlHLFFBQVE7QUFFL0MsTUFBTUMsU0FBeUI7SUFDN0JDLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsT0FBTztJQUN6QkMsTUFBTUgsUUFBUUMsR0FBRyxDQUFDRyxPQUFPO0lBQ3pCQyxVQUFVTCxRQUFRQyxHQUFHLENBQUNLLFdBQVc7SUFDakNDLFVBQVVQLFFBQVFDLEdBQUcsQ0FBQ08sV0FBVztJQUNqQ0MsTUFBTUMsU0FBU1YsUUFBUUMsR0FBRyxDQUFDVSxPQUFPO0lBQ2xDQyxLQUFLO1FBQ0hqQixJQUFJQTtRQUNKa0Isb0JBQW9CO0lBQ3RCO0FBQ0Y7QUFFQSxNQUFNQyxPQUFPLElBQUlyQixvQ0FBSUEsQ0FBQ0s7QUFFdEIsK0JBQStCO0FBQy9CZ0IsS0FBS0MsT0FBTyxDQUFDLENBQUNDLEtBQXdCQyxRQUFnQ0M7SUFDcEUsSUFBSUYsS0FBSztRQUNQRyxRQUFRQyxLQUFLLENBQUMsMEJBQTBCSixJQUFJSyxLQUFLO0lBQ25ELE9BQU87UUFDTEYsUUFBUUcsR0FBRyxDQUFDO0lBQ2Q7SUFDQUo7QUFDRjtBQUVBLGlFQUFlSixJQUFJQSxFQUFDIiwic291cmNlcyI6WyJEOlxcTGF0aWhhblxcTmV3IGZvbGRlciAoMilcXEZFXFwxXFxGRVxcTmV4dFxcZnV0dXJlZHVcXGxpYlxcZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL2RiLnRzXHJcbmltcG9ydCB7IFBvb2wsIFBvb2xDbGllbnQgfSBmcm9tICdwZyc7XHJcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcclxuXHJcbi8vIFR5cGVzXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGF0YWJhc2VDb25maWcge1xyXG4gIGhvc3Q6IHN0cmluZztcclxuICB1c2VyOiBzdHJpbmc7XHJcbiAgcGFzc3dvcmQ6IHN0cmluZztcclxuICBkYXRhYmFzZTogc3RyaW5nO1xyXG4gIHBvcnQ6IG51bWJlcjtcclxuICBzc2w6IHtcclxuICAgIGNhOiBzdHJpbmc7XHJcbiAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGJvb2xlYW47XHJcbiAgfTtcclxufVxyXG5cclxuLy8gUmVhZCBDQSBjZXJ0aWZpY2F0ZVxyXG5jb25zdCBjYSA9IGZzLnJlYWRGaWxlU3luYygnLi9jYS5wZW0nKS50b1N0cmluZygpO1xyXG5cclxuY29uc3QgY29uZmlnOiBEYXRhYmFzZUNvbmZpZyA9IHtcclxuICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NUISxcclxuICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSISxcclxuICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQhLFxyXG4gIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9EQVRBQkFTRSEsXHJcbiAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfUE9SVCEpLFxyXG4gIHNzbDoge1xyXG4gICAgY2E6IGNhLFxyXG4gICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHBvb2wgPSBuZXcgUG9vbChjb25maWcpO1xyXG5cclxuLy8gVGVzdCB0aGUgZGF0YWJhc2UgY29ubmVjdGlvblxyXG5wb29sLmNvbm5lY3QoKGVycjogRXJyb3IgfCB1bmRlZmluZWQsIGNsaWVudDogUG9vbENsaWVudCB8IHVuZGVmaW5lZCwgcmVsZWFzZTogKCkgPT4gdm9pZCkgPT4ge1xyXG4gIGlmIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFjcXVpcmluZyBjbGllbnQnLCBlcnIuc3RhY2spO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIHRoZSBkYXRhYmFzZScpO1xyXG4gIH1cclxuICByZWxlYXNlKCk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcG9vbDsiXSwibmFtZXMiOlsiUG9vbCIsImZzIiwiY2EiLCJyZWFkRmlsZVN5bmMiLCJ0b1N0cmluZyIsImNvbmZpZyIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRhdGFiYXNlIiwiREJfREFUQUJBU0UiLCJwb3J0IiwicGFyc2VJbnQiLCJEQl9QT1JUIiwic3NsIiwicmVqZWN0VW5hdXRob3JpemVkIiwicG9vbCIsImNvbm5lY3QiLCJlcnIiLCJjbGllbnQiLCJyZWxlYXNlIiwiY29uc29sZSIsImVycm9yIiwic3RhY2siLCJsb2ciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/db.ts\n");

/***/ }),

/***/ "(api-node)/./lib/middleware/auth.ts":
/*!********************************!*\
  !*** ./lib/middleware/auth.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateJWT: () => (/* binding */ authenticateJWT),\n/* harmony export */   authenticateRole: () => (/* binding */ authenticateRole),\n/* harmony export */   optionalAuthenticateJWT: () => (/* binding */ optionalAuthenticateJWT),\n/* harmony export */   runMiddleware: () => (/* binding */ runMiddleware)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n// lib/middleware/auth.ts\n\nconst secretKey = process.env.JWT_SECRET_KEY;\n// JWT Authentication Middleware\nconst authenticateJWT = (req, res, next)=>{\n    let token = req.cookies.authToken || req.headers['authorization'];\n    if (token) {\n        if (token.startsWith('Bearer ')) {\n            token = token.slice(7, token.length);\n        }\n        jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, secretKey, (err, user)=>{\n            console.log('Verifying token...');\n            if (err) {\n                console.error('JWT Verification Error:', err);\n                return res.status(403).json({\n                    message: 'Forbidden'\n                });\n            }\n            req.user = user;\n            next();\n        });\n    } else {\n        res.status(401).json({\n            message: 'Unauthorized'\n        });\n    }\n};\n// Optional JWT Authentication Middleware\nconst optionalAuthenticateJWT = (req, res, next)=>{\n    let token = req.cookies.authToken || req.headers['authorization'];\n    if (token) {\n        if (token.startsWith('Bearer ')) {\n            token = token.slice(7);\n        }\n        jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, secretKey, (err, user)=>{\n            if (!err) {\n                req.user = user;\n            }\n            next();\n        });\n    } else {\n        next();\n    }\n};\n// Role-based Authentication Middleware\nconst authenticateRole = (roles)=>{\n    return (req, res, next)=>{\n        if (req.user && roles.includes(req.user.role)) {\n            next();\n        } else {\n            res.status(403).json({\n                message: 'Access denied'\n            });\n        }\n    };\n};\n// Middleware Runner - untuk menjalankan multiple middleware\nconst runMiddleware = (req, res, fn)=>{\n    return new Promise((resolve, reject)=>{\n        fn(req, res, (result)=>{\n            if (result instanceof Error) {\n                return reject(result);\n            }\n            return resolve(result);\n        });\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9taWRkbGV3YXJlL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEseUJBQXlCO0FBQ007QUF1Qi9CLE1BQU1DLFlBQVlDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztBQUU1QyxnQ0FBZ0M7QUFDekIsTUFBTUMsa0JBQXNDLENBQUNDLEtBQUtDLEtBQUtDO0lBQzVELElBQUlDLFFBQVFILElBQUlJLE9BQU8sQ0FBQ0MsU0FBUyxJQUFJTCxJQUFJTSxPQUFPLENBQUMsZ0JBQWdCO0lBRWpFLElBQUlILE9BQU87UUFDVCxJQUFJQSxNQUFNSSxVQUFVLENBQUMsWUFBWTtZQUMvQkosUUFBUUEsTUFBTUssS0FBSyxDQUFDLEdBQUdMLE1BQU1NLE1BQU07UUFDckM7UUFFQWYsMERBQVUsQ0FBQ1MsT0FBT1IsV0FBVyxDQUFDZ0IsS0FBVUM7WUFDdENDLFFBQVFDLEdBQUcsQ0FBQztZQUNaLElBQUlILEtBQUs7Z0JBQ1BFLFFBQVFFLEtBQUssQ0FBQywyQkFBMkJKO2dCQUN6QyxPQUFPVixJQUFJZSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUFFQyxTQUFTO2dCQUFZO1lBQ3JEO1lBQ0FsQixJQUFJWSxJQUFJLEdBQUdBO1lBQ1hWO1FBQ0Y7SUFDRixPQUFPO1FBQ0xELElBQUllLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUFlO0lBQ2pEO0FBQ0YsRUFBRTtBQUVGLHlDQUF5QztBQUNsQyxNQUFNQywwQkFBOEMsQ0FBQ25CLEtBQUtDLEtBQUtDO0lBQ3BFLElBQUlDLFFBQVFILElBQUlJLE9BQU8sQ0FBQ0MsU0FBUyxJQUFJTCxJQUFJTSxPQUFPLENBQUMsZ0JBQWdCO0lBRWpFLElBQUlILE9BQU87UUFDVCxJQUFJQSxNQUFNSSxVQUFVLENBQUMsWUFBWTtZQUMvQkosUUFBUUEsTUFBTUssS0FBSyxDQUFDO1FBQ3RCO1FBRUFkLDBEQUFVLENBQUNTLE9BQU9SLFdBQVcsQ0FBQ2dCLEtBQVVDO1lBQ3RDLElBQUksQ0FBQ0QsS0FBSztnQkFDUlgsSUFBSVksSUFBSSxHQUFHQTtZQUNiO1lBQ0FWO1FBQ0Y7SUFDRixPQUFPO1FBQ0xBO0lBQ0Y7QUFDRixFQUFFO0FBRUYsdUNBQXVDO0FBQ2hDLE1BQU1rQixtQkFBbUIsQ0FBQ0M7SUFDL0IsT0FBTyxDQUFDckIsS0FBS0MsS0FBS0M7UUFDaEIsSUFBSUYsSUFBSVksSUFBSSxJQUFJUyxNQUFNQyxRQUFRLENBQUN0QixJQUFJWSxJQUFJLENBQUNXLElBQUksR0FBRztZQUM3Q3JCO1FBQ0YsT0FBTztZQUNMRCxJQUFJZSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxTQUFTO1lBQWdCO1FBQ2xEO0lBQ0Y7QUFDRixFQUFFO0FBRUYsNERBQTREO0FBQ3JELE1BQU1NLGdCQUFnQixDQUMzQnhCLEtBQ0FDLEtBQ0F3QjtJQUVBLE9BQU8sSUFBSUMsUUFBUSxDQUFDQyxTQUFTQztRQUMzQkgsR0FBR3pCLEtBQUtDLEtBQUssQ0FBQzRCO1lBQ1osSUFBSUEsa0JBQWtCQyxPQUFPO2dCQUMzQixPQUFPRixPQUFPQztZQUNoQjtZQUNBLE9BQU9GLFFBQVFFO1FBQ2pCO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJEOlxcTGF0aWhhblxcTmV3IGZvbGRlciAoMilcXEZFXFwxXFxGRVxcTmV4dFxcZnV0dXJlZHVcXGxpYlxcbWlkZGxld2FyZVxcYXV0aC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvbWlkZGxld2FyZS9hdXRoLnRzXHJcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcclxuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5cclxuLy8gVHlwZXNcclxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgcm9sZTogc3RyaW5nO1xyXG4gIFtrZXk6IHN0cmluZ106IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBdXRoZW50aWNhdGVkUmVxdWVzdCBleHRlbmRzIE5leHRBcGlSZXF1ZXN0IHtcclxuICB1c2VyPzogVXNlcjtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTmV4dEhhbmRsZXIgPSAoKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcclxuXHJcbmV4cG9ydCB0eXBlIE1pZGRsZXdhcmVGdW5jdGlvbiA9IChcclxuICByZXE6IEF1dGhlbnRpY2F0ZWRSZXF1ZXN0LFxyXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlLFxyXG4gIG5leHQ6IE5leHRIYW5kbGVyXHJcbikgPT4gdm9pZCB8IFByb21pc2U8dm9pZD47XHJcblxyXG5jb25zdCBzZWNyZXRLZXkgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUX0tFWSE7XHJcblxyXG4vLyBKV1QgQXV0aGVudGljYXRpb24gTWlkZGxld2FyZVxyXG5leHBvcnQgY29uc3QgYXV0aGVudGljYXRlSldUOiBNaWRkbGV3YXJlRnVuY3Rpb24gPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICBsZXQgdG9rZW4gPSByZXEuY29va2llcy5hdXRoVG9rZW4gfHwgcmVxLmhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXSBhcyBzdHJpbmc7XHJcblxyXG4gIGlmICh0b2tlbikge1xyXG4gICAgaWYgKHRva2VuLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xyXG4gICAgICB0b2tlbiA9IHRva2VuLnNsaWNlKDcsIHRva2VuLmxlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgand0LnZlcmlmeSh0b2tlbiwgc2VjcmV0S2V5LCAoZXJyOiBhbnksIHVzZXI6IGFueSkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnVmVyaWZ5aW5nIHRva2VuLi4uJyk7XHJcbiAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdKV1QgVmVyaWZpY2F0aW9uIEVycm9yOicsIGVycik7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ0ZvcmJpZGRlbicgfSk7XHJcbiAgICAgIH1cclxuICAgICAgcmVxLnVzZXIgPSB1c2VyIGFzIFVzZXI7XHJcbiAgICAgIG5leHQoKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIE9wdGlvbmFsIEpXVCBBdXRoZW50aWNhdGlvbiBNaWRkbGV3YXJlXHJcbmV4cG9ydCBjb25zdCBvcHRpb25hbEF1dGhlbnRpY2F0ZUpXVDogTWlkZGxld2FyZUZ1bmN0aW9uID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgbGV0IHRva2VuID0gcmVxLmNvb2tpZXMuYXV0aFRva2VuIHx8IHJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ10gYXMgc3RyaW5nO1xyXG4gIFxyXG4gIGlmICh0b2tlbikge1xyXG4gICAgaWYgKHRva2VuLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xyXG4gICAgICB0b2tlbiA9IHRva2VuLnNsaWNlKDcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBqd3QudmVyaWZ5KHRva2VuLCBzZWNyZXRLZXksIChlcnI6IGFueSwgdXNlcjogYW55KSA9PiB7XHJcbiAgICAgIGlmICghZXJyKSB7XHJcbiAgICAgICAgcmVxLnVzZXIgPSB1c2VyIGFzIFVzZXI7XHJcbiAgICAgIH1cclxuICAgICAgbmV4dCgpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIG5leHQoKTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBSb2xlLWJhc2VkIEF1dGhlbnRpY2F0aW9uIE1pZGRsZXdhcmVcclxuZXhwb3J0IGNvbnN0IGF1dGhlbnRpY2F0ZVJvbGUgPSAocm9sZXM6IHN0cmluZ1tdKTogTWlkZGxld2FyZUZ1bmN0aW9uID0+IHtcclxuICByZXR1cm4gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgICBpZiAocmVxLnVzZXIgJiYgcm9sZXMuaW5jbHVkZXMocmVxLnVzZXIucm9sZSkpIHtcclxuICAgICAgbmV4dCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAnQWNjZXNzIGRlbmllZCcgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXHJcbi8vIE1pZGRsZXdhcmUgUnVubmVyIC0gdW50dWsgbWVuamFsYW5rYW4gbXVsdGlwbGUgbWlkZGxld2FyZVxyXG5leHBvcnQgY29uc3QgcnVuTWlkZGxld2FyZSA9IChcclxuICByZXE6IEF1dGhlbnRpY2F0ZWRSZXF1ZXN0LFxyXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlLFxyXG4gIGZuOiBNaWRkbGV3YXJlRnVuY3Rpb25cclxuKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGZuKHJlcSwgcmVzLCAocmVzdWx0OiBhbnkpID0+IHtcclxuICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlamVjdChyZXN1bHQpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufTsiXSwibmFtZXMiOlsiand0Iiwic2VjcmV0S2V5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVRfS0VZIiwiYXV0aGVudGljYXRlSldUIiwicmVxIiwicmVzIiwibmV4dCIsInRva2VuIiwiY29va2llcyIsImF1dGhUb2tlbiIsImhlYWRlcnMiLCJzdGFydHNXaXRoIiwic2xpY2UiLCJsZW5ndGgiLCJ2ZXJpZnkiLCJlcnIiLCJ1c2VyIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJvcHRpb25hbEF1dGhlbnRpY2F0ZUpXVCIsImF1dGhlbnRpY2F0ZVJvbGUiLCJyb2xlcyIsImluY2x1ZGVzIiwicm9sZSIsInJ1bk1pZGRsZXdhcmUiLCJmbiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVzdWx0IiwiRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/middleware/auth.ts\n");

/***/ }),

/***/ "(api-node)/./models/examTypes.model.ts":
/*!***********************************!*\
  !*** ./models/examTypes.model.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createExamType: () => (/* binding */ createExamType),\n/* harmony export */   deleteExamType: () => (/* binding */ deleteExamType),\n/* harmony export */   getAllExamTypes: () => (/* binding */ getAllExamTypes),\n/* harmony export */   getExamTypeById: () => (/* binding */ getExamTypeById),\n/* harmony export */   getSubtopicsInfo: () => (/* binding */ getSubtopicsInfo),\n/* harmony export */   searchExamTypes: () => (/* binding */ searchExamTypes),\n/* harmony export */   updateExamType: () => (/* binding */ updateExamType)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/db */ \"(api-node)/./lib/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_db__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_db__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// models/examTypes.model.ts\n\nconst getAllExamTypes = async (options = {})=>{\n    const { sortField = 'name', sortOrder = 'asc', page = 1, limit = 10 } = options;\n    const offset = (page - 1) * limit;\n    let query = `\n    SELECT id, name, code, COUNT(*) OVER() AS total\n    FROM exam_types\n  `;\n    const values = [];\n    const validSortFields = [\n        'id',\n        'name',\n        'code'\n    ];\n    if (validSortFields.includes(sortField.toLowerCase()) && [\n        'asc',\n        'desc'\n    ].includes(sortOrder.toLowerCase())) {\n        query += ` ORDER BY ${sortField} ${sortOrder.toUpperCase()}`;\n    } else {\n        query += ` ORDER BY name ASC`;\n    }\n    query += ` LIMIT $${values.length + 1} OFFSET $${values.length + 2}`;\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, [\n            limit,\n            offset\n        ]);\n        return {\n            examTypes: result.rows,\n            total: result.rows.length > 0 ? parseInt(result.rows[0].total) : 0\n        };\n    } catch (error) {\n        console.error('Error getting all exam types:', error);\n        throw error;\n    }\n};\nconst getExamTypeById = async (id)=>{\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('SELECT id, name, code FROM exam_types WHERE id = $1', [\n            id\n        ]);\n        return result.rows[0];\n    } catch (error) {\n        console.error('Error getting exam type by id:', error);\n        throw error;\n    }\n};\nconst createExamType = async (data)=>{\n    const { name, description, code, kind, master_id, create_user_id } = data;\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`INSERT INTO exam_types (name, description, code, kind, master_id, create_user_id, create_date)\n       VALUES ($1, $2, $3, $4, $5, $6, NOW())\n       RETURNING id, name, code`, [\n            name,\n            description,\n            code,\n            kind,\n            master_id,\n            create_user_id\n        ]);\n        return result.rows[0];\n    } catch (error) {\n        console.error('Error creating exam type:', error);\n        throw error;\n    }\n};\nconst updateExamType = async (id, data)=>{\n    const { name, description, code, kind, master_id, edit_user_id } = data;\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`UPDATE exam_types \n       SET name = $1, description = $2, code = $3, kind = $4, master_id = $5,\n           edit_user_id = $6, edit_date = NOW()\n       WHERE id = $7\n       RETURNING id, name, code`, [\n            name,\n            description,\n            code,\n            kind,\n            master_id,\n            edit_user_id,\n            id\n        ]);\n        return result.rows[0];\n    } catch (error) {\n        console.error('Error updating exam type:', error);\n        throw error;\n    }\n};\nconst deleteExamType = async (id)=>{\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('DELETE FROM exam_types WHERE id = $1 RETURNING id', [\n            id\n        ]);\n        return result.rows[0];\n    } catch (error) {\n        console.error('Error deleting exam type:', error);\n        throw error;\n    }\n};\nconst searchExamTypes = async (options = {})=>{\n    const { search = '', kind, sortField = 'id', sortOrder = 'asc', page = 1, limit = 10, masterId } = options;\n    if (kind === undefined) {\n        throw new Error('Kind parameter is required');\n    }\n    const offset = (page - 1) * limit;\n    let query = `\n    SELECT \n      et.id, \n      et.name, \n      et.code, \n      COUNT(*) OVER() AS total\n      ${kind == 3 ? `, COALESCE((\n        SELECT MAX(CAST(SUBSTRING(q.code FROM 8 FOR 4) AS INTEGER)) + 1\n        FROM questions q\n        WHERE SUBSTRING(q.code FROM 6 FOR 2) = et.code\n      ), 1) AS \"NextID\"` : ''}\n    FROM exam_types et\n    WHERE (et.name ILIKE $1 OR et.description ILIKE $1 OR et.code ILIKE $1)\n    AND kind = $2\n  `;\n    const values = [\n        `%${search}%`,\n        kind\n    ];\n    // Tambahkan kondisi master_id jika masterId tersedia\n    if (masterId !== undefined && masterId !== null) {\n        query += ` AND et.master_id = $${values.length + 1}`;\n        values.push(masterId);\n    }\n    const validSortFields = [\n        'id',\n        'name',\n        'code'\n    ];\n    if (validSortFields.includes(sortField.toLowerCase()) && [\n        'asc',\n        'desc'\n    ].includes(sortOrder.toLowerCase())) {\n        query += ` ORDER BY ${sortField} ${sortOrder.toUpperCase()}`;\n    } else {\n        query += ` ORDER BY name ASC`;\n    }\n    query += ` LIMIT $${values.length + 1} OFFSET $${values.length + 2}`;\n    values.push(limit, offset);\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, values);\n        return {\n            examTypes: result.rows,\n            total: result.rows.length > 0 ? parseInt(result.rows[0].total) : 0\n        };\n    } catch (error) {\n        console.error('Error searching exam types:', error);\n        throw error;\n    }\n};\nconst getSubtopicsInfo = async (subtopicIds)=>{\n    if (!subtopicIds.length) return [];\n    const placeholders = subtopicIds.map((_, i)=>`$${i + 1}`).join(',');\n    const query = `\n    WITH subtopics AS (\n      SELECT \n        et.id,\n        et.code AS sub_code,\n        et.master_id AS top_id,\n        (SELECT MAX(CAST(SUBSTRING(q.code FROM 8 FOR 4) AS INTEGER)) \n          FROM questions q \n          WHERE q.question_topic_type = et.id) AS last_sequence\n      FROM exam_types et\n      WHERE et.id IN (${placeholders})\n    ),\n    topics AS (\n      SELECT\n        t.id,\n        t.code AS top_code,\n        t.master_id AS bid_id\n      FROM exam_types t\n      WHERE t.id IN (SELECT top_id FROM subtopics)\n    ),\n    bids AS (\n      SELECT\n        b.id,\n        b.code AS bid_code\n      FROM exam_types b\n      WHERE b.id IN (SELECT bid_id FROM topics)\n    )\n    SELECT\n      s.id,\n      s.sub_code,\n      s.last_sequence,\n      t.top_code,\n      b.bid_code\n    FROM subtopics s\n    JOIN topics t ON s.top_id = t.id\n    JOIN bids b ON t.bid_id = b.id\n  `;\n    const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, subtopicIds);\n    return result.rows;\n};\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFXLElBQUk7SUFDOUQsT0FBTztRQUNMTCxTQUFTLENBQUMsa0JBQWtCLENBQUM7SUFDL0I7SUFFQUEsU0FBUyxDQUFDLFFBQVEsRUFBRUMsT0FBT0ssTUFBTSxHQUFHLEVBQUUsU0FBUyxFQUFFTCxPQUFPSyxNQUFNLEdBQUcsR0FBRztJQUNwRUwsT0FBTytCLElBQUksQ0FBQ2xDLE9BQU9DO0lBRW5CLElBQUk7UUFDRixNQUFNUSxTQUFTLE1BQU1mLHFEQUFVLENBQUNRLE9BQU9DO1FBQ3ZDLE9BQU87WUFDTE8sV0FBV0QsT0FBT0UsSUFBSTtZQUN0QkMsT0FBT0gsT0FBT0UsSUFBSSxDQUFDSCxNQUFNLEdBQUcsSUFBSUssU0FBU0osT0FBT0UsSUFBSSxDQUFDLEVBQUUsQ0FBQ0MsS0FBSyxJQUFJO1FBQ25FO0lBQ0YsRUFBRSxPQUFPRSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE1BQU1BO0lBQ1I7QUFDRjtBQUVBLE1BQU1xQixtQkFBbUIsT0FBT0M7SUFDOUIsSUFBSSxDQUFDQSxZQUFZNUIsTUFBTSxFQUFFLE9BQU8sRUFBRTtJQUVsQyxNQUFNNkIsZUFBZUQsWUFBWUUsR0FBRyxDQUFDLENBQUNDLEdBQUdDLElBQU0sQ0FBQyxDQUFDLEVBQUVBLElBQUksR0FBRyxFQUFFQyxJQUFJLENBQUM7SUFFakUsTUFBTXZDLFFBQVEsQ0FBQzs7Ozs7Ozs7OztzQkFVSyxFQUFFbUMsYUFBYTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUEwQm5DLENBQUM7SUFFRCxNQUFNNUIsU0FBUyxNQUFNZixxREFBVSxDQUFDUSxPQUFPa0M7SUFDdkMsT0FBTzNCLE9BQU9FLElBQUk7QUFDcEI7QUFVRSIsInNvdXJjZXMiOlsiRDpcXExhdGloYW5cXE5ldyBmb2xkZXIgKDIpXFxGRVxcMVxcRkVcXE5leHRcXGZ1dHVyZWR1XFxtb2RlbHNcXGV4YW1UeXBlcy5tb2RlbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBtb2RlbHMvZXhhbVR5cGVzLm1vZGVsLnRzXHJcbmltcG9ydCBwb29sIGZyb20gJy4uL2xpYi9kYic7XHJcblxyXG4vLyBUeXBlc1xyXG5leHBvcnQgaW50ZXJmYWNlIEV4YW1UeXBlIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBjb2RlOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcbiAga2luZD86IG51bWJlcjtcclxuICBtYXN0ZXJfaWQ/OiBzdHJpbmc7XHJcbiAgY3JlYXRlX3VzZXJfaWQ/OiBzdHJpbmc7XHJcbiAgZWRpdF91c2VyX2lkPzogc3RyaW5nO1xyXG4gIGNyZWF0ZV9kYXRlPzogRGF0ZTtcclxuICBlZGl0X2RhdGU/OiBEYXRlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4YW1UeXBlQ3JlYXRlRGF0YSB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG4gIGNvZGU/OiBzdHJpbmc7XHJcbiAga2luZD86IG51bWJlcjtcclxuICBtYXN0ZXJfaWQ/OiBzdHJpbmc7XHJcbiAgY3JlYXRlX3VzZXJfaWQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRXhhbVR5cGVVcGRhdGVEYXRhIHtcclxuICBuYW1lPzogc3RyaW5nO1xyXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG4gIGNvZGU/OiBzdHJpbmc7XHJcbiAga2luZD86IG51bWJlcjtcclxuICBtYXN0ZXJfaWQ/OiBzdHJpbmc7XHJcbiAgZWRpdF91c2VyX2lkPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4YW1UeXBlU2VhcmNoT3B0aW9ucyB7XHJcbiAgc29ydEZpZWxkPzogc3RyaW5nO1xyXG4gIHNvcnRPcmRlcj86IHN0cmluZztcclxuICBwYWdlPzogbnVtYmVyO1xyXG4gIGxpbWl0PzogbnVtYmVyO1xyXG4gIHNlYXJjaD86IHN0cmluZztcclxuICBraW5kPzogbnVtYmVyO1xyXG4gIG1hc3RlcklkPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEV4YW1UeXBlU2VhcmNoUmVzdWx0IHtcclxuICBleGFtVHlwZXM6IEV4YW1UeXBlW107XHJcbiAgdG90YWw6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTdWJ0b3BpY0luZm8ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgc3ViX2NvZGU6IHN0cmluZztcclxuICBsYXN0X3NlcXVlbmNlOiBudW1iZXI7XHJcbiAgdG9wX2NvZGU6IHN0cmluZztcclxuICBiaWRfY29kZTogc3RyaW5nO1xyXG59XHJcblxyXG5jb25zdCBnZXRBbGxFeGFtVHlwZXMgPSBhc3luYyAob3B0aW9uczogRXhhbVR5cGVTZWFyY2hPcHRpb25zID0ge30pOiBQcm9taXNlPEV4YW1UeXBlU2VhcmNoUmVzdWx0PiA9PiB7XHJcbiAgY29uc3Qge1xyXG4gICAgc29ydEZpZWxkID0gJ25hbWUnLFxyXG4gICAgc29ydE9yZGVyID0gJ2FzYycsXHJcbiAgICBwYWdlID0gMSxcclxuICAgIGxpbWl0ID0gMTAsXHJcbiAgfSA9IG9wdGlvbnM7XHJcblxyXG4gIGNvbnN0IG9mZnNldCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcclxuICBsZXQgcXVlcnkgPSBgXHJcbiAgICBTRUxFQ1QgaWQsIG5hbWUsIGNvZGUsIENPVU5UKCopIE9WRVIoKSBBUyB0b3RhbFxyXG4gICAgRlJPTSBleGFtX3R5cGVzXHJcbiAgYDtcclxuXHJcbiAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gIGNvbnN0IHZhbGlkU29ydEZpZWxkcyA9IFsnaWQnLCAnbmFtZScsICdjb2RlJ107XHJcbiAgaWYgKHZhbGlkU29ydEZpZWxkcy5pbmNsdWRlcyhzb3J0RmllbGQudG9Mb3dlckNhc2UoKSkgJiYgWydhc2MnLCAnZGVzYyddLmluY2x1ZGVzKHNvcnRPcmRlci50b0xvd2VyQ2FzZSgpKSkge1xyXG4gICAgcXVlcnkgKz0gYCBPUkRFUiBCWSAke3NvcnRGaWVsZH0gJHtzb3J0T3JkZXIudG9VcHBlckNhc2UoKX1gO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBxdWVyeSArPSBgIE9SREVSIEJZIG5hbWUgQVNDYDtcclxuICB9XHJcblxyXG4gIHF1ZXJ5ICs9IGAgTElNSVQgJCR7dmFsdWVzLmxlbmd0aCArIDF9IE9GRlNFVCAkJHt2YWx1ZXMubGVuZ3RoICsgMn1gO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KHF1ZXJ5LCBbbGltaXQsIG9mZnNldF0pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZXhhbVR5cGVzOiByZXN1bHQucm93cyxcclxuICAgICAgdG90YWw6IHJlc3VsdC5yb3dzLmxlbmd0aCA+IDAgPyBwYXJzZUludChyZXN1bHQucm93c1swXS50b3RhbCkgOiAwLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBhbGwgZXhhbSB0eXBlczonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBnZXRFeGFtVHlwZUJ5SWQgPSBhc3luYyAoaWQ6IHN0cmluZyk6IFByb21pc2U8RXhhbVR5cGUgfCB1bmRlZmluZWQ+ID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgJ1NFTEVDVCBpZCwgbmFtZSwgY29kZSBGUk9NIGV4YW1fdHlwZXMgV0hFUkUgaWQgPSAkMScsXHJcbiAgICAgIFtpZF1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgZXhhbSB0eXBlIGJ5IGlkOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZUV4YW1UeXBlID0gYXN5bmMgKGRhdGE6IEV4YW1UeXBlQ3JlYXRlRGF0YSk6IFByb21pc2U8RXhhbVR5cGU+ID0+IHtcclxuICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uLCBjb2RlLCBraW5kLCBtYXN0ZXJfaWQsIGNyZWF0ZV91c2VyX2lkIH0gPSBkYXRhO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICBgSU5TRVJUIElOVE8gZXhhbV90eXBlcyAobmFtZSwgZGVzY3JpcHRpb24sIGNvZGUsIGtpbmQsIG1hc3Rlcl9pZCwgY3JlYXRlX3VzZXJfaWQsIGNyZWF0ZV9kYXRlKVxyXG4gICAgICAgVkFMVUVTICgkMSwgJDIsICQzLCAkNCwgJDUsICQ2LCBOT1coKSlcclxuICAgICAgIFJFVFVSTklORyBpZCwgbmFtZSwgY29kZWAsXHJcbiAgICAgIFtuYW1lLCBkZXNjcmlwdGlvbiwgY29kZSwga2luZCwgbWFzdGVyX2lkLCBjcmVhdGVfdXNlcl9pZF1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGV4YW0gdHlwZTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCB1cGRhdGVFeGFtVHlwZSA9IGFzeW5jIChpZDogc3RyaW5nLCBkYXRhOiBFeGFtVHlwZVVwZGF0ZURhdGEpOiBQcm9taXNlPEV4YW1UeXBlIHwgdW5kZWZpbmVkPiA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiwgY29kZSwga2luZCwgbWFzdGVyX2lkLCBlZGl0X3VzZXJfaWQgfSA9IGRhdGE7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgIGBVUERBVEUgZXhhbV90eXBlcyBcclxuICAgICAgIFNFVCBuYW1lID0gJDEsIGRlc2NyaXB0aW9uID0gJDIsIGNvZGUgPSAkMywga2luZCA9ICQ0LCBtYXN0ZXJfaWQgPSAkNSxcclxuICAgICAgICAgICBlZGl0X3VzZXJfaWQgPSAkNiwgZWRpdF9kYXRlID0gTk9XKClcclxuICAgICAgIFdIRVJFIGlkID0gJDdcclxuICAgICAgIFJFVFVSTklORyBpZCwgbmFtZSwgY29kZWAsXHJcbiAgICAgIFtuYW1lLCBkZXNjcmlwdGlvbiwgY29kZSwga2luZCwgbWFzdGVyX2lkLCBlZGl0X3VzZXJfaWQsIGlkXVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQucm93c1swXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZXhhbSB0eXBlOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGRlbGV0ZUV4YW1UeXBlID0gYXN5bmMgKGlkOiBzdHJpbmcpOiBQcm9taXNlPEV4YW1UeXBlIHwgdW5kZWZpbmVkPiA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgICdERUxFVEUgRlJPTSBleGFtX3R5cGVzIFdIRVJFIGlkID0gJDEgUkVUVVJOSU5HIGlkJyxcclxuICAgICAgW2lkXVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQucm93c1swXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgZXhhbSB0eXBlOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHNlYXJjaEV4YW1UeXBlcyA9IGFzeW5jIChvcHRpb25zOiBFeGFtVHlwZVNlYXJjaE9wdGlvbnMgPSB7fSk6IFByb21pc2U8RXhhbVR5cGVTZWFyY2hSZXN1bHQ+ID0+IHtcclxuICBjb25zdCB7XHJcbiAgICBzZWFyY2ggPSAnJyxcclxuICAgIGtpbmQsXHJcbiAgICBzb3J0RmllbGQgPSAnaWQnLFxyXG4gICAgc29ydE9yZGVyID0gJ2FzYycsXHJcbiAgICBwYWdlID0gMSxcclxuICAgIGxpbWl0ID0gMTAsXHJcbiAgICBtYXN0ZXJJZFxyXG4gIH0gPSBvcHRpb25zO1xyXG5cclxuICBpZiAoa2luZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0tpbmQgcGFyYW1ldGVyIGlzIHJlcXVpcmVkJyk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBvZmZzZXQgPSAocGFnZSAtIDEpICogbGltaXQ7XHJcbiAgbGV0IHF1ZXJ5ID0gYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICBldC5pZCwgXHJcbiAgICAgIGV0Lm5hbWUsIFxyXG4gICAgICBldC5jb2RlLCBcclxuICAgICAgQ09VTlQoKikgT1ZFUigpIEFTIHRvdGFsXHJcbiAgICAgICR7a2luZCA9PSAzID8gYCwgQ09BTEVTQ0UoKFxyXG4gICAgICAgIFNFTEVDVCBNQVgoQ0FTVChTVUJTVFJJTkcocS5jb2RlIEZST00gOCBGT1IgNCkgQVMgSU5URUdFUikpICsgMVxyXG4gICAgICAgIEZST00gcXVlc3Rpb25zIHFcclxuICAgICAgICBXSEVSRSBTVUJTVFJJTkcocS5jb2RlIEZST00gNiBGT1IgMikgPSBldC5jb2RlXHJcbiAgICAgICksIDEpIEFTIFwiTmV4dElEXCJgIDogJyd9XHJcbiAgICBGUk9NIGV4YW1fdHlwZXMgZXRcclxuICAgIFdIRVJFIChldC5uYW1lIElMSUtFICQxIE9SIGV0LmRlc2NyaXB0aW9uIElMSUtFICQxIE9SIGV0LmNvZGUgSUxJS0UgJDEpXHJcbiAgICBBTkQga2luZCA9ICQyXHJcbiAgYDtcclxuICBjb25zdCB2YWx1ZXM6IGFueVtdID0gW2AlJHtzZWFyY2h9JWAsIGtpbmRdO1xyXG5cclxuICAvLyBUYW1iYWhrYW4ga29uZGlzaSBtYXN0ZXJfaWQgamlrYSBtYXN0ZXJJZCB0ZXJzZWRpYVxyXG4gIGlmIChtYXN0ZXJJZCAhPT0gdW5kZWZpbmVkICYmIG1hc3RlcklkICE9PSBudWxsKSB7XHJcbiAgICBxdWVyeSArPSBgIEFORCBldC5tYXN0ZXJfaWQgPSAkJHt2YWx1ZXMubGVuZ3RoICsgMX1gO1xyXG4gICAgdmFsdWVzLnB1c2gobWFzdGVySWQpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdmFsaWRTb3J0RmllbGRzID0gWydpZCcsICduYW1lJywgJ2NvZGUnXTtcclxuICBpZiAodmFsaWRTb3J0RmllbGRzLmluY2x1ZGVzKHNvcnRGaWVsZC50b0xvd2VyQ2FzZSgpKSAmJiBbJ2FzYycsICdkZXNjJ10uaW5jbHVkZXMoc29ydE9yZGVyLnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICBxdWVyeSArPSBgIE9SREVSIEJZICR7c29ydEZpZWxkfSAke3NvcnRPcmRlci50b1VwcGVyQ2FzZSgpfWA7XHJcbiAgfSBlbHNlIHtcclxuICAgIHF1ZXJ5ICs9IGAgT1JERVIgQlkgbmFtZSBBU0NgO1xyXG4gIH1cclxuXHJcbiAgcXVlcnkgKz0gYCBMSU1JVCAkJHt2YWx1ZXMubGVuZ3RoICsgMX0gT0ZGU0VUICQke3ZhbHVlcy5sZW5ndGggKyAyfWA7XHJcbiAgdmFsdWVzLnB1c2gobGltaXQsIG9mZnNldCk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KHF1ZXJ5LCB2YWx1ZXMpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZXhhbVR5cGVzOiByZXN1bHQucm93cyxcclxuICAgICAgdG90YWw6IHJlc3VsdC5yb3dzLmxlbmd0aCA+IDAgPyBwYXJzZUludChyZXN1bHQucm93c1swXS50b3RhbCkgOiAwLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VhcmNoaW5nIGV4YW0gdHlwZXM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgZ2V0U3VidG9waWNzSW5mbyA9IGFzeW5jIChzdWJ0b3BpY0lkczogc3RyaW5nW10pOiBQcm9taXNlPFN1YnRvcGljSW5mb1tdPiA9PiB7XHJcbiAgaWYgKCFzdWJ0b3BpY0lkcy5sZW5ndGgpIHJldHVybiBbXTtcclxuICBcclxuICBjb25zdCBwbGFjZWhvbGRlcnMgPSBzdWJ0b3BpY0lkcy5tYXAoKF8sIGkpID0+IGAkJHtpICsgMX1gKS5qb2luKCcsJyk7XHJcbiAgXHJcbiAgY29uc3QgcXVlcnkgPSBgXHJcbiAgICBXSVRIIHN1YnRvcGljcyBBUyAoXHJcbiAgICAgIFNFTEVDVCBcclxuICAgICAgICBldC5pZCxcclxuICAgICAgICBldC5jb2RlIEFTIHN1Yl9jb2RlLFxyXG4gICAgICAgIGV0Lm1hc3Rlcl9pZCBBUyB0b3BfaWQsXHJcbiAgICAgICAgKFNFTEVDVCBNQVgoQ0FTVChTVUJTVFJJTkcocS5jb2RlIEZST00gOCBGT1IgNCkgQVMgSU5URUdFUikpIFxyXG4gICAgICAgICAgRlJPTSBxdWVzdGlvbnMgcSBcclxuICAgICAgICAgIFdIRVJFIHEucXVlc3Rpb25fdG9waWNfdHlwZSA9IGV0LmlkKSBBUyBsYXN0X3NlcXVlbmNlXHJcbiAgICAgIEZST00gZXhhbV90eXBlcyBldFxyXG4gICAgICBXSEVSRSBldC5pZCBJTiAoJHtwbGFjZWhvbGRlcnN9KVxyXG4gICAgKSxcclxuICAgIHRvcGljcyBBUyAoXHJcbiAgICAgIFNFTEVDVFxyXG4gICAgICAgIHQuaWQsXHJcbiAgICAgICAgdC5jb2RlIEFTIHRvcF9jb2RlLFxyXG4gICAgICAgIHQubWFzdGVyX2lkIEFTIGJpZF9pZFxyXG4gICAgICBGUk9NIGV4YW1fdHlwZXMgdFxyXG4gICAgICBXSEVSRSB0LmlkIElOIChTRUxFQ1QgdG9wX2lkIEZST00gc3VidG9waWNzKVxyXG4gICAgKSxcclxuICAgIGJpZHMgQVMgKFxyXG4gICAgICBTRUxFQ1RcclxuICAgICAgICBiLmlkLFxyXG4gICAgICAgIGIuY29kZSBBUyBiaWRfY29kZVxyXG4gICAgICBGUk9NIGV4YW1fdHlwZXMgYlxyXG4gICAgICBXSEVSRSBiLmlkIElOIChTRUxFQ1QgYmlkX2lkIEZST00gdG9waWNzKVxyXG4gICAgKVxyXG4gICAgU0VMRUNUXHJcbiAgICAgIHMuaWQsXHJcbiAgICAgIHMuc3ViX2NvZGUsXHJcbiAgICAgIHMubGFzdF9zZXF1ZW5jZSxcclxuICAgICAgdC50b3BfY29kZSxcclxuICAgICAgYi5iaWRfY29kZVxyXG4gICAgRlJPTSBzdWJ0b3BpY3Mgc1xyXG4gICAgSk9JTiB0b3BpY3MgdCBPTiBzLnRvcF9pZCA9IHQuaWRcclxuICAgIEpPSU4gYmlkcyBiIE9OIHQuYmlkX2lkID0gYi5pZFxyXG4gIGA7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkocXVlcnksIHN1YnRvcGljSWRzKTtcclxuICByZXR1cm4gcmVzdWx0LnJvd3M7XHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gIGdldEFsbEV4YW1UeXBlcyxcclxuICBnZXRFeGFtVHlwZUJ5SWQsXHJcbiAgY3JlYXRlRXhhbVR5cGUsXHJcbiAgdXBkYXRlRXhhbVR5cGUsXHJcbiAgZGVsZXRlRXhhbVR5cGUsXHJcbiAgc2VhcmNoRXhhbVR5cGVzLFxyXG4gIGdldFN1YnRvcGljc0luZm9cclxufTsiXSwibmFtZXMiOlsicG9vbCIsImdldEFsbEV4YW1UeXBlcyIsIm9wdGlvbnMiLCJzb3J0RmllbGQiLCJzb3J0T3JkZXIiLCJwYWdlIiwibGltaXQiLCJvZmZzZXQiLCJxdWVyeSIsInZhbHVlcyIsInZhbGlkU29ydEZpZWxkcyIsImluY2x1ZGVzIiwidG9Mb3dlckNhc2UiLCJ0b1VwcGVyQ2FzZSIsImxlbmd0aCIsInJlc3VsdCIsImV4YW1UeXBlcyIsInJvd3MiLCJ0b3RhbCIsInBhcnNlSW50IiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0RXhhbVR5cGVCeUlkIiwiaWQiLCJjcmVhdGVFeGFtVHlwZSIsImRhdGEiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJjb2RlIiwia2luZCIsIm1hc3Rlcl9pZCIsImNyZWF0ZV91c2VyX2lkIiwidXBkYXRlRXhhbVR5cGUiLCJlZGl0X3VzZXJfaWQiLCJkZWxldGVFeGFtVHlwZSIsInNlYXJjaEV4YW1UeXBlcyIsInNlYXJjaCIsIm1hc3RlcklkIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJwdXNoIiwiZ2V0U3VidG9waWNzSW5mbyIsInN1YnRvcGljSWRzIiwicGxhY2Vob2xkZXJzIiwibWFwIiwiXyIsImkiLCJqb2luIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./models/examTypes.model.ts\n");

/***/ }),

/***/ "(api-node)/./models/questions.model.ts":
/*!***********************************!*\
  !*** ./models/questions.model.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appendExamIdToQuestion: () => (/* binding */ appendExamIdToQuestion),\n/* harmony export */   createBulkQuestions: () => (/* binding */ createBulkQuestions),\n/* harmony export */   createPassage: () => (/* binding */ createPassage),\n/* harmony export */   createQuestion: () => (/* binding */ createQuestion),\n/* harmony export */   deleteQuestion: () => (/* binding */ deleteQuestion),\n/* harmony export */   getAllQuestions: () => (/* binding */ getAllQuestions),\n/* harmony export */   getDiagnosticQuestionsByExamString: () => (/* binding */ getDiagnosticQuestionsByExamString),\n/* harmony export */   getPagedQuestions: () => (/* binding */ getPagedQuestions),\n/* harmony export */   getPassageById: () => (/* binding */ getPassageById),\n/* harmony export */   getQuestionById: () => (/* binding */ getQuestionById),\n/* harmony export */   getQuestionByUId: () => (/* binding */ getQuestionByUId),\n/* harmony export */   getQuestionsByExamId: () => (/* binding */ getQuestionsByExamId),\n/* harmony export */   getQuestionsByExamString: () => (/* binding */ getQuestionsByExamString),\n/* harmony export */   getTotalQuestions: () => (/* binding */ getTotalQuestions),\n/* harmony export */   searchPassages: () => (/* binding */ searchPassages),\n/* harmony export */   searchQuestionsByCodeOrId: () => (/* binding */ searchQuestionsByCodeOrId),\n/* harmony export */   updateBulkQuestions: () => (/* binding */ updateBulkQuestions),\n/* harmony export */   updatePassage: () => (/* binding */ updatePassage),\n/* harmony export */   updateQuestion: () => (/* binding */ updateQuestion),\n/* harmony export */   verifyIdCodePairs: () => (/* binding */ verifyIdCodePairs)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/db */ \"(api-node)/./lib/db.ts\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_db__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_db__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// models/questions.model.ts\n\n\n// Helper Functions\nconst shuffleArray = (array, seed)=>{\n    const result = [\n        ...array\n    ];\n    let currentIndex = result.length;\n    let temporaryValue, randomIndex;\n    // Use seed for reproducible randomness\n    const random = ()=>{\n        const x = Math.sin(seed++) * 10000;\n        return x - Math.floor(x);\n    };\n    while(0 !== currentIndex){\n        randomIndex = Math.floor(random() * currentIndex);\n        currentIndex -= 1;\n        temporaryValue = result[currentIndex];\n        result[currentIndex] = result[randomIndex];\n        result[randomIndex] = temporaryValue;\n    }\n    return result;\n};\nconst makeSeed = (examString, level)=>{\n    const nonce = crypto__WEBPACK_IMPORTED_MODULE_1__.randomBytes(4).readUInt32LE(0);\n    const hash = crypto__WEBPACK_IMPORTED_MODULE_1__.createHash('sha256').update(`${examString}-${level}-${nonce}`).digest();\n    return hash.readUInt32LE(0) & 0x7fffffff;\n};\n// Model Functions\nconst searchQuestionsByCodeOrId = async (search)=>{\n    try {\n        if (!search || search.trim() === '') {\n            return [];\n        }\n        const query = `\n      SELECT id, code\n      FROM   questions\n      WHERE  code ILIKE $1 OR CAST(id AS text) ILIKE $1\n      ORDER  BY md5(id::text)\n      LIMIT  15;\n    `;\n        const values = [\n            `%${search}%`\n        ];\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, values);\n        return result.rows.map((row)=>({\n                id: row.id,\n                code: row.code\n            }));\n    } catch (error) {\n        console.error('Error searching questions by code or id:', error);\n        throw error;\n    }\n};\nconst getAllQuestions = async ()=>{\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('SELECT * FROM questions ORDER BY id');\n        return result.rows;\n    } catch (error) {\n        console.error('Error fetching questions:', error);\n        throw error;\n    }\n};\nconst getPagedQuestions = async (filters)=>{\n    const { page = 1, limit = 50, search = '', question_type = 'All', exam_id, topic, subtopic, creator, start_date, end_date, sortKey = 'q.id', sortOrder = 'asc', userId } = filters;\n    const offset = (page - 1) * limit;\n    const allowedSortKeys = [\n        'q.id',\n        'question_type',\n        'question_text',\n        'correct_answer',\n        'topic',\n        'subtopic',\n        'creator',\n        'create_date',\n        'editor',\n        'edit_date'\n    ];\n    const validatedSortKey = allowedSortKeys.includes(sortKey) ? sortKey : 'q.id';\n    const validatedSortOrder = sortOrder.toLowerCase() === 'desc' ? 'DESC' : 'ASC';\n    const baseSelectClause = `\n    SELECT \n      q.id,\n      ARRAY_AGG(e.id) AS exam_id,\n      ARRAY_AGG(e.name) AS exam_name,\n      q.question_type,\n      q.question_text,\n      q.options,\n      q.correct_answer,\n      et.name AS subtopic,\n      et2.name AS topic,\n      COALESCE(u.name, 'admin') AS creator,\n      q.create_date::date AS create_date,\n      u2.name AS editor,\n      q.edit_date::date AS edit_date,\n      q.pembahasan,\n      pg.title,\n      pg.passage\n  `;\n    const baseFromClause = `\n    FROM questions q\n    LEFT JOIN exams e ON q.id = ANY(e.question_id_list)\n    LEFT JOIN v_dashboard_userdata u ON u.userid = q.create_user_id\n    LEFT JOIN v_dashboard_userdata u2 ON u2.userid = q.edit_user_id\n    LEFT JOIN exam_types et ON et.id = q.question_topic_type\n    LEFT JOIN exam_types et2 ON et2.id = et.id\n    LEFT Join question_passages pg on pg.id = q.passage_id\n  `;\n    let whereClauses = [];\n    let values = [];\n    let valueIndex = 1;\n    let filterParamsCount = 0;\n    if (search) {\n        whereClauses.push(`(q.question_text ILIKE $${valueIndex} OR CAST(q.id AS TEXT) ILIKE $${valueIndex})`);\n        values.push(`%${search}%`);\n        valueIndex++;\n        filterParamsCount++;\n    }\n    if (question_type && question_type !== 'All') {\n        whereClauses.push(`q.question_type = $${valueIndex}`);\n        values.push(question_type);\n        valueIndex++;\n        filterParamsCount++;\n    }\n    if (exam_id) {\n        whereClauses.push(`q.id = ANY(SELECT question_id_list FROM exams WHERE id = $${valueIndex})`);\n        values.push(exam_id);\n        valueIndex++;\n        filterParamsCount++;\n    }\n    if (topic) {\n        whereClauses.push(`et2.name = $${valueIndex}`);\n        values.push(topic);\n        valueIndex++;\n        filterParamsCount++;\n    }\n    if (subtopic) {\n        whereClauses.push(`et.name = $${valueIndex}`);\n        values.push(subtopic);\n        valueIndex++;\n        filterParamsCount++;\n    }\n    if (creator) {\n        whereClauses.push(`u.name = $${valueIndex}`);\n        values.push(creator);\n        valueIndex++;\n        filterParamsCount++;\n    }\n    if (start_date) {\n        whereClauses.push(`q.create_date::date >= $${valueIndex}`);\n        values.push(start_date);\n        valueIndex++;\n        filterParamsCount++;\n    }\n    if (end_date) {\n        whereClauses.push(`q.create_date::date <= $${valueIndex}`);\n        values.push(end_date);\n        valueIndex++;\n        filterParamsCount++;\n    }\n    if (userId) {\n        whereClauses.push(`(q.create_user_id = $${valueIndex} OR q.edit_user_id = $${valueIndex})`);\n        values.push(userId);\n        valueIndex++;\n        filterParamsCount++;\n    }\n    let whereClause = whereClauses.length > 0 ? ' WHERE ' + whereClauses.join(' AND ') : '';\n    const mainQuery = `\n    ${baseSelectClause}\n    ${baseFromClause}\n    ${whereClause}\n    GROUP BY q.id, q.question_type, q.question_text, q.options, q.correct_answer, \n            et.name, et2.name, u.name, q.create_date, u2.name, q.edit_date, q.pembahasan,\n      pg.title,\n      pg.passage\n    ORDER BY ${validatedSortKey} ${validatedSortOrder}\n    LIMIT $${valueIndex} OFFSET $${valueIndex + 1}\n  `;\n    values.push(limit, offset);\n    const countQuery = `\n    SELECT COUNT(*) AS total\n    FROM (\n      SELECT q.id\n      ${baseFromClause}\n      ${whereClause}\n      GROUP BY q.id\n    ) AS sub\n  `;\n    try {\n        const [dataResult, countResult] = await Promise.all([\n            _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(mainQuery, values),\n            _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(countQuery, values.slice(0, filterParamsCount))\n        ]);\n        const total = parseInt(countResult.rows[0].total, 10);\n        const totalPages = Math.ceil(total / limit);\n        return {\n            data: dataResult.rows,\n            total,\n            totalPages\n        };\n    } catch (error) {\n        console.error('Error fetching paged questions:', error);\n        throw error;\n    }\n};\nconst getTotalQuestions = async ({ search, type, examId, userId })=>{\n    try {\n        let query = `\n      SELECT COUNT(DISTINCT q.id) AS total\n      FROM questions q\n      LEFT JOIN exams e ON q.id = ANY(e.question_id_list)\n      WHERE 1=1\n    `;\n        const params = [];\n        let paramIndex = 1;\n        if (search) {\n            query += ` AND (q.question_text ILIKE $${paramIndex} OR CAST(q.id AS TEXT) ILIKE $${paramIndex})`;\n            params.push(`%${search}%`);\n            paramIndex++;\n        }\n        if (type && type !== 'All') {\n            query += ` AND q.question_type = $${paramIndex}`;\n            params.push(type);\n            paramIndex++;\n        }\n        if (examId) {\n            query += ` AND q.id = ANY(SELECT question_id_list FROM exams WHERE id = $${paramIndex})`;\n            params.push(examId);\n            paramIndex++;\n        }\n        if (userId) {\n            query += ` AND (q.create_user_id = $${paramIndex} OR q.edit_user_id = $${paramIndex})`;\n            params.push(userId);\n            paramIndex++;\n        }\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, params);\n        return parseInt(result.rows[0].total, 10);\n    } catch (error) {\n        console.error('Error fetching total questions:', error);\n        throw error;\n    }\n};\nconst getDiagnosticQuestionsByExamString = async (exam_string)=>{\n    const client = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].connect();\n    try {\n        const examRes = await client.query(`SELECT id, duration,\n              level_1_question_qty,\n              level_2_question_qty,\n              level_3_question_qty,\n              level_4_question_qty, \n              level_5_question_qty,\n              question_id_list\n       FROM   exams\n       WHERE  exam_string = $1`, [\n            exam_string\n        ]);\n        if (!examRes.rowCount) throw new Error('Exam not found');\n        const exam = examRes.rows[0];\n        const qRes = await client.query(`SELECT *\n       FROM   questions\n       WHERE  id = ANY($1::int[])`, [\n            exam.question_id_list\n        ]);\n        const grouped = {};\n        for (const q of qRes.rows){\n            const lvl = q.level;\n            (grouped[lvl] ??= []).push(q);\n        }\n        const spec = [\n            {\n                lvl: 1,\n                qty: exam.level_1_question_qty\n            },\n            {\n                lvl: 2,\n                qty: exam.level_2_question_qty\n            },\n            {\n                lvl: 3,\n                qty: exam.level_3_question_qty\n            },\n            {\n                lvl: 4,\n                qty: exam.level_4_question_qty\n            },\n            {\n                lvl: 5,\n                qty: exam.level_5_question_qty\n            }\n        ];\n        const finalQuestions = [];\n        for (const { lvl, qty } of spec){\n            const poolForLvl = grouped[lvl] ?? [];\n            if (!poolForLvl.length) continue;\n            const shuffled = shuffleArray(poolForLvl, makeSeed(exam_string, lvl));\n            finalQuestions.push(...shuffled.slice(0, qty || shuffled.length));\n        }\n        return {\n            duration: exam.duration,\n            questions: finalQuestions.map((q)=>({\n                    id: q.id,\n                    level: q.level,\n                    type: q.question_type,\n                    question: q.question_text,\n                    options: q.options,\n                    correct: q.correct_answer,\n                    statements: q.statements\n                }))\n        };\n    } finally{\n        client.release();\n    }\n};\nconst getQuestionsByExamString = async (exam_string)=>{\n    try {\n        const examResult = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('SELECT * FROM exams WHERE exam_string = $1', [\n            exam_string\n        ]);\n        if (examResult.rows.length === 0) {\n            throw new Error('Exam not found');\n        }\n        const examId = examResult.rows[0].id;\n        const query = `\n      SELECT q.*\n      FROM questions q\n      WHERE q.id = ANY (\n        SELECT unnest(question_id_list)\n        FROM exams\n        WHERE id = $1\n      )\n      ORDER BY q.id\n    `;\n        const questionsResult = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, [\n            examId\n        ]);\n        return {\n            duration: examResult.rows[0].duration,\n            questions: questionsResult.rows.map((q)=>({\n                    id: q.id,\n                    type: q.question_type,\n                    question: q.question_text,\n                    options: q.options,\n                    correct: q.correct_answer,\n                    statements: q.statements\n                }))\n        };\n    } catch (error) {\n        console.error('Error fetching questions by exam_string:', error);\n        throw error;\n    }\n};\nconst getQuestionsByExamId = async (examId)=>{\n    try {\n        const query = `\n      SELECT q.*\n      FROM questions q\n      WHERE q.id = ANY (\n        SELECT unnest(question_id_list)\n        FROM exams\n        WHERE id = $1\n      )\n      ORDER BY q.id\n    `;\n        const questionsResult = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, [\n            examId\n        ]);\n        return {\n            questions: questionsResult.rows.map((q)=>({\n                    id: q.id,\n                    type: q.question_type,\n                    question: q.question_text,\n                    options: q.options,\n                    correct: q.correct_answer,\n                    statements: q.statements\n                }))\n        };\n    } catch (error) {\n        console.error('Error fetching questions by examId:', error);\n        throw error;\n    }\n};\nconst getQuestionById = async (id)=>{\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('SELECT * FROM questions WHERE id = $1', [\n            id\n        ]);\n        return result.rows[0] || null;\n    } catch (error) {\n        console.error('Error fetching question:', error);\n        throw error;\n    }\n};\nconst getQuestionByUId = async (id)=>{\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('SELECT id, question_type, question_text,options, statements, level FROM questions WHERE id = $1', [\n            id\n        ]);\n        return result.rows[0] || null;\n    } catch (error) {\n        console.error('Error fetching question:', error);\n        throw error;\n    }\n};\nconst createQuestion = async (questionData, create_user_id)=>{\n    const client = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].connect();\n    try {\n        const defaultPembahasan = `\n    <div>\n      <h4>Pembahasan belum tersedia secara spesifik.</h4>\n      <p>Silakan cek kembali soal dan diskusikan dengan pengajar atau teman sekelas.</p>\n    </div>\n    `;\n        const insertQuery = `\n      INSERT INTO questions \n        (question_topic_type, question_type, question_text, options, correct_answer, statements, passage_id, code, create_user_id, pembahasan, level) \n      VALUES \n        ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) \n      RETURNING *\n    `;\n        const { question_topic_type, question_type, question_text, options, correct_answer, statements, passage_id, code, pembahasan, level } = questionData;\n        const result = await client.query(insertQuery, [\n            question_topic_type,\n            question_type,\n            question_text,\n            options,\n            correct_answer,\n            statements,\n            passage_id,\n            code,\n            create_user_id,\n            pembahasan || defaultPembahasan,\n            level\n        ]);\n        return result.rows[0];\n    } catch (error) {\n        console.error('Error creating question:', error);\n        throw error;\n    } finally{\n        client.release();\n    }\n};\nconst createBulkQuestions = async (questions, create_user_id)=>{\n    try {\n        await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('BEGIN');\n        const createdQuestions = [];\n        const insertQuery = `\n      INSERT INTO questions \n        (exam_id, question_type, question_text, options, correct_answer, statements, create_user_id, question_topic_type, edit_date) \n      VALUES \n        ($1, $2, $3, $4, $5, $6, $7, $8, null) \n      RETURNING *\n    `;\n        for (const question of questions){\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(insertQuery, [\n                question.exam_id,\n                question.question_type,\n                question.question_text,\n                question.options,\n                question.correct_answer,\n                question.statements,\n                create_user_id,\n                question.question_topic_type\n            ]);\n            createdQuestions.push(result.rows[0]);\n        }\n        await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('COMMIT');\n        return createdQuestions;\n    } catch (error) {\n        await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('ROLLBACK');\n        console.error('Error in bulk question creation:', error);\n        throw error;\n    }\n};\nconst updateQuestion = async (id, questionData, edit_user_id)=>{\n    const { question_text, question_type, options, correct_answer, statements, question_topic_type } = questionData;\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`UPDATE questions \n      SET \n        question_text = $1, \n        question_type = $2, \n        options = $3::text[], \n        correct_answer = $4::text[], \n        statements = $5::text[],\n        edit_user_id = $6,\n        edit_date = NOW(),\n        question_topic_type = $8\n      WHERE id = $7 \n      RETURNING *`, [\n            question_text,\n            question_type,\n            options,\n            correct_answer,\n            statements,\n            edit_user_id,\n            id,\n            question_topic_type\n        ]);\n        return result.rows[0] || null;\n    } catch (error) {\n        console.error('Error updating question:', error);\n        throw error;\n    }\n};\nconst updateBulkQuestions = async (questions, edit_user_id)=>{\n    try {\n        await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('BEGIN');\n        const updatedQuestions = [];\n        const updateQuery = `\n      UPDATE questions \n      SET \n        exam_id = $1,\n        question_type = $2,\n        question_text = $3,\n        options = $4,\n        correct_answer = $5,\n        statements = $6,\n        edit_user_id = $7,\n        question_topic_type = $8,\n        edit_date = CURRENT_TIMESTAMP\n      WHERE id = $9\n      RETURNING *\n    `;\n        for (const question of questions){\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(updateQuery, [\n                question.exam_id,\n                question.question_type,\n                question.question_text,\n                question.options,\n                question.correct_answer,\n                question.statements,\n                edit_user_id,\n                question.question_topic_type,\n                question.id\n            ]);\n            if (result.rows.length === 0) {\n                throw new Error(`Question with ID ${question.id} not found`);\n            }\n            updatedQuestions.push(result.rows[0]);\n        }\n        await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('COMMIT');\n        return updatedQuestions;\n    } catch (error) {\n        await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('ROLLBACK');\n        console.error('Error in bulk question update:', error);\n        throw error;\n    }\n};\nconst appendExamIdToQuestion = async (questionId, examId)=>{\n    try {\n        const questionCheck = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('SELECT * FROM questions WHERE id = $1', [\n            questionId\n        ]);\n        if (questionCheck.rows.length === 0) {\n            throw new Error('Question not found');\n        }\n        const examCheck = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('SELECT * FROM exams WHERE id = $1', [\n            examId\n        ]);\n        if (examCheck.rows.length === 0) {\n            throw new Error('Exam not found');\n        }\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`UPDATE questions\n      SET exam_id_list = array_append(COALESCE(exam_id_list, '{}'), $1::INTEGER)\n      WHERE id = $2\n      RETURNING *`, [\n            examId,\n            questionId\n        ]);\n        return {\n            id: result.rows[0].id,\n            exam_id_list: result.rows[0].exam_id_list\n        };\n    } catch (error) {\n        console.error('Error appending exam_id to question:', error);\n        throw error;\n    }\n};\nconst deleteQuestion = async (id)=>{\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('DELETE FROM questions WHERE id = $1 RETURNING *', [\n            id\n        ]);\n        return result.rows[0] || null;\n    } catch (error) {\n        console.error('Error deleting question:', error);\n        throw error;\n    }\n};\n// Question Passages Functions\nconst searchPassages = async (search)=>{\n    try {\n        if (!search || search.trim() === '') {\n            return [];\n        }\n        const query = `\n      SELECT id, title, passage\n      FROM question_passages\n      WHERE id::text ILIKE $1 OR title ILIKE $1\n      ORDER BY id\n      LIMIT 10\n    `;\n        const values = [\n            `%${search}%`\n        ];\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, values);\n        return result.rows;\n    } catch (error) {\n        console.error('Error searching passages:', error);\n        throw error;\n    }\n};\nconst getPassageById = async (id)=>{\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query('SELECT * FROM question_passages WHERE id = $1', [\n            id\n        ]);\n        return result.rows[0] || null;\n    } catch (error) {\n        console.error('Error fetching passage:', error);\n        throw error;\n    }\n};\nconst createPassage = async (passageData, create_user_id)=>{\n    const { title, passage } = passageData;\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`INSERT INTO question_passages \n        (title, passage, create_user_id, create_date) \n      VALUES \n        ($1, $2, $3, NOW()) \n      RETURNING *`, [\n            title,\n            passage,\n            create_user_id\n        ]);\n        return result.rows[0];\n    } catch (error) {\n        console.error('Error creating passage:', error);\n        throw error;\n    }\n};\nconst updatePassage = async (id, passageData, update_user_id)=>{\n    const { title, passage } = passageData;\n    try {\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`UPDATE question_passages\n      SET \n        title = $1,\n        passage = $2,\n        update_user_id = $3,\n        update_date = NOW()\n      WHERE id = $4\n      RETURNING *`, [\n            title,\n            passage,\n            update_user_id,\n            id\n        ]);\n        return result.rows[0] || null;\n    } catch (error) {\n        console.error('Error updating passage:', error);\n        throw error;\n    }\n};\nconst verifyIdCodePairs = async (pairs)=>{\n    const client = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].connect();\n    try {\n        const results = [];\n        for (const pair of pairs){\n            const { id, code } = pair;\n            const selectQuery = `\n        SELECT id, code \n        FROM questions \n        WHERE id = $1\n      `;\n            const result = await client.query(selectQuery, [\n                id\n            ]);\n            if (result.rows.length === 0) {\n                results.push({\n                    id: id,\n                    code: code,\n                    status: 'id_not_found',\n                    found_code: null,\n                    is_match: false\n                });\n            } else {\n                const foundQuestion = result.rows[0];\n                const isMatch = foundQuestion.code === code;\n                results.push({\n                    id: id,\n                    code: code,\n                    status: isMatch ? 'match' : 'code_mismatch',\n                    found_code: foundQuestion.code,\n                    is_match: isMatch\n                });\n            }\n        }\n        const totalPairs = results.length;\n        const matchedPairs = results.filter((r)=>r.is_match).length;\n        const notFoundIds = results.filter((r)=>r.status === 'id_not_found').length;\n        const mismatchedCodes = results.filter((r)=>r.status === 'code_mismatch').length;\n        return {\n            results: results,\n            summary: {\n                total: totalPairs,\n                matched: matchedPairs,\n                id_not_found: notFoundIds,\n                code_mismatched: mismatchedCodes,\n                success_rate: totalPairs > 0 ? (matchedPairs / totalPairs * 100).toFixed(2) + '%' : '0%'\n            }\n        };\n    } catch (error) {\n        console.error('Error verifying ID-Code pairs:', error);\n        throw error;\n    } finally{\n        client.release();\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JBQ2pCSyxjQUFjVixhQUFhLElBQUksQ0FBQyxlQUFnQkEsYUFBYyxHQUFFLEVBQUdXLE9BQU8sQ0FBQyxLQUFLLE1BQU07WUFDeEY7UUFDRjtJQUVGLEVBQUUsT0FBT3hJLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsTUFBTUE7SUFDUixTQUFVO1FBQ1JrRCxPQUFPNkIsT0FBTztJQUNoQjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIkQ6XFxMYXRpaGFuXFxOZXcgZm9sZGVyICgyKVxcRkVcXDFcXEZFXFxOZXh0XFxmdXR1cmVkdVxcbW9kZWxzXFxxdWVzdGlvbnMubW9kZWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbW9kZWxzL3F1ZXN0aW9ucy5tb2RlbC50c1xyXG5pbXBvcnQgcG9vbCBmcm9tICcuLi9saWIvZGInO1xyXG5pbXBvcnQgKiBhcyBjcnlwdG8gZnJvbSAnY3J5cHRvJztcclxuXHJcbi8vIFR5cGVzXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVlc3Rpb24ge1xyXG4gIGlkOiBudW1iZXI7XHJcbiAgcXVlc3Rpb25fdG9waWNfdHlwZT86IG51bWJlcjtcclxuICBxdWVzdGlvbl90eXBlOiBzdHJpbmc7XHJcbiAgcXVlc3Rpb25fdGV4dDogc3RyaW5nO1xyXG4gIG9wdGlvbnM/OiBzdHJpbmdbXTtcclxuICBjb3JyZWN0X2Fuc3dlcj86IHN0cmluZ1tdO1xyXG4gIHN0YXRlbWVudHM/OiBzdHJpbmdbXTtcclxuICBwYXNzYWdlX2lkPzogbnVtYmVyO1xyXG4gIGNvZGU/OiBzdHJpbmc7XHJcbiAgY3JlYXRlX3VzZXJfaWQ/OiBzdHJpbmc7XHJcbiAgZWRpdF91c2VyX2lkPzogc3RyaW5nO1xyXG4gIGNyZWF0ZV9kYXRlPzogRGF0ZTtcclxuICBlZGl0X2RhdGU/OiBEYXRlO1xyXG4gIHBlbWJhaGFzYW4/OiBzdHJpbmc7XHJcbiAgbGV2ZWw/OiBudW1iZXI7XHJcbiAgZXhhbV9pZF9saXN0PzogbnVtYmVyW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVlc3Rpb25GaWx0ZXJzIHtcclxuICBwYWdlPzogbnVtYmVyO1xyXG4gIGxpbWl0PzogbnVtYmVyO1xyXG4gIHNlYXJjaD86IHN0cmluZztcclxuICBxdWVzdGlvbl90eXBlPzogc3RyaW5nO1xyXG4gIGV4YW1faWQ/OiBudW1iZXI7XHJcbiAgdG9waWM/OiBzdHJpbmc7XHJcbiAgc3VidG9waWM/OiBzdHJpbmc7XHJcbiAgY3JlYXRvcj86IHN0cmluZztcclxuICBzdGFydF9kYXRlPzogc3RyaW5nO1xyXG4gIGVuZF9kYXRlPzogc3RyaW5nO1xyXG4gIHNvcnRLZXk/OiBzdHJpbmc7XHJcbiAgc29ydE9yZGVyPzogc3RyaW5nO1xyXG4gIHVzZXJJZD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBRdWVzdGlvblNlYXJjaFJlc3VsdCB7XHJcbiAgaWQ6IG51bWJlcjtcclxuICBjb2RlOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUGFnZWRRdWVzdGlvbnNSZXN1bHQge1xyXG4gIGRhdGE6IGFueVtdO1xyXG4gIHRvdGFsOiBudW1iZXI7XHJcbiAgdG90YWxQYWdlczogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXN0aW9uUGFzc2FnZSB7XHJcbiAgaWQ/OiBudW1iZXI7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBwYXNzYWdlOiBzdHJpbmc7XHJcbiAgY3JlYXRlX3VzZXJfaWQ/OiBzdHJpbmc7XHJcbiAgdXBkYXRlX3VzZXJfaWQ/OiBzdHJpbmc7XHJcbiAgY3JlYXRlX2RhdGU/OiBEYXRlO1xyXG4gIHVwZGF0ZV9kYXRlPzogRGF0ZTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWZXJpZmljYXRpb25QYWlyIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGNvZGU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWZXJpZmljYXRpb25SZXN1bHQge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgY29kZTogc3RyaW5nO1xyXG4gIHN0YXR1czogJ21hdGNoJyB8ICdpZF9ub3RfZm91bmQnIHwgJ2NvZGVfbWlzbWF0Y2gnO1xyXG4gIGZvdW5kX2NvZGU6IHN0cmluZyB8IG51bGw7XHJcbiAgaXNfbWF0Y2g6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVmVyaWZpY2F0aW9uU3VtbWFyeSB7XHJcbiAgcmVzdWx0czogVmVyaWZpY2F0aW9uUmVzdWx0W107XHJcbiAgc3VtbWFyeToge1xyXG4gICAgdG90YWw6IG51bWJlcjtcclxuICAgIG1hdGNoZWQ6IG51bWJlcjtcclxuICAgIGlkX25vdF9mb3VuZDogbnVtYmVyO1xyXG4gICAgY29kZV9taXNtYXRjaGVkOiBudW1iZXI7XHJcbiAgICBzdWNjZXNzX3JhdGU6IHN0cmluZztcclxuICB9O1xyXG59XHJcblxyXG4vLyBIZWxwZXIgRnVuY3Rpb25zXHJcbmNvbnN0IHNodWZmbGVBcnJheSA9IChhcnJheTogYW55W10sIHNlZWQ6IG51bWJlcik6IGFueVtdID0+IHtcclxuICBjb25zdCByZXN1bHQgPSBbLi4uYXJyYXldO1xyXG4gIGxldCBjdXJyZW50SW5kZXggPSByZXN1bHQubGVuZ3RoO1xyXG4gIGxldCB0ZW1wb3JhcnlWYWx1ZSwgcmFuZG9tSW5kZXg7XHJcblxyXG4gIC8vIFVzZSBzZWVkIGZvciByZXByb2R1Y2libGUgcmFuZG9tbmVzc1xyXG4gIGNvbnN0IHJhbmRvbSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHggPSBNYXRoLnNpbihzZWVkKyspICogMTAwMDA7XHJcbiAgICByZXR1cm4geCAtIE1hdGguZmxvb3IoeCk7XHJcbiAgfTtcclxuXHJcbiAgd2hpbGUgKDAgIT09IGN1cnJlbnRJbmRleCkge1xyXG4gICAgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKHJhbmRvbSgpICogY3VycmVudEluZGV4KTtcclxuICAgIGN1cnJlbnRJbmRleCAtPSAxO1xyXG5cclxuICAgIHRlbXBvcmFyeVZhbHVlID0gcmVzdWx0W2N1cnJlbnRJbmRleF07XHJcbiAgICByZXN1bHRbY3VycmVudEluZGV4XSA9IHJlc3VsdFtyYW5kb21JbmRleF07XHJcbiAgICByZXN1bHRbcmFuZG9tSW5kZXhdID0gdGVtcG9yYXJ5VmFsdWU7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59O1xyXG5cclxuY29uc3QgbWFrZVNlZWQgPSAoZXhhbVN0cmluZzogc3RyaW5nLCBsZXZlbDogbnVtYmVyKTogbnVtYmVyID0+IHtcclxuICBjb25zdCBub25jZSA9IGNyeXB0by5yYW5kb21CeXRlcyg0KS5yZWFkVUludDMyTEUoMCk7XHJcbiAgY29uc3QgaGFzaCA9IGNyeXB0b1xyXG4gICAgLmNyZWF0ZUhhc2goJ3NoYTI1NicpXHJcbiAgICAudXBkYXRlKGAke2V4YW1TdHJpbmd9LSR7bGV2ZWx9LSR7bm9uY2V9YClcclxuICAgIC5kaWdlc3QoKTtcclxuICByZXR1cm4gaGFzaC5yZWFkVUludDMyTEUoMCkgJiAweDdmZmZmZmZmO1xyXG59O1xyXG5cclxuLy8gTW9kZWwgRnVuY3Rpb25zXHJcbmV4cG9ydCBjb25zdCBzZWFyY2hRdWVzdGlvbnNCeUNvZGVPcklkID0gYXN5bmMgKHNlYXJjaDogc3RyaW5nKTogUHJvbWlzZTxRdWVzdGlvblNlYXJjaFJlc3VsdFtdPiA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghc2VhcmNoIHx8IHNlYXJjaC50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBxdWVyeSA9IGBcclxuICAgICAgU0VMRUNUIGlkLCBjb2RlXHJcbiAgICAgIEZST00gICBxdWVzdGlvbnNcclxuICAgICAgV0hFUkUgIGNvZGUgSUxJS0UgJDEgT1IgQ0FTVChpZCBBUyB0ZXh0KSBJTElLRSAkMVxyXG4gICAgICBPUkRFUiAgQlkgbWQ1KGlkOjp0ZXh0KVxyXG4gICAgICBMSU1JVCAgMTU7XHJcbiAgICBgO1xyXG4gICAgY29uc3QgdmFsdWVzID0gW2AlJHtzZWFyY2h9JWBdO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShxdWVyeSwgdmFsdWVzKTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0LnJvd3MubWFwKHJvdyA9PiAoe1xyXG4gICAgICBpZDogcm93LmlkLFxyXG4gICAgICBjb2RlOiByb3cuY29kZVxyXG4gICAgfSkpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWFyY2hpbmcgcXVlc3Rpb25zIGJ5IGNvZGUgb3IgaWQ6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldEFsbFF1ZXN0aW9ucyA9IGFzeW5jICgpOiBQcm9taXNlPFF1ZXN0aW9uW10+ID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeSgnU0VMRUNUICogRlJPTSBxdWVzdGlvbnMgT1JERVIgQlkgaWQnKTtcclxuICAgIHJldHVybiByZXN1bHQucm93cztcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcXVlc3Rpb25zOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRQYWdlZFF1ZXN0aW9ucyA9IGFzeW5jIChmaWx0ZXJzOiBRdWVzdGlvbkZpbHRlcnMpOiBQcm9taXNlPFBhZ2VkUXVlc3Rpb25zUmVzdWx0PiA9PiB7XHJcbiAgY29uc3Qge1xyXG4gICAgcGFnZSA9IDEsXHJcbiAgICBsaW1pdCA9IDUwLFxyXG4gICAgc2VhcmNoID0gJycsXHJcbiAgICBxdWVzdGlvbl90eXBlID0gJ0FsbCcsXHJcbiAgICBleGFtX2lkLFxyXG4gICAgdG9waWMsXHJcbiAgICBzdWJ0b3BpYyxcclxuICAgIGNyZWF0b3IsXHJcbiAgICBzdGFydF9kYXRlLFxyXG4gICAgZW5kX2RhdGUsXHJcbiAgICBzb3J0S2V5ID0gJ3EuaWQnLFxyXG4gICAgc29ydE9yZGVyID0gJ2FzYycsXHJcbiAgICB1c2VySWQsXHJcbiAgfSA9IGZpbHRlcnM7XHJcblxyXG4gIGNvbnN0IG9mZnNldCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcclxuXHJcbiAgY29uc3QgYWxsb3dlZFNvcnRLZXlzID0gW1xyXG4gICAgJ3EuaWQnLFxyXG4gICAgJ3F1ZXN0aW9uX3R5cGUnLFxyXG4gICAgJ3F1ZXN0aW9uX3RleHQnLFxyXG4gICAgJ2NvcnJlY3RfYW5zd2VyJyxcclxuICAgICd0b3BpYycsXHJcbiAgICAnc3VidG9waWMnLFxyXG4gICAgJ2NyZWF0b3InLFxyXG4gICAgJ2NyZWF0ZV9kYXRlJyxcclxuICAgICdlZGl0b3InLFxyXG4gICAgJ2VkaXRfZGF0ZScsXHJcbiAgXTtcclxuXHJcbiAgY29uc3QgdmFsaWRhdGVkU29ydEtleSA9IGFsbG93ZWRTb3J0S2V5cy5pbmNsdWRlcyhzb3J0S2V5KSA/IHNvcnRLZXkgOiAncS5pZCc7XHJcbiAgY29uc3QgdmFsaWRhdGVkU29ydE9yZGVyID0gc29ydE9yZGVyLnRvTG93ZXJDYXNlKCkgPT09ICdkZXNjJyA/ICdERVNDJyA6ICdBU0MnO1xyXG5cclxuICBjb25zdCBiYXNlU2VsZWN0Q2xhdXNlID0gYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICBxLmlkLFxyXG4gICAgICBBUlJBWV9BR0coZS5pZCkgQVMgZXhhbV9pZCxcclxuICAgICAgQVJSQVlfQUdHKGUubmFtZSkgQVMgZXhhbV9uYW1lLFxyXG4gICAgICBxLnF1ZXN0aW9uX3R5cGUsXHJcbiAgICAgIHEucXVlc3Rpb25fdGV4dCxcclxuICAgICAgcS5vcHRpb25zLFxyXG4gICAgICBxLmNvcnJlY3RfYW5zd2VyLFxyXG4gICAgICBldC5uYW1lIEFTIHN1YnRvcGljLFxyXG4gICAgICBldDIubmFtZSBBUyB0b3BpYyxcclxuICAgICAgQ09BTEVTQ0UodS5uYW1lLCAnYWRtaW4nKSBBUyBjcmVhdG9yLFxyXG4gICAgICBxLmNyZWF0ZV9kYXRlOjpkYXRlIEFTIGNyZWF0ZV9kYXRlLFxyXG4gICAgICB1Mi5uYW1lIEFTIGVkaXRvcixcclxuICAgICAgcS5lZGl0X2RhdGU6OmRhdGUgQVMgZWRpdF9kYXRlLFxyXG4gICAgICBxLnBlbWJhaGFzYW4sXHJcbiAgICAgIHBnLnRpdGxlLFxyXG4gICAgICBwZy5wYXNzYWdlXHJcbiAgYDtcclxuXHJcbiAgY29uc3QgYmFzZUZyb21DbGF1c2UgPSBgXHJcbiAgICBGUk9NIHF1ZXN0aW9ucyBxXHJcbiAgICBMRUZUIEpPSU4gZXhhbXMgZSBPTiBxLmlkID0gQU5ZKGUucXVlc3Rpb25faWRfbGlzdClcclxuICAgIExFRlQgSk9JTiB2X2Rhc2hib2FyZF91c2VyZGF0YSB1IE9OIHUudXNlcmlkID0gcS5jcmVhdGVfdXNlcl9pZFxyXG4gICAgTEVGVCBKT0lOIHZfZGFzaGJvYXJkX3VzZXJkYXRhIHUyIE9OIHUyLnVzZXJpZCA9IHEuZWRpdF91c2VyX2lkXHJcbiAgICBMRUZUIEpPSU4gZXhhbV90eXBlcyBldCBPTiBldC5pZCA9IHEucXVlc3Rpb25fdG9waWNfdHlwZVxyXG4gICAgTEVGVCBKT0lOIGV4YW1fdHlwZXMgZXQyIE9OIGV0Mi5pZCA9IGV0LmlkXHJcbiAgICBMRUZUIEpvaW4gcXVlc3Rpb25fcGFzc2FnZXMgcGcgb24gcGcuaWQgPSBxLnBhc3NhZ2VfaWRcclxuICBgO1xyXG5cclxuICBsZXQgd2hlcmVDbGF1c2VzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGxldCB2YWx1ZXM6IGFueVtdID0gW107XHJcbiAgbGV0IHZhbHVlSW5kZXggPSAxO1xyXG4gIGxldCBmaWx0ZXJQYXJhbXNDb3VudCA9IDA7XHJcblxyXG4gIGlmIChzZWFyY2gpIHtcclxuICAgIHdoZXJlQ2xhdXNlcy5wdXNoKGAocS5xdWVzdGlvbl90ZXh0IElMSUtFICQke3ZhbHVlSW5kZXh9IE9SIENBU1QocS5pZCBBUyBURVhUKSBJTElLRSAkJHt2YWx1ZUluZGV4fSlgKTtcclxuICAgIHZhbHVlcy5wdXNoKGAlJHtzZWFyY2h9JWApO1xyXG4gICAgdmFsdWVJbmRleCsrO1xyXG4gICAgZmlsdGVyUGFyYW1zQ291bnQrKztcclxuICB9XHJcblxyXG4gIGlmIChxdWVzdGlvbl90eXBlICYmIHF1ZXN0aW9uX3R5cGUgIT09ICdBbGwnKSB7XHJcbiAgICB3aGVyZUNsYXVzZXMucHVzaChgcS5xdWVzdGlvbl90eXBlID0gJCR7dmFsdWVJbmRleH1gKTtcclxuICAgIHZhbHVlcy5wdXNoKHF1ZXN0aW9uX3R5cGUpO1xyXG4gICAgdmFsdWVJbmRleCsrO1xyXG4gICAgZmlsdGVyUGFyYW1zQ291bnQrKztcclxuICB9XHJcblxyXG4gIGlmIChleGFtX2lkKSB7XHJcbiAgICB3aGVyZUNsYXVzZXMucHVzaChgcS5pZCA9IEFOWShTRUxFQ1QgcXVlc3Rpb25faWRfbGlzdCBGUk9NIGV4YW1zIFdIRVJFIGlkID0gJCR7dmFsdWVJbmRleH0pYCk7XHJcbiAgICB2YWx1ZXMucHVzaChleGFtX2lkKTtcclxuICAgIHZhbHVlSW5kZXgrKztcclxuICAgIGZpbHRlclBhcmFtc0NvdW50Kys7XHJcbiAgfVxyXG5cclxuICBpZiAodG9waWMpIHtcclxuICAgIHdoZXJlQ2xhdXNlcy5wdXNoKGBldDIubmFtZSA9ICQke3ZhbHVlSW5kZXh9YCk7XHJcbiAgICB2YWx1ZXMucHVzaCh0b3BpYyk7XHJcbiAgICB2YWx1ZUluZGV4Kys7XHJcbiAgICBmaWx0ZXJQYXJhbXNDb3VudCsrO1xyXG4gIH1cclxuXHJcbiAgaWYgKHN1YnRvcGljKSB7XHJcbiAgICB3aGVyZUNsYXVzZXMucHVzaChgZXQubmFtZSA9ICQke3ZhbHVlSW5kZXh9YCk7XHJcbiAgICB2YWx1ZXMucHVzaChzdWJ0b3BpYyk7XHJcbiAgICB2YWx1ZUluZGV4Kys7XHJcbiAgICBmaWx0ZXJQYXJhbXNDb3VudCsrO1xyXG4gIH1cclxuXHJcbiAgaWYgKGNyZWF0b3IpIHtcclxuICAgIHdoZXJlQ2xhdXNlcy5wdXNoKGB1Lm5hbWUgPSAkJHt2YWx1ZUluZGV4fWApO1xyXG4gICAgdmFsdWVzLnB1c2goY3JlYXRvcik7XHJcbiAgICB2YWx1ZUluZGV4Kys7XHJcbiAgICBmaWx0ZXJQYXJhbXNDb3VudCsrO1xyXG4gIH1cclxuXHJcbiAgaWYgKHN0YXJ0X2RhdGUpIHtcclxuICAgIHdoZXJlQ2xhdXNlcy5wdXNoKGBxLmNyZWF0ZV9kYXRlOjpkYXRlID49ICQke3ZhbHVlSW5kZXh9YCk7XHJcbiAgICB2YWx1ZXMucHVzaChzdGFydF9kYXRlKTtcclxuICAgIHZhbHVlSW5kZXgrKztcclxuICAgIGZpbHRlclBhcmFtc0NvdW50Kys7XHJcbiAgfVxyXG5cclxuICBpZiAoZW5kX2RhdGUpIHtcclxuICAgIHdoZXJlQ2xhdXNlcy5wdXNoKGBxLmNyZWF0ZV9kYXRlOjpkYXRlIDw9ICQke3ZhbHVlSW5kZXh9YCk7XHJcbiAgICB2YWx1ZXMucHVzaChlbmRfZGF0ZSk7XHJcbiAgICB2YWx1ZUluZGV4Kys7XHJcbiAgICBmaWx0ZXJQYXJhbXNDb3VudCsrO1xyXG4gIH1cclxuXHJcbiAgaWYgKHVzZXJJZCkge1xyXG4gICAgd2hlcmVDbGF1c2VzLnB1c2goYChxLmNyZWF0ZV91c2VyX2lkID0gJCR7dmFsdWVJbmRleH0gT1IgcS5lZGl0X3VzZXJfaWQgPSAkJHt2YWx1ZUluZGV4fSlgKTtcclxuICAgIHZhbHVlcy5wdXNoKHVzZXJJZCk7XHJcbiAgICB2YWx1ZUluZGV4Kys7XHJcbiAgICBmaWx0ZXJQYXJhbXNDb3VudCsrO1xyXG4gIH1cclxuXHJcbiAgbGV0IHdoZXJlQ2xhdXNlID0gd2hlcmVDbGF1c2VzLmxlbmd0aCA+IDAgXHJcbiAgICA/ICcgV0hFUkUgJyArIHdoZXJlQ2xhdXNlcy5qb2luKCcgQU5EICcpXHJcbiAgICA6ICcnO1xyXG5cclxuICBjb25zdCBtYWluUXVlcnkgPSBgXHJcbiAgICAke2Jhc2VTZWxlY3RDbGF1c2V9XHJcbiAgICAke2Jhc2VGcm9tQ2xhdXNlfVxyXG4gICAgJHt3aGVyZUNsYXVzZX1cclxuICAgIEdST1VQIEJZIHEuaWQsIHEucXVlc3Rpb25fdHlwZSwgcS5xdWVzdGlvbl90ZXh0LCBxLm9wdGlvbnMsIHEuY29ycmVjdF9hbnN3ZXIsIFxyXG4gICAgICAgICAgICBldC5uYW1lLCBldDIubmFtZSwgdS5uYW1lLCBxLmNyZWF0ZV9kYXRlLCB1Mi5uYW1lLCBxLmVkaXRfZGF0ZSwgcS5wZW1iYWhhc2FuLFxyXG4gICAgICBwZy50aXRsZSxcclxuICAgICAgcGcucGFzc2FnZVxyXG4gICAgT1JERVIgQlkgJHt2YWxpZGF0ZWRTb3J0S2V5fSAke3ZhbGlkYXRlZFNvcnRPcmRlcn1cclxuICAgIExJTUlUICQke3ZhbHVlSW5kZXh9IE9GRlNFVCAkJHt2YWx1ZUluZGV4ICsgMX1cclxuICBgO1xyXG4gIHZhbHVlcy5wdXNoKGxpbWl0LCBvZmZzZXQpO1xyXG5cclxuICBjb25zdCBjb3VudFF1ZXJ5ID0gYFxyXG4gICAgU0VMRUNUIENPVU5UKCopIEFTIHRvdGFsXHJcbiAgICBGUk9NIChcclxuICAgICAgU0VMRUNUIHEuaWRcclxuICAgICAgJHtiYXNlRnJvbUNsYXVzZX1cclxuICAgICAgJHt3aGVyZUNsYXVzZX1cclxuICAgICAgR1JPVVAgQlkgcS5pZFxyXG4gICAgKSBBUyBzdWJcclxuICBgO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgW2RhdGFSZXN1bHQsIGNvdW50UmVzdWx0XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgcG9vbC5xdWVyeShtYWluUXVlcnksIHZhbHVlcyksXHJcbiAgICAgIHBvb2wucXVlcnkoY291bnRRdWVyeSwgdmFsdWVzLnNsaWNlKDAsIGZpbHRlclBhcmFtc0NvdW50KSksXHJcbiAgICBdKTtcclxuXHJcbiAgICBjb25zdCB0b3RhbCA9IHBhcnNlSW50KGNvdW50UmVzdWx0LnJvd3NbMF0udG90YWwsIDEwKTtcclxuICAgIGNvbnN0IHRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodG90YWwgLyBsaW1pdCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZGF0YTogZGF0YVJlc3VsdC5yb3dzLFxyXG4gICAgICB0b3RhbCxcclxuICAgICAgdG90YWxQYWdlcyxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBhZ2VkIHF1ZXN0aW9uczonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0VG90YWxRdWVzdGlvbnMgPSBhc3luYyAoeyBzZWFyY2gsIHR5cGUsIGV4YW1JZCwgdXNlcklkIH06IHtcclxuICBzZWFyY2g/OiBzdHJpbmc7XHJcbiAgdHlwZT86IHN0cmluZztcclxuICBleGFtSWQ/OiBudW1iZXI7XHJcbiAgdXNlcklkPzogc3RyaW5nO1xyXG59KTogUHJvbWlzZTxudW1iZXI+ID0+IHtcclxuICB0cnkge1xyXG4gICAgbGV0IHF1ZXJ5ID0gYFxyXG4gICAgICBTRUxFQ1QgQ09VTlQoRElTVElOQ1QgcS5pZCkgQVMgdG90YWxcclxuICAgICAgRlJPTSBxdWVzdGlvbnMgcVxyXG4gICAgICBMRUZUIEpPSU4gZXhhbXMgZSBPTiBxLmlkID0gQU5ZKGUucXVlc3Rpb25faWRfbGlzdClcclxuICAgICAgV0hFUkUgMT0xXHJcbiAgICBgO1xyXG4gICAgY29uc3QgcGFyYW1zOiBhbnlbXSA9IFtdO1xyXG4gICAgbGV0IHBhcmFtSW5kZXggPSAxO1xyXG5cclxuICAgIGlmIChzZWFyY2gpIHtcclxuICAgICAgcXVlcnkgKz0gYCBBTkQgKHEucXVlc3Rpb25fdGV4dCBJTElLRSAkJHtwYXJhbUluZGV4fSBPUiBDQVNUKHEuaWQgQVMgVEVYVCkgSUxJS0UgJCR7cGFyYW1JbmRleH0pYDtcclxuICAgICAgcGFyYW1zLnB1c2goYCUke3NlYXJjaH0lYCk7XHJcbiAgICAgIHBhcmFtSW5kZXgrKztcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZSAmJiB0eXBlICE9PSAnQWxsJykge1xyXG4gICAgICBxdWVyeSArPSBgIEFORCBxLnF1ZXN0aW9uX3R5cGUgPSAkJHtwYXJhbUluZGV4fWA7XHJcbiAgICAgIHBhcmFtcy5wdXNoKHR5cGUpO1xyXG4gICAgICBwYXJhbUluZGV4Kys7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGV4YW1JZCkge1xyXG4gICAgICBxdWVyeSArPSBgIEFORCBxLmlkID0gQU5ZKFNFTEVDVCBxdWVzdGlvbl9pZF9saXN0IEZST00gZXhhbXMgV0hFUkUgaWQgPSAkJHtwYXJhbUluZGV4fSlgO1xyXG4gICAgICBwYXJhbXMucHVzaChleGFtSWQpO1xyXG4gICAgICBwYXJhbUluZGV4Kys7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHVzZXJJZCkge1xyXG4gICAgICBxdWVyeSArPSBgIEFORCAocS5jcmVhdGVfdXNlcl9pZCA9ICQke3BhcmFtSW5kZXh9IE9SIHEuZWRpdF91c2VyX2lkID0gJCR7cGFyYW1JbmRleH0pYDtcclxuICAgICAgcGFyYW1zLnB1c2godXNlcklkKTtcclxuICAgICAgcGFyYW1JbmRleCsrO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkocXVlcnksIHBhcmFtcyk7XHJcbiAgICByZXR1cm4gcGFyc2VJbnQocmVzdWx0LnJvd3NbMF0udG90YWwsIDEwKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdG90YWwgcXVlc3Rpb25zOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXREaWFnbm9zdGljUXVlc3Rpb25zQnlFeGFtU3RyaW5nID0gYXN5bmMgKGV4YW1fc3RyaW5nOiBzdHJpbmcpID0+IHtcclxuICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZXhhbVJlcyA9IGF3YWl0IGNsaWVudC5xdWVyeShcclxuICAgICAgYFNFTEVDVCBpZCwgZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgbGV2ZWxfMV9xdWVzdGlvbl9xdHksXHJcbiAgICAgICAgICAgICAgbGV2ZWxfMl9xdWVzdGlvbl9xdHksXHJcbiAgICAgICAgICAgICAgbGV2ZWxfM19xdWVzdGlvbl9xdHksXHJcbiAgICAgICAgICAgICAgbGV2ZWxfNF9xdWVzdGlvbl9xdHksIFxyXG4gICAgICAgICAgICAgIGxldmVsXzVfcXVlc3Rpb25fcXR5LFxyXG4gICAgICAgICAgICAgIHF1ZXN0aW9uX2lkX2xpc3RcclxuICAgICAgIEZST00gICBleGFtc1xyXG4gICAgICAgV0hFUkUgIGV4YW1fc3RyaW5nID0gJDFgLFxyXG4gICAgICBbZXhhbV9zdHJpbmddXHJcbiAgICApO1xyXG4gICAgaWYgKCFleGFtUmVzLnJvd0NvdW50KSB0aHJvdyBuZXcgRXJyb3IoJ0V4YW0gbm90IGZvdW5kJyk7XHJcbiAgICBjb25zdCBleGFtID0gZXhhbVJlcy5yb3dzWzBdO1xyXG5cclxuICAgIGNvbnN0IHFSZXMgPSBhd2FpdCBjbGllbnQucXVlcnkoXHJcbiAgICAgIGBTRUxFQ1QgKlxyXG4gICAgICAgRlJPTSAgIHF1ZXN0aW9uc1xyXG4gICAgICAgV0hFUkUgIGlkID0gQU5ZKCQxOjppbnRbXSlgLFxyXG4gICAgICBbZXhhbS5xdWVzdGlvbl9pZF9saXN0XVxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBncm91cGVkOiB7IFtrZXk6IG51bWJlcl06IGFueVtdIH0gPSB7fTtcclxuICAgIGZvciAoY29uc3QgcSBvZiBxUmVzLnJvd3MpIHtcclxuICAgICAgY29uc3QgbHZsID0gcS5sZXZlbDtcclxuICAgICAgKGdyb3VwZWRbbHZsXSA/Pz0gW10pLnB1c2gocSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3BlYyA9IFtcclxuICAgICAgeyBsdmw6IDEsIHF0eTogZXhhbS5sZXZlbF8xX3F1ZXN0aW9uX3F0eSB9LFxyXG4gICAgICB7IGx2bDogMiwgcXR5OiBleGFtLmxldmVsXzJfcXVlc3Rpb25fcXR5IH0sXHJcbiAgICAgIHsgbHZsOiAzLCBxdHk6IGV4YW0ubGV2ZWxfM19xdWVzdGlvbl9xdHkgfSxcclxuICAgICAgeyBsdmw6IDQsIHF0eTogZXhhbS5sZXZlbF80X3F1ZXN0aW9uX3F0eSB9LFxyXG4gICAgICB7IGx2bDogNSwgcXR5OiBleGFtLmxldmVsXzVfcXVlc3Rpb25fcXR5IH0sXHJcbiAgICBdO1xyXG5cclxuICAgIGNvbnN0IGZpbmFsUXVlc3Rpb25zOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgIGZvciAoY29uc3QgeyBsdmwsIHF0eSB9IG9mIHNwZWMpIHtcclxuICAgICAgY29uc3QgcG9vbEZvckx2bCA9IGdyb3VwZWRbbHZsXSA/PyBbXTtcclxuICAgICAgaWYgKCFwb29sRm9yTHZsLmxlbmd0aCkgY29udGludWU7XHJcblxyXG4gICAgICBjb25zdCBzaHVmZmxlZCA9IHNodWZmbGVBcnJheShwb29sRm9yTHZsLCBtYWtlU2VlZChleGFtX3N0cmluZywgbHZsKSk7XHJcbiAgICAgIGZpbmFsUXVlc3Rpb25zLnB1c2goLi4uc2h1ZmZsZWQuc2xpY2UoMCwgcXR5IHx8IHNodWZmbGVkLmxlbmd0aCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGR1cmF0aW9uOiBleGFtLmR1cmF0aW9uLFxyXG4gICAgICBxdWVzdGlvbnM6IGZpbmFsUXVlc3Rpb25zLm1hcCgocSkgPT4gKHtcclxuICAgICAgICBpZDogcS5pZCxcclxuICAgICAgICBsZXZlbDogcS5sZXZlbCxcclxuICAgICAgICB0eXBlOiBxLnF1ZXN0aW9uX3R5cGUsXHJcbiAgICAgICAgcXVlc3Rpb246IHEucXVlc3Rpb25fdGV4dCxcclxuICAgICAgICBvcHRpb25zOiBxLm9wdGlvbnMsXHJcbiAgICAgICAgY29ycmVjdDogcS5jb3JyZWN0X2Fuc3dlcixcclxuICAgICAgICBzdGF0ZW1lbnRzOiBxLnN0YXRlbWVudHMsXHJcbiAgICAgIH0pKSxcclxuICAgIH07XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGNsaWVudC5yZWxlYXNlKCk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFF1ZXN0aW9uc0J5RXhhbVN0cmluZyA9IGFzeW5jIChleGFtX3N0cmluZzogc3RyaW5nKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGV4YW1SZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIGV4YW1zIFdIRVJFIGV4YW1fc3RyaW5nID0gJDEnLCBbZXhhbV9zdHJpbmddKTtcclxuICAgIFxyXG4gICAgaWYgKGV4YW1SZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeGFtIG5vdCBmb3VuZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGV4YW1JZCA9IGV4YW1SZXN1bHQucm93c1swXS5pZDtcclxuXHJcbiAgICBjb25zdCBxdWVyeSA9IGBcclxuICAgICAgU0VMRUNUIHEuKlxyXG4gICAgICBGUk9NIHF1ZXN0aW9ucyBxXHJcbiAgICAgIFdIRVJFIHEuaWQgPSBBTlkgKFxyXG4gICAgICAgIFNFTEVDVCB1bm5lc3QocXVlc3Rpb25faWRfbGlzdClcclxuICAgICAgICBGUk9NIGV4YW1zXHJcbiAgICAgICAgV0hFUkUgaWQgPSAkMVxyXG4gICAgICApXHJcbiAgICAgIE9SREVSIEJZIHEuaWRcclxuICAgIGA7XHJcblxyXG4gICAgY29uc3QgcXVlc3Rpb25zUmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShxdWVyeSwgW2V4YW1JZF0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGR1cmF0aW9uOiBleGFtUmVzdWx0LnJvd3NbMF0uZHVyYXRpb24sXHJcbiAgICAgIHF1ZXN0aW9uczogcXVlc3Rpb25zUmVzdWx0LnJvd3MubWFwKChxOiBhbnkpID0+ICh7XHJcbiAgICAgICAgaWQ6IHEuaWQsXHJcbiAgICAgICAgdHlwZTogcS5xdWVzdGlvbl90eXBlLFxyXG4gICAgICAgIHF1ZXN0aW9uOiBxLnF1ZXN0aW9uX3RleHQsXHJcbiAgICAgICAgb3B0aW9uczogcS5vcHRpb25zLFxyXG4gICAgICAgIGNvcnJlY3Q6IHEuY29ycmVjdF9hbnN3ZXIsXHJcbiAgICAgICAgc3RhdGVtZW50czogcS5zdGF0ZW1lbnRzXHJcbiAgICAgIH0pKVxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcXVlc3Rpb25zIGJ5IGV4YW1fc3RyaW5nOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRRdWVzdGlvbnNCeUV4YW1JZCA9IGFzeW5jIChleGFtSWQ6IG51bWJlcikgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBxdWVyeSA9IGBcclxuICAgICAgU0VMRUNUIHEuKlxyXG4gICAgICBGUk9NIHF1ZXN0aW9ucyBxXHJcbiAgICAgIFdIRVJFIHEuaWQgPSBBTlkgKFxyXG4gICAgICAgIFNFTEVDVCB1bm5lc3QocXVlc3Rpb25faWRfbGlzdClcclxuICAgICAgICBGUk9NIGV4YW1zXHJcbiAgICAgICAgV0hFUkUgaWQgPSAkMVxyXG4gICAgICApXHJcbiAgICAgIE9SREVSIEJZIHEuaWRcclxuICAgIGA7XHJcblxyXG4gICAgY29uc3QgcXVlc3Rpb25zUmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShxdWVyeSwgW2V4YW1JZF0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHF1ZXN0aW9uczogcXVlc3Rpb25zUmVzdWx0LnJvd3MubWFwKChxOiBhbnkpID0+ICh7XHJcbiAgICAgICAgaWQ6IHEuaWQsXHJcbiAgICAgICAgdHlwZTogcS5xdWVzdGlvbl90eXBlLFxyXG4gICAgICAgIHF1ZXN0aW9uOiBxLnF1ZXN0aW9uX3RleHQsXHJcbiAgICAgICAgb3B0aW9uczogcS5vcHRpb25zLFxyXG4gICAgICAgIGNvcnJlY3Q6IHEuY29ycmVjdF9hbnN3ZXIsXHJcbiAgICAgICAgc3RhdGVtZW50czogcS5zdGF0ZW1lbnRzXHJcbiAgICAgIH0pKVxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcXVlc3Rpb25zIGJ5IGV4YW1JZDonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0UXVlc3Rpb25CeUlkID0gYXN5bmMgKGlkOiBudW1iZXIpOiBQcm9taXNlPFF1ZXN0aW9uIHwgbnVsbD4gPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIHF1ZXN0aW9ucyBXSEVSRSBpZCA9ICQxJywgW2lkXSk7XHJcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF0gfHwgbnVsbDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcXVlc3Rpb246JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFF1ZXN0aW9uQnlVSWQgPSBhc3luYyAoaWQ6IG51bWJlcikgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KCdTRUxFQ1QgaWQsIHF1ZXN0aW9uX3R5cGUsIHF1ZXN0aW9uX3RleHQsb3B0aW9ucywgc3RhdGVtZW50cywgbGV2ZWwgRlJPTSBxdWVzdGlvbnMgV0hFUkUgaWQgPSAkMScsIFtpZF0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzWzBdIHx8IG51bGw7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHF1ZXN0aW9uOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVRdWVzdGlvbiA9IGFzeW5jIChxdWVzdGlvbkRhdGE6IFBhcnRpYWw8UXVlc3Rpb24+LCBjcmVhdGVfdXNlcl9pZDogc3RyaW5nKTogUHJvbWlzZTxRdWVzdGlvbj4gPT4ge1xyXG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkZWZhdWx0UGVtYmFoYXNhbiA9IGBcclxuICAgIDxkaXY+XHJcbiAgICAgIDxoND5QZW1iYWhhc2FuIGJlbHVtIHRlcnNlZGlhIHNlY2FyYSBzcGVzaWZpay48L2g0PlxyXG4gICAgICA8cD5TaWxha2FuIGNlayBrZW1iYWxpIHNvYWwgZGFuIGRpc2t1c2lrYW4gZGVuZ2FuIHBlbmdhamFyIGF0YXUgdGVtYW4gc2VrZWxhcy48L3A+XHJcbiAgICA8L2Rpdj5cclxuICAgIGA7XHJcblxyXG4gICAgY29uc3QgaW5zZXJ0UXVlcnkgPSBgXHJcbiAgICAgIElOU0VSVCBJTlRPIHF1ZXN0aW9ucyBcclxuICAgICAgICAocXVlc3Rpb25fdG9waWNfdHlwZSwgcXVlc3Rpb25fdHlwZSwgcXVlc3Rpb25fdGV4dCwgb3B0aW9ucywgY29ycmVjdF9hbnN3ZXIsIHN0YXRlbWVudHMsIHBhc3NhZ2VfaWQsIGNvZGUsIGNyZWF0ZV91c2VyX2lkLCBwZW1iYWhhc2FuLCBsZXZlbCkgXHJcbiAgICAgIFZBTFVFUyBcclxuICAgICAgICAoJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4LCAkOSwgJDEwLCAkMTEpIFxyXG4gICAgICBSRVRVUk5JTkcgKlxyXG4gICAgYDtcclxuXHJcbiAgICBjb25zdCB7IFxyXG4gICAgICBxdWVzdGlvbl90b3BpY190eXBlLFxyXG4gICAgICBxdWVzdGlvbl90eXBlLCBcclxuICAgICAgcXVlc3Rpb25fdGV4dCwgXHJcbiAgICAgIG9wdGlvbnMsIFxyXG4gICAgICBjb3JyZWN0X2Fuc3dlciwgXHJcbiAgICAgIHN0YXRlbWVudHMsXHJcbiAgICAgIHBhc3NhZ2VfaWQsXHJcbiAgICAgIGNvZGUsXHJcbiAgICAgIHBlbWJhaGFzYW4sXHJcbiAgICAgIGxldmVsXHJcbiAgICB9ID0gcXVlc3Rpb25EYXRhO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudC5xdWVyeShpbnNlcnRRdWVyeSwgW1xyXG4gICAgICBxdWVzdGlvbl90b3BpY190eXBlLFxyXG4gICAgICBxdWVzdGlvbl90eXBlLFxyXG4gICAgICBxdWVzdGlvbl90ZXh0LFxyXG4gICAgICBvcHRpb25zLFxyXG4gICAgICBjb3JyZWN0X2Fuc3dlcixcclxuICAgICAgc3RhdGVtZW50cyxcclxuICAgICAgcGFzc2FnZV9pZCxcclxuICAgICAgY29kZSxcclxuICAgICAgY3JlYXRlX3VzZXJfaWQsXHJcbiAgICAgIHBlbWJhaGFzYW4gfHwgZGVmYXVsdFBlbWJhaGFzYW4sXHJcbiAgICAgIGxldmVsXHJcbiAgICBdKTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF07XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBxdWVzdGlvbjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgY2xpZW50LnJlbGVhc2UoKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlQnVsa1F1ZXN0aW9ucyA9IGFzeW5jIChxdWVzdGlvbnM6IFBhcnRpYWw8UXVlc3Rpb24+W10sIGNyZWF0ZV91c2VyX2lkOiBzdHJpbmcpOiBQcm9taXNlPFF1ZXN0aW9uW10+ID0+IHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgcG9vbC5xdWVyeSgnQkVHSU4nKTtcclxuICAgIFxyXG4gICAgY29uc3QgY3JlYXRlZFF1ZXN0aW9uczogUXVlc3Rpb25bXSA9IFtdO1xyXG4gICAgXHJcbiAgICBjb25zdCBpbnNlcnRRdWVyeSA9IGBcclxuICAgICAgSU5TRVJUIElOVE8gcXVlc3Rpb25zIFxyXG4gICAgICAgIChleGFtX2lkLCBxdWVzdGlvbl90eXBlLCBxdWVzdGlvbl90ZXh0LCBvcHRpb25zLCBjb3JyZWN0X2Fuc3dlciwgc3RhdGVtZW50cywgY3JlYXRlX3VzZXJfaWQsIHF1ZXN0aW9uX3RvcGljX3R5cGUsIGVkaXRfZGF0ZSkgXHJcbiAgICAgIFZBTFVFUyBcclxuICAgICAgICAoJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4LCBudWxsKSBcclxuICAgICAgUkVUVVJOSU5HICpcclxuICAgIGA7XHJcblxyXG4gICAgZm9yIChjb25zdCBxdWVzdGlvbiBvZiBxdWVzdGlvbnMpIHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShpbnNlcnRRdWVyeSwgW1xyXG4gICAgICAgIChxdWVzdGlvbiBhcyBhbnkpLmV4YW1faWQsXHJcbiAgICAgICAgcXVlc3Rpb24ucXVlc3Rpb25fdHlwZSxcclxuICAgICAgICBxdWVzdGlvbi5xdWVzdGlvbl90ZXh0LFxyXG4gICAgICAgIHF1ZXN0aW9uLm9wdGlvbnMsXHJcbiAgICAgICAgcXVlc3Rpb24uY29ycmVjdF9hbnN3ZXIsXHJcbiAgICAgICAgcXVlc3Rpb24uc3RhdGVtZW50cyxcclxuICAgICAgICBjcmVhdGVfdXNlcl9pZCxcclxuICAgICAgICBxdWVzdGlvbi5xdWVzdGlvbl90b3BpY190eXBlXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgY3JlYXRlZFF1ZXN0aW9ucy5wdXNoKHJlc3VsdC5yb3dzWzBdKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KCdDT01NSVQnKTtcclxuICAgIHJldHVybiBjcmVhdGVkUXVlc3Rpb25zO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgYXdhaXQgcG9vbC5xdWVyeSgnUk9MTEJBQ0snKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGJ1bGsgcXVlc3Rpb24gY3JlYXRpb246JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHVwZGF0ZVF1ZXN0aW9uID0gYXN5bmMgKGlkOiBudW1iZXIsIHF1ZXN0aW9uRGF0YTogUGFydGlhbDxRdWVzdGlvbj4sIGVkaXRfdXNlcl9pZDogc3RyaW5nKTogUHJvbWlzZTxRdWVzdGlvbiB8IG51bGw+ID0+IHtcclxuICBjb25zdCB7IFxyXG4gICAgcXVlc3Rpb25fdGV4dCwgXHJcbiAgICBxdWVzdGlvbl90eXBlLCBcclxuICAgIG9wdGlvbnMsIFxyXG4gICAgY29ycmVjdF9hbnN3ZXIsIFxyXG4gICAgc3RhdGVtZW50cywgXHJcbiAgICBxdWVzdGlvbl90b3BpY190eXBlXHJcbiAgfSA9IHF1ZXN0aW9uRGF0YTtcclxuICBcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgYFVQREFURSBxdWVzdGlvbnMgXHJcbiAgICAgIFNFVCBcclxuICAgICAgICBxdWVzdGlvbl90ZXh0ID0gJDEsIFxyXG4gICAgICAgIHF1ZXN0aW9uX3R5cGUgPSAkMiwgXHJcbiAgICAgICAgb3B0aW9ucyA9ICQzOjp0ZXh0W10sIFxyXG4gICAgICAgIGNvcnJlY3RfYW5zd2VyID0gJDQ6OnRleHRbXSwgXHJcbiAgICAgICAgc3RhdGVtZW50cyA9ICQ1Ojp0ZXh0W10sXHJcbiAgICAgICAgZWRpdF91c2VyX2lkID0gJDYsXHJcbiAgICAgICAgZWRpdF9kYXRlID0gTk9XKCksXHJcbiAgICAgICAgcXVlc3Rpb25fdG9waWNfdHlwZSA9ICQ4XHJcbiAgICAgIFdIRVJFIGlkID0gJDcgXHJcbiAgICAgIFJFVFVSTklORyAqYCxcclxuICAgICAgW3F1ZXN0aW9uX3RleHQsIHF1ZXN0aW9uX3R5cGUsIG9wdGlvbnMsIGNvcnJlY3RfYW5zd2VyLCBzdGF0ZW1lbnRzLCBlZGl0X3VzZXJfaWQsIGlkLCBxdWVzdGlvbl90b3BpY190eXBlXVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQucm93c1swXSB8fCBudWxsO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBxdWVzdGlvbjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdXBkYXRlQnVsa1F1ZXN0aW9ucyA9IGFzeW5jIChxdWVzdGlvbnM6IFBhcnRpYWw8UXVlc3Rpb24+W10sIGVkaXRfdXNlcl9pZDogc3RyaW5nKTogUHJvbWlzZTxRdWVzdGlvbltdPiA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IHBvb2wucXVlcnkoJ0JFR0lOJyk7XHJcbiAgICBcclxuICAgIGNvbnN0IHVwZGF0ZWRRdWVzdGlvbnM6IFF1ZXN0aW9uW10gPSBbXTtcclxuICAgIFxyXG4gICAgY29uc3QgdXBkYXRlUXVlcnkgPSBgXHJcbiAgICAgIFVQREFURSBxdWVzdGlvbnMgXHJcbiAgICAgIFNFVCBcclxuICAgICAgICBleGFtX2lkID0gJDEsXHJcbiAgICAgICAgcXVlc3Rpb25fdHlwZSA9ICQyLFxyXG4gICAgICAgIHF1ZXN0aW9uX3RleHQgPSAkMyxcclxuICAgICAgICBvcHRpb25zID0gJDQsXHJcbiAgICAgICAgY29ycmVjdF9hbnN3ZXIgPSAkNSxcclxuICAgICAgICBzdGF0ZW1lbnRzID0gJDYsXHJcbiAgICAgICAgZWRpdF91c2VyX2lkID0gJDcsXHJcbiAgICAgICAgcXVlc3Rpb25fdG9waWNfdHlwZSA9ICQ4LFxyXG4gICAgICAgIGVkaXRfZGF0ZSA9IENVUlJFTlRfVElNRVNUQU1QXHJcbiAgICAgIFdIRVJFIGlkID0gJDlcclxuICAgICAgUkVUVVJOSU5HICpcclxuICAgIGA7XHJcblxyXG4gICAgZm9yIChjb25zdCBxdWVzdGlvbiBvZiBxdWVzdGlvbnMpIHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeSh1cGRhdGVRdWVyeSwgW1xyXG4gICAgICAgIChxdWVzdGlvbiBhcyBhbnkpLmV4YW1faWQsXHJcbiAgICAgICAgcXVlc3Rpb24ucXVlc3Rpb25fdHlwZSxcclxuICAgICAgICBxdWVzdGlvbi5xdWVzdGlvbl90ZXh0LFxyXG4gICAgICAgIHF1ZXN0aW9uLm9wdGlvbnMsXHJcbiAgICAgICAgcXVlc3Rpb24uY29ycmVjdF9hbnN3ZXIsXHJcbiAgICAgICAgcXVlc3Rpb24uc3RhdGVtZW50cyxcclxuICAgICAgICBlZGl0X3VzZXJfaWQsXHJcbiAgICAgICAgcXVlc3Rpb24ucXVlc3Rpb25fdG9waWNfdHlwZSxcclxuICAgICAgICBxdWVzdGlvbi5pZFxyXG4gICAgICBdKTtcclxuXHJcbiAgICAgIGlmIChyZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFF1ZXN0aW9uIHdpdGggSUQgJHtxdWVzdGlvbi5pZH0gbm90IGZvdW5kYCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHVwZGF0ZWRRdWVzdGlvbnMucHVzaChyZXN1bHQucm93c1swXSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgcG9vbC5xdWVyeSgnQ09NTUlUJyk7XHJcbiAgICByZXR1cm4gdXBkYXRlZFF1ZXN0aW9ucztcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGF3YWl0IHBvb2wucXVlcnkoJ1JPTExCQUNLJyk7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBidWxrIHF1ZXN0aW9uIHVwZGF0ZTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYXBwZW5kRXhhbUlkVG9RdWVzdGlvbiA9IGFzeW5jIChxdWVzdGlvbklkOiBudW1iZXIsIGV4YW1JZDogbnVtYmVyKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHF1ZXN0aW9uQ2hlY2sgPSBhd2FpdCBwb29sLnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIHF1ZXN0aW9ucyBXSEVSRSBpZCA9ICQxJywgW3F1ZXN0aW9uSWRdKTtcclxuICAgIGlmIChxdWVzdGlvbkNoZWNrLnJvd3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignUXVlc3Rpb24gbm90IGZvdW5kJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZXhhbUNoZWNrID0gYXdhaXQgcG9vbC5xdWVyeSgnU0VMRUNUICogRlJPTSBleGFtcyBXSEVSRSBpZCA9ICQxJywgW2V4YW1JZF0pO1xyXG4gICAgaWYgKGV4YW1DaGVjay5yb3dzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4YW0gbm90IGZvdW5kJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgYFVQREFURSBxdWVzdGlvbnNcclxuICAgICAgU0VUIGV4YW1faWRfbGlzdCA9IGFycmF5X2FwcGVuZChDT0FMRVNDRShleGFtX2lkX2xpc3QsICd7fScpLCAkMTo6SU5URUdFUilcclxuICAgICAgV0hFUkUgaWQgPSAkMlxyXG4gICAgICBSRVRVUk5JTkcgKmAsXHJcbiAgICAgIFtleGFtSWQsIHF1ZXN0aW9uSWRdXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlkOiByZXN1bHQucm93c1swXS5pZCxcclxuICAgICAgZXhhbV9pZF9saXN0OiByZXN1bHQucm93c1swXS5leGFtX2lkX2xpc3QsXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhcHBlbmRpbmcgZXhhbV9pZCB0byBxdWVzdGlvbjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZGVsZXRlUXVlc3Rpb24gPSBhc3luYyAoaWQ6IG51bWJlcik6IFByb21pc2U8UXVlc3Rpb24gfCBudWxsPiA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgICdERUxFVEUgRlJPTSBxdWVzdGlvbnMgV0hFUkUgaWQgPSAkMSBSRVRVUk5JTkcgKicsXHJcbiAgICAgIFtpZF1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF0gfHwgbnVsbDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgcXVlc3Rpb246JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gUXVlc3Rpb24gUGFzc2FnZXMgRnVuY3Rpb25zXHJcbmV4cG9ydCBjb25zdCBzZWFyY2hQYXNzYWdlcyA9IGFzeW5jIChzZWFyY2g6IHN0cmluZyk6IFByb21pc2U8UXVlc3Rpb25QYXNzYWdlW10+ID0+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFzZWFyY2ggfHwgc2VhcmNoLnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHF1ZXJ5ID0gYFxyXG4gICAgICBTRUxFQ1QgaWQsIHRpdGxlLCBwYXNzYWdlXHJcbiAgICAgIEZST00gcXVlc3Rpb25fcGFzc2FnZXNcclxuICAgICAgV0hFUkUgaWQ6OnRleHQgSUxJS0UgJDEgT1IgdGl0bGUgSUxJS0UgJDFcclxuICAgICAgT1JERVIgQlkgaWRcclxuICAgICAgTElNSVQgMTBcclxuICAgIGA7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSBbYCUke3NlYXJjaH0lYF07XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KHF1ZXJ5LCB2YWx1ZXMpO1xyXG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWFyY2hpbmcgcGFzc2FnZXM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldFBhc3NhZ2VCeUlkID0gYXN5bmMgKGlkOiBudW1iZXIpOiBQcm9taXNlPFF1ZXN0aW9uUGFzc2FnZSB8IG51bGw+ID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeSgnU0VMRUNUICogRlJPTSBxdWVzdGlvbl9wYXNzYWdlcyBXSEVSRSBpZCA9ICQxJywgW2lkXSk7XHJcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF0gfHwgbnVsbDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcGFzc2FnZTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlUGFzc2FnZSA9IGFzeW5jIChwYXNzYWdlRGF0YTogUXVlc3Rpb25QYXNzYWdlLCBjcmVhdGVfdXNlcl9pZDogc3RyaW5nKTogUHJvbWlzZTxRdWVzdGlvblBhc3NhZ2U+ID0+IHtcclxuICBjb25zdCB7IHRpdGxlLCBwYXNzYWdlIH0gPSBwYXNzYWdlRGF0YTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgYElOU0VSVCBJTlRPIHF1ZXN0aW9uX3Bhc3NhZ2VzIFxyXG4gICAgICAgICh0aXRsZSwgcGFzc2FnZSwgY3JlYXRlX3VzZXJfaWQsIGNyZWF0ZV9kYXRlKSBcclxuICAgICAgVkFMVUVTIFxyXG4gICAgICAgICgkMSwgJDIsICQzLCBOT1coKSkgXHJcbiAgICAgIFJFVFVSTklORyAqYCxcclxuICAgICAgW3RpdGxlLCBwYXNzYWdlLCBjcmVhdGVfdXNlcl9pZF1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHBhc3NhZ2U6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHVwZGF0ZVBhc3NhZ2UgPSBhc3luYyAoaWQ6IG51bWJlciwgcGFzc2FnZURhdGE6IFF1ZXN0aW9uUGFzc2FnZSwgdXBkYXRlX3VzZXJfaWQ6IHN0cmluZyk6IFByb21pc2U8UXVlc3Rpb25QYXNzYWdlIHwgbnVsbD4gPT4ge1xyXG4gIGNvbnN0IHsgdGl0bGUsIHBhc3NhZ2UgfSA9IHBhc3NhZ2VEYXRhO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICBgVVBEQVRFIHF1ZXN0aW9uX3Bhc3NhZ2VzXHJcbiAgICAgIFNFVCBcclxuICAgICAgICB0aXRsZSA9ICQxLFxyXG4gICAgICAgIHBhc3NhZ2UgPSAkMixcclxuICAgICAgICB1cGRhdGVfdXNlcl9pZCA9ICQzLFxyXG4gICAgICAgIHVwZGF0ZV9kYXRlID0gTk9XKClcclxuICAgICAgV0hFUkUgaWQgPSAkNFxyXG4gICAgICBSRVRVUk5JTkcgKmAsXHJcbiAgICAgIFt0aXRsZSwgcGFzc2FnZSwgdXBkYXRlX3VzZXJfaWQsIGlkXVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQucm93c1swXSB8fCBudWxsO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwYXNzYWdlOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2ZXJpZnlJZENvZGVQYWlycyA9IGFzeW5jIChwYWlyczogVmVyaWZpY2F0aW9uUGFpcltdKTogUHJvbWlzZTxWZXJpZmljYXRpb25TdW1tYXJ5PiA9PiB7XHJcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdHM6IFZlcmlmaWNhdGlvblJlc3VsdFtdID0gW107XHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xyXG4gICAgICBjb25zdCB7IGlkLCBjb2RlIH0gPSBwYWlyO1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc2VsZWN0UXVlcnkgPSBgXHJcbiAgICAgICAgU0VMRUNUIGlkLCBjb2RlIFxyXG4gICAgICAgIEZST00gcXVlc3Rpb25zIFxyXG4gICAgICAgIFdIRVJFIGlkID0gJDFcclxuICAgICAgYDtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudC5xdWVyeShzZWxlY3RRdWVyeSwgW2lkXSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAocmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgIGNvZGU6IGNvZGUsXHJcbiAgICAgICAgICBzdGF0dXM6ICdpZF9ub3RfZm91bmQnLFxyXG4gICAgICAgICAgZm91bmRfY29kZTogbnVsbCxcclxuICAgICAgICAgIGlzX21hdGNoOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGZvdW5kUXVlc3Rpb24gPSByZXN1bHQucm93c1swXTtcclxuICAgICAgICBjb25zdCBpc01hdGNoID0gZm91bmRRdWVzdGlvbi5jb2RlID09PSBjb2RlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICBjb2RlOiBjb2RlLFxyXG4gICAgICAgICAgc3RhdHVzOiBpc01hdGNoID8gJ21hdGNoJyA6ICdjb2RlX21pc21hdGNoJyxcclxuICAgICAgICAgIGZvdW5kX2NvZGU6IGZvdW5kUXVlc3Rpb24uY29kZSxcclxuICAgICAgICAgIGlzX21hdGNoOiBpc01hdGNoXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgdG90YWxQYWlycyA9IHJlc3VsdHMubGVuZ3RoO1xyXG4gICAgY29uc3QgbWF0Y2hlZFBhaXJzID0gcmVzdWx0cy5maWx0ZXIociA9PiByLmlzX21hdGNoKS5sZW5ndGg7XHJcbiAgICBjb25zdCBub3RGb3VuZElkcyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5zdGF0dXMgPT09ICdpZF9ub3RfZm91bmQnKS5sZW5ndGg7XHJcbiAgICBjb25zdCBtaXNtYXRjaGVkQ29kZXMgPSByZXN1bHRzLmZpbHRlcihyID0+IHIuc3RhdHVzID09PSAnY29kZV9taXNtYXRjaCcpLmxlbmd0aDtcclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVzdWx0czogcmVzdWx0cyxcclxuICAgICAgc3VtbWFyeToge1xyXG4gICAgICAgIHRvdGFsOiB0b3RhbFBhaXJzLFxyXG4gICAgICAgIG1hdGNoZWQ6IG1hdGNoZWRQYWlycyxcclxuICAgICAgICBpZF9ub3RfZm91bmQ6IG5vdEZvdW5kSWRzLFxyXG4gICAgICAgIGNvZGVfbWlzbWF0Y2hlZDogbWlzbWF0Y2hlZENvZGVzLFxyXG4gICAgICAgIHN1Y2Nlc3NfcmF0ZTogdG90YWxQYWlycyA+IDAgPyAoKG1hdGNoZWRQYWlycyAvIHRvdGFsUGFpcnMpICogMTAwKS50b0ZpeGVkKDIpICsgJyUnIDogJzAlJ1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdmVyaWZ5aW5nIElELUNvZGUgcGFpcnM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGNsaWVudC5yZWxlYXNlKCk7XHJcbiAgfVxyXG59OyJdLCJuYW1lcyI6WyJwb29sIiwiY3J5cHRvIiwic2h1ZmZsZUFycmF5IiwiYXJyYXkiLCJzZWVkIiwicmVzdWx0IiwiY3VycmVudEluZGV4IiwibGVuZ3RoIiwidGVtcG9yYXJ5VmFsdWUiLCJyYW5kb21JbmRleCIsInJhbmRvbSIsIngiLCJNYXRoIiwic2luIiwiZmxvb3IiLCJtYWtlU2VlZCIsImV4YW1TdHJpbmciLCJsZXZlbCIsIm5vbmNlIiwicmFuZG9tQnl0ZXMiLCJyZWFkVUludDMyTEUiLCJoYXNoIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsInNlYXJjaFF1ZXN0aW9uc0J5Q29kZU9ySWQiLCJzZWFyY2giLCJ0cmltIiwicXVlcnkiLCJ2YWx1ZXMiLCJyb3dzIiwibWFwIiwicm93IiwiaWQiLCJjb2RlIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0QWxsUXVlc3Rpb25zIiwiZ2V0UGFnZWRRdWVzdGlvbnMiLCJmaWx0ZXJzIiwicGFnZSIsImxpbWl0IiwicXVlc3Rpb25fdHlwZSIsImV4YW1faWQiLCJ0b3BpYyIsInN1YnRvcGljIiwiY3JlYXRvciIsInN0YXJ0X2RhdGUiLCJlbmRfZGF0ZSIsInNvcnRLZXkiLCJzb3J0T3JkZXIiLCJ1c2VySWQiLCJvZmZzZXQiLCJhbGxvd2VkU29ydEtleXMiLCJ2YWxpZGF0ZWRTb3J0S2V5IiwiaW5jbHVkZXMiLCJ2YWxpZGF0ZWRTb3J0T3JkZXIiLCJ0b0xvd2VyQ2FzZSIsImJhc2VTZWxlY3RDbGF1c2UiLCJiYXNlRnJvbUNsYXVzZSIsIndoZXJlQ2xhdXNlcyIsInZhbHVlSW5kZXgiLCJmaWx0ZXJQYXJhbXNDb3VudCIsInB1c2giLCJ3aGVyZUNsYXVzZSIsImpvaW4iLCJtYWluUXVlcnkiLCJjb3VudFF1ZXJ5IiwiZGF0YVJlc3VsdCIsImNvdW50UmVzdWx0IiwiUHJvbWlzZSIsImFsbCIsInNsaWNlIiwidG90YWwiLCJwYXJzZUludCIsInRvdGFsUGFnZXMiLCJjZWlsIiwiZGF0YSIsImdldFRvdGFsUXVlc3Rpb25zIiwidHlwZSIsImV4YW1JZCIsInBhcmFtcyIsInBhcmFtSW5kZXgiLCJnZXREaWFnbm9zdGljUXVlc3Rpb25zQnlFeGFtU3RyaW5nIiwiZXhhbV9zdHJpbmciLCJjbGllbnQiLCJjb25uZWN0IiwiZXhhbVJlcyIsInJvd0NvdW50IiwiRXJyb3IiLCJleGFtIiwicVJlcyIsInF1ZXN0aW9uX2lkX2xpc3QiLCJncm91cGVkIiwicSIsImx2bCIsInNwZWMiLCJxdHkiLCJsZXZlbF8xX3F1ZXN0aW9uX3F0eSIsImxldmVsXzJfcXVlc3Rpb25fcXR5IiwibGV2ZWxfM19xdWVzdGlvbl9xdHkiLCJsZXZlbF80X3F1ZXN0aW9uX3F0eSIsImxldmVsXzVfcXVlc3Rpb25fcXR5IiwiZmluYWxRdWVzdGlvbnMiLCJwb29sRm9yTHZsIiwic2h1ZmZsZWQiLCJkdXJhdGlvbiIsInF1ZXN0aW9ucyIsInF1ZXN0aW9uIiwicXVlc3Rpb25fdGV4dCIsIm9wdGlvbnMiLCJjb3JyZWN0IiwiY29ycmVjdF9hbnN3ZXIiLCJzdGF0ZW1lbnRzIiwicmVsZWFzZSIsImdldFF1ZXN0aW9uc0J5RXhhbVN0cmluZyIsImV4YW1SZXN1bHQiLCJxdWVzdGlvbnNSZXN1bHQiLCJnZXRRdWVzdGlvbnNCeUV4YW1JZCIsImdldFF1ZXN0aW9uQnlJZCIsImdldFF1ZXN0aW9uQnlVSWQiLCJjcmVhdGVRdWVzdGlvbiIsInF1ZXN0aW9uRGF0YSIsImNyZWF0ZV91c2VyX2lkIiwiZGVmYXVsdFBlbWJhaGFzYW4iLCJpbnNlcnRRdWVyeSIsInF1ZXN0aW9uX3RvcGljX3R5cGUiLCJwYXNzYWdlX2lkIiwicGVtYmFoYXNhbiIsImNyZWF0ZUJ1bGtRdWVzdGlvbnMiLCJjcmVhdGVkUXVlc3Rpb25zIiwidXBkYXRlUXVlc3Rpb24iLCJlZGl0X3VzZXJfaWQiLCJ1cGRhdGVCdWxrUXVlc3Rpb25zIiwidXBkYXRlZFF1ZXN0aW9ucyIsInVwZGF0ZVF1ZXJ5IiwiYXBwZW5kRXhhbUlkVG9RdWVzdGlvbiIsInF1ZXN0aW9uSWQiLCJxdWVzdGlvbkNoZWNrIiwiZXhhbUNoZWNrIiwiZXhhbV9pZF9saXN0IiwiZGVsZXRlUXVlc3Rpb24iLCJzZWFyY2hQYXNzYWdlcyIsImdldFBhc3NhZ2VCeUlkIiwiY3JlYXRlUGFzc2FnZSIsInBhc3NhZ2VEYXRhIiwidGl0bGUiLCJwYXNzYWdlIiwidXBkYXRlUGFzc2FnZSIsInVwZGF0ZV91c2VyX2lkIiwidmVyaWZ5SWRDb2RlUGFpcnMiLCJwYWlycyIsInJlc3VsdHMiLCJwYWlyIiwic2VsZWN0UXVlcnkiLCJzdGF0dXMiLCJmb3VuZF9jb2RlIiwiaXNfbWF0Y2giLCJmb3VuZFF1ZXN0aW9uIiwiaXNNYXRjaCIsInRvdGFsUGFpcnMiLCJtYXRjaGVkUGFpcnMiLCJmaWx0ZXIiLCJyIiwibm90Rm91bmRJZHMiLCJtaXNtYXRjaGVkQ29kZXMiLCJzdW1tYXJ5IiwibWF0Y2hlZCIsImlkX25vdF9mb3VuZCIsImNvZGVfbWlzbWF0Y2hlZCIsInN1Y2Nlc3NfcmF0ZSIsInRvRml4ZWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./models/questions.model.ts\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fquestions%2Fpaged&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cquestions%5Cpaged.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fquestions%2Fpaged&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cquestions%5Cpaged.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_questions_paged_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\questions\\paged.ts */ \"(api-node)/./pages/api/questions/paged.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_questions_paged_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_questions_paged_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_questions_paged_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_questions_paged_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/questions/paged\",\n        pathname: \"/api/questions/paged\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_questions_paged_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGcXVlc3Rpb25zJTJGcGFnZWQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3F1ZXN0aW9ucyU1Q3BhZ2VkLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQzhEO0FBQzlEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQywwREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsMERBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxccXVlc3Rpb25zXFxcXHBhZ2VkLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9xdWVzdGlvbnMvcGFnZWRcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9xdWVzdGlvbnMvcGFnZWRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fquestions%2Fpaged&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cquestions%5Cpaged.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/questions/paged.ts":
/*!**************************************!*\
  !*** ./pages/api/questions/paged.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_middleware_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/middleware/auth */ \"(api-node)/./lib/middleware/auth.ts\");\n/* harmony import */ var _controllers_questions_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../controllers/questions.controller */ \"(api-node)/./controllers/questions.controller.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_controllers_questions_controller__WEBPACK_IMPORTED_MODULE_1__]);\n_controllers_questions_controller__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// pages/api/questions/paged.ts\n\n\nasync function handler(req, res) {\n    // Apply authentication middleware\n    await (0,_lib_middleware_auth__WEBPACK_IMPORTED_MODULE_0__.runMiddleware)(req, res, _lib_middleware_auth__WEBPACK_IMPORTED_MODULE_0__.authenticateJWT);\n    switch(req.method){\n        case 'GET':\n            return _controllers_questions_controller__WEBPACK_IMPORTED_MODULE_1__.getPagedQuestions(req, res);\n        default:\n            res.setHeader('Allow', [\n                'GET'\n            ]);\n            return res.status(405).json({\n                error: `Method ${req.method} Not Allowed`\n            });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9xdWVzdGlvbnMvcGFnZWQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsK0JBQStCO0FBRXFFO0FBQ3BCO0FBRWpFLGVBQWVHLFFBQVFDLEdBQXlCLEVBQUVDLEdBQW9CO0lBQ25GLGtDQUFrQztJQUNsQyxNQUFNTCxtRUFBYUEsQ0FBQ0ksS0FBS0MsS0FBS0osaUVBQWVBO0lBRTdDLE9BQVFHLElBQUlFLE1BQU07UUFDaEIsS0FBSztZQUNILE9BQU9KLGdGQUFvQyxDQUFDRSxLQUFLQztRQUVuRDtZQUNFQSxJQUFJRyxTQUFTLENBQUMsU0FBUztnQkFBQzthQUFNO1lBQzlCLE9BQU9ILElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU8sQ0FBQyxPQUFPLEVBQUVQLElBQUlFLE1BQU0sQ0FBQyxZQUFZLENBQUM7WUFBQztJQUM1RTtBQUNGIiwic291cmNlcyI6WyJEOlxcTGF0aWhhblxcTmV3IGZvbGRlciAoMilcXEZFXFwxXFxGRVxcTmV4dFxcZnV0dXJlZHVcXHBhZ2VzXFxhcGlcXHF1ZXN0aW9uc1xccGFnZWQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL3F1ZXN0aW9ucy9wYWdlZC50c1xyXG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IHJ1bk1pZGRsZXdhcmUsIGF1dGhlbnRpY2F0ZUpXVCwgQXV0aGVudGljYXRlZFJlcXVlc3QgfSBmcm9tICcuLi8uLi8uLi9saWIvbWlkZGxld2FyZS9hdXRoJztcclxuaW1wb3J0ICogYXMgcXVlc3Rpb25Db250cm9sbGVyIGZyb20gJy4uLy4uLy4uL2NvbnRyb2xsZXJzL3F1ZXN0aW9ucy5jb250cm9sbGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBBdXRoZW50aWNhdGVkUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICAvLyBBcHBseSBhdXRoZW50aWNhdGlvbiBtaWRkbGV3YXJlXHJcbiAgYXdhaXQgcnVuTWlkZGxld2FyZShyZXEsIHJlcywgYXV0aGVudGljYXRlSldUKTtcclxuXHJcbiAgc3dpdGNoIChyZXEubWV0aG9kKSB7XHJcbiAgICBjYXNlICdHRVQnOlxyXG4gICAgICByZXR1cm4gcXVlc3Rpb25Db250cm9sbGVyLmdldFBhZ2VkUXVlc3Rpb25zKHJlcSwgcmVzKTtcclxuXHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnR0VUJ10pO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogYE1ldGhvZCAke3JlcS5tZXRob2R9IE5vdCBBbGxvd2VkYCB9KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsicnVuTWlkZGxld2FyZSIsImF1dGhlbnRpY2F0ZUpXVCIsInF1ZXN0aW9uQ29udHJvbGxlciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJnZXRQYWdlZFF1ZXN0aW9ucyIsInNldEhlYWRlciIsInN0YXR1cyIsImpzb24iLCJlcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/questions/paged.ts\n");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "p-queue":
/*!**************************!*\
  !*** external "p-queue" ***!
  \**************************/
/***/ ((module) => {

module.exports = import("p-queue");;

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fquestions%2Fpaged&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cquestions%5Cpaged.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();