"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/users/login";
exports.ids = ["pages/api/users/login"];
exports.modules = {

/***/ "(api-node)/./controllers/user.controller.ts":
/*!****************************************!*\
  !*** ./controllers/user.controller.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _models_user_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../models/user.model */ \"(api-node)/./models/user.model.ts\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"axios\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_models_user_model__WEBPACK_IMPORTED_MODULE_0__, axios__WEBPACK_IMPORTED_MODULE_2__]);\n([_models_user_model__WEBPACK_IMPORTED_MODULE_0__, axios__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// controllers/user.controller.ts\n\n\n\nconst secretKey = process.env.JWT_SECRET_KEY;\nconst refreshTokenSecret = process.env.REFRESH_TOKEN_SECRET;\nconst refreshTokens = [];\n// User Controller Class\nclass UserController {\n    // Create user with CAPTCHA\n    static async create(req, res) {\n        try {\n            if (!req.body) {\n                return res.status(400).json({\n                    message: \"Content cannot be empty!\"\n                });\n            }\n            const { username, email, password, captchaToken } = req.body;\n            // Verify CAPTCHA\n            try {\n                const response = await axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(`https://www.google.com/recaptcha/api/siteverify?secret=${process.env.RECAPTCHA_SECRET_KEY}&response=${captchaToken}`);\n                const { success } = response.data;\n                if (!success) {\n                    return res.status(400).json({\n                        message: \"CAPTCHA verification failed. Please try again.\"\n                    });\n                }\n            } catch (error) {\n                console.error(\"Error verifying CAPTCHA:\", error);\n                return res.status(500).json({\n                    message: \"Error verifying CAPTCHA.\"\n                });\n            }\n            // Create user\n            const user = {\n                username,\n                email,\n                password,\n                role: 'student'\n            };\n            const data = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create(user);\n            res.status(201).json(data);\n        } catch (error) {\n            res.status(500).json({\n                message: error.message || \"Some error occurred while creating the User.\"\n            });\n        }\n    }\n    // Get user status\n    static async getStatus(req, res) {\n        try {\n            const userId1 = req.user.id;\n            const cartCount = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCartCount(parseInt(userId1));\n            const unpaidCount = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getUnpaidCount(parseInt(userId1));\n            return res.json({\n                success: true,\n                cartCount,\n                unpaidCount\n            });\n        } catch (error) {\n            console.error(error);\n            return res.status(500).json({\n                success: false,\n                message: error.message\n            });\n        }\n    }\n    // Create user without CAPTCHA\n    static async createNoCaptcha(req, res) {\n        try {\n            if (!req.body) {\n                return res.status(400).json({\n                    message: \"Content cannot be empty!\"\n                });\n            }\n            const { username, fullName, email, password, role } = req.body;\n            // Validate input data\n            if (!username || !email || !password || !fullName) {\n                return res.status(400).json({\n                    message: \"Username, full name, email, and password are required!\"\n                });\n            }\n            // Default role if not provided\n            const userRole = role || 'student';\n            // Create user\n            const user = {\n                username,\n                fullName,\n                email,\n                password,\n                role: userRole\n            };\n            const data = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create(user);\n            res.status(201).json(data);\n        } catch (error) {\n            res.status(500).json({\n                message: error.message || \"Some error occurred while creating the User.\"\n            });\n        }\n    }\n    // Update user\n    static async updateUser(req, res) {\n        try {\n            console.log('start update user');\n            const userId1 = req.query.id;\n            const { username, email, oldPassword, newPassword } = req.body;\n            console.log(req.body);\n            console.log(req.query.id);\n            if (!username || !email || !oldPassword) {\n                return res.status(400).json({\n                    message: 'Username, email, and old password are required.'\n                });\n            }\n            const data = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateUser(parseInt(userId1), {\n                username,\n                email,\n                oldPassword,\n                newPassword\n            });\n            res.status(200).json({\n                message: 'User updated successfully.',\n                data\n            });\n        } catch (error) {\n            if (error.kind === 'not_found') {\n                return res.status(404).json({\n                    message: 'User not found.'\n                });\n            }\n            if (error.message === 'Old password does not match') {\n                return res.status(400).json({\n                    message: 'Invalid old password.'\n                });\n            }\n            return res.status(500).json({\n                message: 'Error updating user.'\n            });\n        }\n    }\n    // Delete user by ID\n    static async deleteUser(req, res) {\n        try {\n            const userId1 = req.query.id;\n            await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deleteUser(parseInt(userId1));\n            res.status(200).json({\n                message: `User with id ${userId1} was deleted successfully.`\n            });\n        } catch (error) {\n            if (error.kind === \"not_found\") {\n                return res.status(404).json({\n                    message: `User not found with id ${userId}`\n                });\n            }\n            return res.status(500).json({\n                message: `Could not delete user with id ${userId}`\n            });\n        }\n    }\n    // Login user\n    static async login(req, res) {\n        try {\n            const { username, password } = req.body;\n            const user = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findByUsername(username);\n            if (!user) {\n                return res.status(404).json({\n                    message: \"User not found.\"\n                });\n            }\n            // Check if password matches\n            if (user.password !== password) {\n                return res.status(401).json({\n                    message: \"Invalid password.\"\n                });\n            }\n            await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateLastLogin(username);\n            // Create JWT token if login successful\n            const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n                id: user.id,\n                username: user.username,\n                role: user.role\n            }, secretKey, {\n                expiresIn: '6h'\n            });\n            const refreshToken = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n                id: user.id,\n                username: user.username,\n                role: user.role\n            }, refreshTokenSecret, {\n                expiresIn: '30d'\n            });\n            refreshTokens.push(refreshToken);\n            // Send token in cookie\n            res.setHeader('Set-Cookie', [\n                `authToken=${token}; HttpOnly; Secure=${\"development\" === 'production'}; SameSite=Strict; Max-Age=${6 * 60 * 60}; Path=/`,\n                `refreshToken=${refreshToken}; HttpOnly; Secure=${\"development\" === 'production'}; SameSite=Strict; Max-Age=${30 * 24 * 60 * 60}; Path=/`\n            ]);\n            res.json({\n                message: \"Login successful!\",\n                username: user.username,\n                role: user.role,\n                token\n            });\n        } catch (error) {\n            console.error(\"Error during login:\", error);\n            res.status(500).json({\n                message: \"An error occurred during login.\"\n            });\n        }\n    }\n    // Refresh token\n    static async refreshToken(req, res) {\n        try {\n            const refreshToken = req.cookies.refreshToken;\n            if (!refreshToken || !refreshTokens.includes(refreshToken)) {\n                return res.status(403).json({\n                    message: 'Forbidden'\n                });\n            }\n            const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(refreshToken, refreshTokenSecret);\n            const newToken = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n                id: decoded.id,\n                username: decoded.username,\n                role: decoded.role\n            }, secretKey, {\n                expiresIn: '6h'\n            });\n            res.setHeader('Set-Cookie', `authToken=${newToken}; HttpOnly; Secure=${\"development\" === 'production'}; SameSite=Strict; Max-Age=${6 * 60 * 60}; Path=/`);\n            res.json({\n                token: newToken\n            });\n        } catch (error) {\n            return res.status(403).json({\n                message: 'Forbidden'\n            });\n        }\n    }\n    // Logout user\n    static async logout(req, res) {\n        try {\n            const refreshToken = req.cookies.refreshToken;\n            const index = refreshTokens.indexOf(refreshToken);\n            if (index > -1) {\n                refreshTokens.splice(index, 1);\n            }\n            res.setHeader('Set-Cookie', [\n                `authToken=; HttpOnly; Secure=${\"development\" === 'production'}; SameSite=Strict; Max-Age=0; Path=/`,\n                `refreshToken=; HttpOnly; Secure=${\"development\" === 'production'}; SameSite=Strict; Max-Age=0; Path=/`\n            ]);\n            res.json({\n                message: \"Logout successful!\"\n            });\n        } catch (error) {\n            res.status(500).json({\n                message: error.message\n            });\n        }\n    }\n    // Find user by username\n    static async findByUsername(req, res) {\n        try {\n            const username = req.query.username;\n            console.log('Finding user by username:', username);\n            const user = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findByUsername(username);\n            console.log('User found:', user);\n            res.json({\n                user_id: user.user_id,\n                id: user.id\n            });\n        } catch (error) {\n            console.error('Error finding user by username:', error);\n            if (error.kind === 'not_found') {\n                return res.status(404).json({\n                    message: 'User not found.'\n                });\n            }\n            return res.status(500).json({\n                message: error.message || 'Some error occurred while finding the User.'\n            });\n        }\n    }\n    // Find user by ID\n    static async findById(req, res) {\n        try {\n            const id = req.query.id;\n            console.log('Finding user by id:', id);\n            const user = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findById(parseInt(id));\n            console.log('User found:', user);\n            res.json({\n                id: user.id,\n                username: user.username,\n                email: user.email\n            });\n        } catch (error) {\n            console.error('Error finding user by id:', error);\n            if (error.kind === 'not_found') {\n                return res.status(404).json({\n                    message: 'User not found.'\n                });\n            }\n            return res.status(500).json({\n                message: error.message || 'Some error occurred while finding the User.'\n            });\n        }\n    }\n    // Get user data by role\n    static async getUserDataByRole(req, res) {\n        try {\n            const role = req.query.role;\n            console.log('Finding users by role:', role);\n            const users = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getUserDataByRole(role);\n            console.log('Users found:', users);\n            res.json(users);\n        } catch (error) {\n            console.error('Error finding users by role:', error);\n            if (error.kind === 'not_found') {\n                return res.status(404).json({\n                    message: 'No users found for this role.'\n                });\n            }\n            return res.status(500).json({\n                message: error.message || 'Some error occurred while finding the Users.'\n            });\n        }\n    }\n    // Search users by role and name\n    static async searchUsersByRoleAndName(req, res) {\n        try {\n            const { searchTerm, role, limit = 10 } = req.body;\n            console.log(req.body);\n            // Validate input\n            if (!searchTerm || typeof searchTerm !== 'string') {\n                return res.status(400).json({\n                    message: \"searchTerm diperlukan dan harus berupa string.\"\n                });\n            }\n            if (!role || typeof role !== 'string') {\n                return res.status(400).json({\n                    message: \"Role diperlukan dan harus berupa string.\"\n                });\n            }\n            // Validate limit\n            const parsedLimit = parseInt(limit.toString());\n            if (isNaN(parsedLimit) || parsedLimit < 1) {\n                return res.status(400).json({\n                    message: \"Limit harus berupa angka positif.\"\n                });\n            }\n            const users = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].searchUsersByRoleAndName(role, searchTerm, parsedLimit);\n            res.status(200).json({\n                users\n            });\n        } catch (error) {\n            console.error('Error searching users:', error);\n            res.status(500).json({\n                message: \"Terjadi kesalahan pada server.\"\n            });\n        }\n    }\n    // Search users by multiple roles and name\n    static async searchUsersByMultipleRolesAndName(req, res) {\n        try {\n            const { searchTerm, roles } = req.body;\n            if (!searchTerm || typeof searchTerm !== 'string') {\n                return res.status(400).json({\n                    message: \"searchTerm diperlukan dan harus berupa string.\"\n                });\n            }\n            if (!Array.isArray(roles) || roles.length === 0) {\n                return res.status(400).json({\n                    message: \"Roles harus berupa array dengan setidaknya satu item.\"\n                });\n            }\n            const parsedRoles = JSON.parse(JSON.stringify(roles));\n            const users = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].searchUsersByRolesAndName(parsedRoles, searchTerm);\n            res.status(200).json({\n                users\n            });\n        } catch (error) {\n            console.error('Error searching users:', error);\n            res.status(500).json({\n                message: \"Terjadi kesalahan pada server.\"\n            });\n        }\n    }\n    // Get paginated users\n    static async getPaginatedUsers(req, res) {\n        try {\n            const params = {\n                sortField: req.query.sortField || 'id',\n                sortOrder: req.query.sortOrder || 'asc',\n                search: req.query.search || '',\n                page: parseInt(req.query.page || '1'),\n                limit: parseInt(req.query.limit || '10'),\n                role: req.query.role || '',\n                education: req.query.education || '',\n                city: req.query.city || '',\n                province: req.query.province || '',\n                status: req.query.status || ''\n            };\n            const { users, total } = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPaginatedUsers(params);\n            res.json({\n                data: users,\n                total,\n                page: parseInt(params.page?.toString() || '1'),\n                totalPages: Math.ceil(total / (params.limit || 10))\n            });\n        } catch (error) {\n            console.error('Get Paginated Users Error:', error);\n            res.status(500).json({\n                message: 'Server Error'\n            });\n        }\n    }\n    // Get total users and growth by role\n    static async getTotalUsersAndGrowthByRole(req, res) {\n        try {\n            const role = req.query.role;\n            if (!role) {\n                return res.status(400).json({\n                    message: 'Role parameter is required.'\n                });\n            }\n            const data = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getTotalUsersAndGrowthByRole(role);\n            res.json(data);\n        } catch (error) {\n            res.status(500).json({\n                message: error.message || 'Some error occurred while fetching total users and growth.'\n            });\n        }\n    }\n    // Get active users and growth by role\n    static async getActiveUsersAndGrowthByRole(req, res) {\n        try {\n            const role = req.query.role;\n            if (!role) {\n                return res.status(400).json({\n                    message: 'Role parameter is required'\n                });\n            }\n            const data = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getActiveUsersAndGrowthByRole(role);\n            res.json(data);\n        } catch (error) {\n            console.error('Error fetching active users and growth:', error);\n            return res.status(500).json({\n                message: 'Error retrieving active users and growth'\n            });\n        }\n    }\n    // Get new users and growth\n    static async getNewUsersAndGrowth(req, res) {\n        try {\n            const role = req.query.role;\n            if (!role) {\n                return res.status(400).json({\n                    message: \"Role parameter is required.\"\n                });\n            }\n            const data = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getNewUsersAndGrowthByRole(role);\n            res.json(data);\n        } catch (error) {\n            console.error(\"Error fetching new users and growth:\", error);\n            return res.status(500).json({\n                message: \"An error occurred while fetching new users and growth.\"\n            });\n        }\n    }\n    // Get revenue per user\n    static async getRevenuePerUser(req, res) {\n        try {\n            const role = req.query.role;\n            if (!role) {\n                return res.status(400).json({\n                    message: \"Role parameter is required.\"\n                });\n            }\n            const data = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getRevenuePerUser(role);\n            res.json(data);\n        } catch (error) {\n            return res.status(500).json({\n                message: \"Error fetching revenue per user.\"\n            });\n        }\n    }\n    // Get student pendidikan distribution\n    static async getStudentPendidikanDistribution(req, res) {\n        try {\n            const data = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getStudentPendidikanDistribution();\n            res.json(data);\n        } catch (error) {\n            res.status(500).json({\n                message: error.message || \"Some error occurred while retrieving pendidikan distribution.\"\n            });\n        }\n    }\n    // Get student growth\n    static async getStudentGrowth(req, res) {\n        try {\n            const data = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getStudentGrowth();\n            res.json(data);\n        } catch (error) {\n            res.status(500).json({\n                message: \"Error retrieving student growth data.\"\n            });\n        }\n    }\n    // Get user details\n    static async getUserDetails(req, res) {\n        try {\n            const userId1 = req.query.userId;\n            const data = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getUserDetailsById(parseInt(userId1));\n            res.status(200).json(data);\n        } catch (error) {\n            if (error.kind === 'not_found') {\n                return res.status(404).json({\n                    message: \"User not found.\"\n                });\n            }\n            res.status(500).json({\n                message: \"Error retrieving user details.\"\n            });\n        }\n    }\n    // Get student group\n    static async getStudentGroup(req, res) {\n        try {\n            const data = await _models_user_model__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getStudentGroup();\n            res.json(data);\n        } catch (error) {\n            res.status(500).json({\n                message: error.message || \"Error fetching student groups.\"\n            });\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserController);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2NvbnRyb2xsZXJzL3VzZXIuY29udHJvbGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLGlDQUFpQztBQUVtQztBQUVyQztBQUNMO0FBRTFCLE1BQU1HLFlBQVlDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztBQUM1QyxNQUFNQyxxQkFBcUJILFFBQVFDLEdBQUcsQ0FBQ0csb0JBQW9CO0FBQzNELE1BQU1DLGdCQUEwQixFQUFFO0FBK0JsQyx3QkFBd0I7QUFDeEIsTUFBTUM7SUFDSiwyQkFBMkI7SUFDM0IsYUFBYUMsT0FBT0MsR0FBbUIsRUFBRUMsR0FBb0IsRUFBRTtRQUM3RCxJQUFJO1lBQ0YsSUFBSSxDQUFDRCxJQUFJRSxJQUFJLEVBQUU7Z0JBQ2IsT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFDMUJDLFNBQVM7Z0JBQ1g7WUFDRjtZQUVBLE1BQU0sRUFBRUMsUUFBUSxFQUFFQyxLQUFLLEVBQUVDLFFBQVEsRUFBRUMsWUFBWSxFQUFFLEdBQXNCVCxJQUFJRSxJQUFJO1lBRS9FLGlCQUFpQjtZQUNqQixJQUFJO2dCQUNGLE1BQU1RLFdBQVcsTUFBTXBCLGtEQUFVLENBQUMsQ0FBQyx1REFBdUQsRUFBRUUsUUFBUUMsR0FBRyxDQUFDbUIsb0JBQW9CLENBQUMsVUFBVSxFQUFFSCxjQUFjO2dCQUN2SixNQUFNLEVBQUVJLE9BQU8sRUFBRSxHQUFHSCxTQUFTSSxJQUFJO2dCQUVqQyxJQUFJLENBQUNELFNBQVM7b0JBQ1osT0FBT1osSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQzt3QkFDMUJDLFNBQVM7b0JBQ1g7Z0JBQ0Y7WUFDRixFQUFFLE9BQU9VLE9BQU87Z0JBQ2RDLFFBQVFELEtBQUssQ0FBQyw0QkFBNEJBO2dCQUMxQyxPQUFPZCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUMxQkMsU0FBUztnQkFDWDtZQUNGO1lBRUEsY0FBYztZQUNkLE1BQU1ZLE9BQWE7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QUFlL0YsR0FBbUIsRUFBRUMsR0FBb0IsRUFBRTtRQUNyRSxJQUFJO1lBQ0YsTUFBTW1CLFVBQVNwQixJQUFJZ0MsS0FBSyxDQUFDWixNQUFNO1lBQy9CLE1BQU1OLE9BQU8sTUFBTTFCLDZFQUE0QixDQUFDb0MsU0FBU0o7WUFDekRuQixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDVTtRQUN2QixFQUFFLE9BQU9DLE9BQVk7WUFDbkIsSUFBSUEsTUFBTW9CLElBQUksS0FBSyxhQUFhO2dCQUM5QixPQUFPbEMsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFDMUJDLFNBQVM7Z0JBQ1g7WUFDRjtZQUNBSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUNuQkMsU0FBUztZQUNYO1FBQ0Y7SUFDRjtJQUVBLG9CQUFvQjtJQUNwQixhQUFhNEYsZ0JBQWdCakcsR0FBbUIsRUFBRUMsR0FBb0IsRUFBRTtRQUN0RSxJQUFJO1lBQ0YsTUFBTWEsT0FBTyxNQUFNMUIsMEVBQXlCO1lBQzVDYSxJQUFJRyxJQUFJLENBQUNVO1FBQ1gsRUFBRSxPQUFPQyxPQUFZO1lBQ25CZCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUNuQkMsU0FBU1UsTUFBTVYsT0FBTyxJQUFJO1lBQzVCO1FBQ0Y7SUFDRjtBQUNGO0FBRUEsaUVBQWVQLGNBQWNBLEVBQUMiLCJzb3VyY2VzIjpbIkQ6XFxMYXRpaGFuXFxOZXcgZm9sZGVyICgyKVxcRkVcXDFcXEZFXFxOZXh0XFxmdXR1cmVkdVxcY29udHJvbGxlcnNcXHVzZXIuY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb250cm9sbGVycy91c2VyLmNvbnRyb2xsZXIudHNcclxuaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5pbXBvcnQgVXNlck1vZGVsLCB7IFVzZXIsIFVzZXJGaWx0ZXJzIH0gZnJvbSAnLi4vbW9kZWxzL3VzZXIubW9kZWwnO1xyXG5pbXBvcnQgeyBBdXRoZW50aWNhdGVkUmVxdWVzdCB9IGZyb20gJy4uL2xpYi9taWRkbGV3YXJlL2F1dGgnO1xyXG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcblxyXG5jb25zdCBzZWNyZXRLZXkgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUX0tFWSE7XHJcbmNvbnN0IHJlZnJlc2hUb2tlblNlY3JldCA9IHByb2Nlc3MuZW52LlJFRlJFU0hfVE9LRU5fU0VDUkVUITtcclxuY29uc3QgcmVmcmVzaFRva2Vuczogc3RyaW5nW10gPSBbXTtcclxuXHJcbi8vIFR5cGVzIGZvciByZXF1ZXN0IGJvZGllc1xyXG5pbnRlcmZhY2UgQ3JlYXRlVXNlclJlcXVlc3Qge1xyXG4gIHVzZXJuYW1lOiBzdHJpbmc7XHJcbiAgZW1haWw6IHN0cmluZztcclxuICBwYXNzd29yZDogc3RyaW5nO1xyXG4gIGNhcHRjaGFUb2tlbj86IHN0cmluZztcclxuICBmdWxsTmFtZT86IHN0cmluZztcclxuICByb2xlPzogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgTG9naW5SZXF1ZXN0IHtcclxuICB1c2VybmFtZTogc3RyaW5nO1xyXG4gIHBhc3N3b3JkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBVcGRhdGVVc2VyUmVxdWVzdCB7XHJcbiAgdXNlcm5hbWU6IHN0cmluZztcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIG9sZFBhc3N3b3JkOiBzdHJpbmc7XHJcbiAgbmV3UGFzc3dvcmQ6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFNlYXJjaFJlcXVlc3Qge1xyXG4gIHNlYXJjaFRlcm06IHN0cmluZztcclxuICByb2xlPzogc3RyaW5nO1xyXG4gIHJvbGVzPzogc3RyaW5nW107XHJcbiAgbGltaXQ/OiBudW1iZXI7XHJcbn1cclxuXHJcbi8vIFVzZXIgQ29udHJvbGxlciBDbGFzc1xyXG5jbGFzcyBVc2VyQ29udHJvbGxlciB7XHJcbiAgLy8gQ3JlYXRlIHVzZXIgd2l0aCBDQVBUQ0hBXHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZShyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFyZXEuYm9keSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICBtZXNzYWdlOiBcIkNvbnRlbnQgY2Fubm90IGJlIGVtcHR5IVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHsgdXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgY2FwdGNoYVRva2VuIH06IENyZWF0ZVVzZXJSZXF1ZXN0ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgICAvLyBWZXJpZnkgQ0FQVENIQVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpL3NpdGV2ZXJpZnk/c2VjcmV0PSR7cHJvY2Vzcy5lbnYuUkVDQVBUQ0hBX1NFQ1JFVF9LRVl9JnJlc3BvbnNlPSR7Y2FwdGNoYVRva2VufWApO1xyXG4gICAgICAgIGNvbnN0IHsgc3VjY2VzcyB9ID0gcmVzcG9uc2UuZGF0YTtcclxuXHJcbiAgICAgICAgaWYgKCFzdWNjZXNzKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkNBUFRDSEEgdmVyaWZpY2F0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIlxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB2ZXJpZnlpbmcgQ0FQVENIQTpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICBtZXNzYWdlOiBcIkVycm9yIHZlcmlmeWluZyBDQVBUQ0hBLlwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENyZWF0ZSB1c2VyXHJcbiAgICAgIGNvbnN0IHVzZXI6IFVzZXIgPSB7IHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHJvbGU6ICdzdHVkZW50JyB9O1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlck1vZGVsLmNyZWF0ZSh1c2VyKTtcclxuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oZGF0YSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8IFwiU29tZSBlcnJvciBvY2N1cnJlZCB3aGlsZSBjcmVhdGluZyB0aGUgVXNlci5cIlxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCB1c2VyIHN0YXR1c1xyXG4gIHN0YXRpYyBhc3luYyBnZXRTdGF0dXMocmVxOiBBdXRoZW50aWNhdGVkUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyIS5pZDtcclxuICAgICAgY29uc3QgY2FydENvdW50ID0gYXdhaXQgVXNlck1vZGVsLmdldENhcnRDb3VudChwYXJzZUludCh1c2VySWQpKTtcclxuICAgICAgY29uc3QgdW5wYWlkQ291bnQgPSBhd2FpdCBVc2VyTW9kZWwuZ2V0VW5wYWlkQ291bnQocGFyc2VJbnQodXNlcklkKSk7XHJcbiAgICAgIHJldHVybiByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGNhcnRDb3VudCwgdW5wYWlkQ291bnQgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENyZWF0ZSB1c2VyIHdpdGhvdXQgQ0FQVENIQVxyXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVOb0NhcHRjaGEocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghcmVxLmJvZHkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgbWVzc2FnZTogXCJDb250ZW50IGNhbm5vdCBiZSBlbXB0eSFcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB7IHVzZXJuYW1lLCBmdWxsTmFtZSwgZW1haWwsIHBhc3N3b3JkLCByb2xlIH06IENyZWF0ZVVzZXJSZXF1ZXN0ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgICAvLyBWYWxpZGF0ZSBpbnB1dCBkYXRhXHJcbiAgICAgIGlmICghdXNlcm5hbWUgfHwgIWVtYWlsIHx8ICFwYXNzd29yZCB8fCAhZnVsbE5hbWUpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgbWVzc2FnZTogXCJVc2VybmFtZSwgZnVsbCBuYW1lLCBlbWFpbCwgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZCFcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBEZWZhdWx0IHJvbGUgaWYgbm90IHByb3ZpZGVkXHJcbiAgICAgIGNvbnN0IHVzZXJSb2xlID0gcm9sZSB8fCAnc3R1ZGVudCc7XHJcblxyXG4gICAgICAvLyBDcmVhdGUgdXNlclxyXG4gICAgICBjb25zdCB1c2VyOiBVc2VyID0geyB1c2VybmFtZSwgZnVsbE5hbWUsIGVtYWlsLCBwYXNzd29yZCwgcm9sZTogdXNlclJvbGUgfTtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IFVzZXJNb2RlbC5jcmVhdGUodXNlcik7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKGRhdGEpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCBcIlNvbWUgZXJyb3Igb2NjdXJyZWQgd2hpbGUgY3JlYXRpbmcgdGhlIFVzZXIuXCJcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBVcGRhdGUgdXNlclxyXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVVc2VyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnc3RhcnQgdXBkYXRlIHVzZXInKTtcclxuICAgICAgY29uc3QgdXNlcklkID0gcmVxLnF1ZXJ5LmlkIGFzIHN0cmluZztcclxuICAgICAgY29uc3QgeyB1c2VybmFtZSwgZW1haWwsIG9sZFBhc3N3b3JkLCBuZXdQYXNzd29yZCB9OiBVcGRhdGVVc2VyUmVxdWVzdCA9IHJlcS5ib2R5O1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXEuYm9keSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcS5xdWVyeS5pZCk7XHJcblxyXG4gICAgICBpZiAoIXVzZXJuYW1lIHx8ICFlbWFpbCB8fCAhb2xkUGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnVXNlcm5hbWUsIGVtYWlsLCBhbmQgb2xkIHBhc3N3b3JkIGFyZSByZXF1aXJlZC4nIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlck1vZGVsLnVwZGF0ZVVzZXIocGFyc2VJbnQodXNlcklkKSwgeyB1c2VybmFtZSwgZW1haWwsIG9sZFBhc3N3b3JkLCBuZXdQYXNzd29yZCB9KTtcclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnVXNlciB1cGRhdGVkIHN1Y2Nlc3NmdWxseS4nLCBkYXRhIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBpZiAoZXJyb3Iua2luZCA9PT0gJ25vdF9mb3VuZCcpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQuJyB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gJ09sZCBwYXNzd29yZCBkb2VzIG5vdCBtYXRjaCcpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnSW52YWxpZCBvbGQgcGFzc3dvcmQuJyB9KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3IgdXBkYXRpbmcgdXNlci4nIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRGVsZXRlIHVzZXIgYnkgSURcclxuICBzdGF0aWMgYXN5bmMgZGVsZXRlVXNlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXNlcklkID0gcmVxLnF1ZXJ5LmlkIGFzIHN0cmluZztcclxuICAgICAgYXdhaXQgVXNlck1vZGVsLmRlbGV0ZVVzZXIocGFyc2VJbnQodXNlcklkKSk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiBgVXNlciB3aXRoIGlkICR7dXNlcklkfSB3YXMgZGVsZXRlZCBzdWNjZXNzZnVsbHkuYFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgaWYgKGVycm9yLmtpbmQgPT09IFwibm90X2ZvdW5kXCIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgbWVzc2FnZTogYFVzZXIgbm90IGZvdW5kIHdpdGggaWQgJHt1c2VySWR9YFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogYENvdWxkIG5vdCBkZWxldGUgdXNlciB3aXRoIGlkICR7dXNlcklkfWBcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBMb2dpbiB1c2VyXHJcbiAgc3RhdGljIGFzeW5jIGxvZ2luKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9OiBMb2dpblJlcXVlc3QgPSByZXEuYm9keTtcclxuXHJcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyTW9kZWwuZmluZEJ5VXNlcm5hbWUodXNlcm5hbWUpO1xyXG5cclxuICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmQuXCJcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgcGFzc3dvcmQgbWF0Y2hlc1xyXG4gICAgICBpZiAodXNlci5wYXNzd29yZCAhPT0gcGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHBhc3N3b3JkLlwiXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGF3YWl0IFVzZXJNb2RlbC51cGRhdGVMYXN0TG9naW4odXNlcm5hbWUpO1xyXG5cclxuICAgICAgLy8gQ3JlYXRlIEpXVCB0b2tlbiBpZiBsb2dpbiBzdWNjZXNzZnVsXHJcbiAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZDogdXNlci5pZCwgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsIHJvbGU6IHVzZXIucm9sZSB9LCBzZWNyZXRLZXksIHsgZXhwaXJlc0luOiAnNmgnIH0pO1xyXG4gICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBqd3Quc2lnbih7IGlkOiB1c2VyLmlkLCB1c2VybmFtZTogdXNlci51c2VybmFtZSwgcm9sZTogdXNlci5yb2xlIH0sIHJlZnJlc2hUb2tlblNlY3JldCwgeyBleHBpcmVzSW46ICczMGQnIH0pO1xyXG5cclxuICAgICAgcmVmcmVzaFRva2Vucy5wdXNoKHJlZnJlc2hUb2tlbik7XHJcblxyXG4gICAgICAvLyBTZW5kIHRva2VuIGluIGNvb2tpZVxyXG4gICAgICByZXMuc2V0SGVhZGVyKCdTZXQtQ29va2llJywgW1xyXG4gICAgICAgIGBhdXRoVG9rZW49JHt0b2tlbn07IEh0dHBPbmx5OyBTZWN1cmU9JHtwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nfTsgU2FtZVNpdGU9U3RyaWN0OyBNYXgtQWdlPSR7NiAqIDYwICogNjB9OyBQYXRoPS9gLFxyXG4gICAgICAgIGByZWZyZXNoVG9rZW49JHtyZWZyZXNoVG9rZW59OyBIdHRwT25seTsgU2VjdXJlPSR7cHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJ307IFNhbWVTaXRlPVN0cmljdDsgTWF4LUFnZT0kezMwICogMjQgKiA2MCAqIDYwfTsgUGF0aD0vYFxyXG4gICAgICBdKTtcclxuXHJcbiAgICAgIHJlcy5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiBcIkxvZ2luIHN1Y2Nlc3NmdWwhXCIsXHJcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXHJcbiAgICAgICAgcm9sZTogdXNlci5yb2xlLFxyXG4gICAgICAgIHRva2VuXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZHVyaW5nIGxvZ2luOlwiLCBlcnJvcik7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiBcIkFuIGVycm9yIG9jY3VycmVkIGR1cmluZyBsb2dpbi5cIlxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFJlZnJlc2ggdG9rZW5cclxuICBzdGF0aWMgYXN5bmMgcmVmcmVzaFRva2VuKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSByZXEuY29va2llcy5yZWZyZXNoVG9rZW47XHJcblxyXG4gICAgICBpZiAoIXJlZnJlc2hUb2tlbiB8fCAhcmVmcmVzaFRva2Vucy5pbmNsdWRlcyhyZWZyZXNoVG9rZW4pKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogJ0ZvcmJpZGRlbicgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHJlZnJlc2hUb2tlbiwgcmVmcmVzaFRva2VuU2VjcmV0KSBhcyBhbnk7XHJcbiAgICAgIGNvbnN0IG5ld1Rva2VuID0gand0LnNpZ24oeyBpZDogZGVjb2RlZC5pZCwgdXNlcm5hbWU6IGRlY29kZWQudXNlcm5hbWUsIHJvbGU6IGRlY29kZWQucm9sZSB9LCBzZWNyZXRLZXksIHsgZXhwaXJlc0luOiAnNmgnIH0pO1xyXG5cclxuICAgICAgcmVzLnNldEhlYWRlcignU2V0LUNvb2tpZScsIGBhdXRoVG9rZW49JHtuZXdUb2tlbn07IEh0dHBPbmx5OyBTZWN1cmU9JHtwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nfTsgU2FtZVNpdGU9U3RyaWN0OyBNYXgtQWdlPSR7NiAqIDYwICogNjB9OyBQYXRoPS9gKTtcclxuXHJcbiAgICAgIHJlcy5qc29uKHtcclxuICAgICAgICB0b2tlbjogbmV3VG9rZW5cclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAnRm9yYmlkZGVuJyB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIExvZ291dCB1c2VyXHJcbiAgc3RhdGljIGFzeW5jIGxvZ291dChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gcmVxLmNvb2tpZXMucmVmcmVzaFRva2VuO1xyXG4gICAgICBjb25zdCBpbmRleCA9IHJlZnJlc2hUb2tlbnMuaW5kZXhPZihyZWZyZXNoVG9rZW4pO1xyXG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgIHJlZnJlc2hUb2tlbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzLnNldEhlYWRlcignU2V0LUNvb2tpZScsIFtcclxuICAgICAgICBgYXV0aFRva2VuPTsgSHR0cE9ubHk7IFNlY3VyZT0ke3Byb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbid9OyBTYW1lU2l0ZT1TdHJpY3Q7IE1heC1BZ2U9MDsgUGF0aD0vYCxcclxuICAgICAgICBgcmVmcmVzaFRva2VuPTsgSHR0cE9ubHk7IFNlY3VyZT0ke3Byb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbid9OyBTYW1lU2l0ZT1TdHJpY3Q7IE1heC1BZ2U9MDsgUGF0aD0vYFxyXG4gICAgICBdKTtcclxuXHJcbiAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogXCJMb2dvdXQgc3VjY2Vzc2Z1bCFcIiB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRmluZCB1c2VyIGJ5IHVzZXJuYW1lXHJcbiAgc3RhdGljIGFzeW5jIGZpbmRCeVVzZXJuYW1lKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1c2VybmFtZSA9IHJlcS5xdWVyeS51c2VybmFtZSBhcyBzdHJpbmc7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdGaW5kaW5nIHVzZXIgYnkgdXNlcm5hbWU6JywgdXNlcm5hbWUpO1xyXG5cclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJNb2RlbC5maW5kQnlVc2VybmFtZSh1c2VybmFtZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGZvdW5kOicsIHVzZXIpO1xyXG4gICAgICByZXMuanNvbih7IHVzZXJfaWQ6ICh1c2VyIGFzIGFueSkudXNlcl9pZCwgaWQ6IHVzZXIuaWQgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgdXNlciBieSB1c2VybmFtZTonLCBlcnJvcik7XHJcbiAgICAgIGlmIChlcnJvci5raW5kID09PSAnbm90X2ZvdW5kJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQuJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCAnU29tZSBlcnJvciBvY2N1cnJlZCB3aGlsZSBmaW5kaW5nIHRoZSBVc2VyLidcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBGaW5kIHVzZXIgYnkgSURcclxuICBzdGF0aWMgYXN5bmMgZmluZEJ5SWQocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGlkID0gcmVxLnF1ZXJ5LmlkIGFzIHN0cmluZztcclxuICAgICAgY29uc29sZS5sb2coJ0ZpbmRpbmcgdXNlciBieSBpZDonLCBpZCk7XHJcblxyXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlck1vZGVsLmZpbmRCeUlkKHBhcnNlSW50KGlkKSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGZvdW5kOicsIHVzZXIpO1xyXG4gICAgICByZXMuanNvbih7XHJcbiAgICAgICAgaWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWxcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbmRpbmcgdXNlciBieSBpZDonLCBlcnJvcik7XHJcbiAgICAgIGlmIChlcnJvci5raW5kID09PSAnbm90X2ZvdW5kJykge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQuJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCAnU29tZSBlcnJvciBvY2N1cnJlZCB3aGlsZSBmaW5kaW5nIHRoZSBVc2VyLidcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgdXNlciBkYXRhIGJ5IHJvbGVcclxuICBzdGF0aWMgYXN5bmMgZ2V0VXNlckRhdGFCeVJvbGUocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJvbGUgPSByZXEucXVlcnkucm9sZSBhcyBzdHJpbmc7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdGaW5kaW5nIHVzZXJzIGJ5IHJvbGU6Jywgcm9sZSk7XHJcblxyXG4gICAgICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXJNb2RlbC5nZXRVc2VyRGF0YUJ5Um9sZShyb2xlKTtcclxuICAgICAgY29uc29sZS5sb2coJ1VzZXJzIGZvdW5kOicsIHVzZXJzKTtcclxuICAgICAgcmVzLmpzb24odXNlcnMpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmaW5kaW5nIHVzZXJzIGJ5IHJvbGU6JywgZXJyb3IpO1xyXG4gICAgICBpZiAoZXJyb3Iua2luZCA9PT0gJ25vdF9mb3VuZCcpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgbWVzc2FnZTogJ05vIHVzZXJzIGZvdW5kIGZvciB0aGlzIHJvbGUuJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCAnU29tZSBlcnJvciBvY2N1cnJlZCB3aGlsZSBmaW5kaW5nIHRoZSBVc2Vycy4nXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2VhcmNoIHVzZXJzIGJ5IHJvbGUgYW5kIG5hbWVcclxuICBzdGF0aWMgYXN5bmMgc2VhcmNoVXNlcnNCeVJvbGVBbmROYW1lKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IHNlYXJjaFRlcm0sIHJvbGUsIGxpbWl0ID0gMTAgfTogU2VhcmNoUmVxdWVzdCA9IHJlcS5ib2R5O1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXEuYm9keSk7XHJcblxyXG4gICAgICAvLyBWYWxpZGF0ZSBpbnB1dFxyXG4gICAgICBpZiAoIXNlYXJjaFRlcm0gfHwgdHlwZW9mIHNlYXJjaFRlcm0gIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJzZWFyY2hUZXJtIGRpcGVybHVrYW4gZGFuIGhhcnVzIGJlcnVwYSBzdHJpbmcuXCIgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghcm9sZSB8fCB0eXBlb2Ygcm9sZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIlJvbGUgZGlwZXJsdWthbiBkYW4gaGFydXMgYmVydXBhIHN0cmluZy5cIiB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVmFsaWRhdGUgbGltaXRcclxuICAgICAgY29uc3QgcGFyc2VkTGltaXQgPSBwYXJzZUludChsaW1pdC50b1N0cmluZygpKTtcclxuICAgICAgaWYgKGlzTmFOKHBhcnNlZExpbWl0KSB8fCBwYXJzZWRMaW1pdCA8IDEpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkxpbWl0IGhhcnVzIGJlcnVwYSBhbmdrYSBwb3NpdGlmLlwiIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXJNb2RlbC5zZWFyY2hVc2Vyc0J5Um9sZUFuZE5hbWUocm9sZSwgc2VhcmNoVGVybSwgcGFyc2VkTGltaXQpO1xyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVzZXJzIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWFyY2hpbmcgdXNlcnM6JywgZXJyb3IpO1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiVGVyamFkaSBrZXNhbGFoYW4gcGFkYSBzZXJ2ZXIuXCIgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBTZWFyY2ggdXNlcnMgYnkgbXVsdGlwbGUgcm9sZXMgYW5kIG5hbWVcclxuICBzdGF0aWMgYXN5bmMgc2VhcmNoVXNlcnNCeU11bHRpcGxlUm9sZXNBbmROYW1lKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IHNlYXJjaFRlcm0sIHJvbGVzIH06IFNlYXJjaFJlcXVlc3QgPSByZXEuYm9keTtcclxuXHJcbiAgICAgIGlmICghc2VhcmNoVGVybSB8fCB0eXBlb2Ygc2VhcmNoVGVybSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcInNlYXJjaFRlcm0gZGlwZXJsdWthbiBkYW4gaGFydXMgYmVydXBhIHN0cmluZy5cIiB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJvbGVzKSB8fCByb2xlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIlJvbGVzIGhhcnVzIGJlcnVwYSBhcnJheSBkZW5nYW4gc2V0aWRha255YSBzYXR1IGl0ZW0uXCIgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHBhcnNlZFJvbGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyb2xlcykpO1xyXG4gICAgICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXJNb2RlbC5zZWFyY2hVc2Vyc0J5Um9sZXNBbmROYW1lKHBhcnNlZFJvbGVzLCBzZWFyY2hUZXJtKTtcclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VycyB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VhcmNoaW5nIHVzZXJzOicsIGVycm9yKTtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIlRlcmphZGkga2VzYWxhaGFuIHBhZGEgc2VydmVyLlwiIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gR2V0IHBhZ2luYXRlZCB1c2Vyc1xyXG4gIHN0YXRpYyBhc3luYyBnZXRQYWdpbmF0ZWRVc2VycyhyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBVc2VyRmlsdGVycyA9IHtcclxuICAgICAgICBzb3J0RmllbGQ6IChyZXEucXVlcnkuc29ydEZpZWxkIGFzIHN0cmluZykgfHwgJ2lkJyxcclxuICAgICAgICBzb3J0T3JkZXI6IChyZXEucXVlcnkuc29ydE9yZGVyIGFzIHN0cmluZykgfHwgJ2FzYycsXHJcbiAgICAgICAgc2VhcmNoOiAocmVxLnF1ZXJ5LnNlYXJjaCBhcyBzdHJpbmcpIHx8ICcnLFxyXG4gICAgICAgIHBhZ2U6IHBhcnNlSW50KChyZXEucXVlcnkucGFnZSBhcyBzdHJpbmcpIHx8ICcxJyksXHJcbiAgICAgICAgbGltaXQ6IHBhcnNlSW50KChyZXEucXVlcnkubGltaXQgYXMgc3RyaW5nKSB8fCAnMTAnKSxcclxuICAgICAgICByb2xlOiAocmVxLnF1ZXJ5LnJvbGUgYXMgc3RyaW5nKSB8fCAnJyxcclxuICAgICAgICBlZHVjYXRpb246IChyZXEucXVlcnkuZWR1Y2F0aW9uIGFzIHN0cmluZykgfHwgJycsXHJcbiAgICAgICAgY2l0eTogKHJlcS5xdWVyeS5jaXR5IGFzIHN0cmluZykgfHwgJycsXHJcbiAgICAgICAgcHJvdmluY2U6IChyZXEucXVlcnkucHJvdmluY2UgYXMgc3RyaW5nKSB8fCAnJyxcclxuICAgICAgICBzdGF0dXM6IChyZXEucXVlcnkuc3RhdHVzIGFzIHN0cmluZykgfHwgJydcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHsgdXNlcnMsIHRvdGFsIH0gPSBhd2FpdCBVc2VyTW9kZWwuZ2V0UGFnaW5hdGVkVXNlcnMocGFyYW1zKTtcclxuXHJcbiAgICAgIHJlcy5qc29uKHtcclxuICAgICAgICBkYXRhOiB1c2VycyxcclxuICAgICAgICB0b3RhbCxcclxuICAgICAgICBwYWdlOiBwYXJzZUludChwYXJhbXMucGFnZT8udG9TdHJpbmcoKSB8fCAnMScpLFxyXG4gICAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIChwYXJhbXMubGltaXQgfHwgMTApKVxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignR2V0IFBhZ2luYXRlZCBVc2VycyBFcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ1NlcnZlciBFcnJvcicgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgdG90YWwgdXNlcnMgYW5kIGdyb3d0aCBieSByb2xlXHJcbiAgc3RhdGljIGFzeW5jIGdldFRvdGFsVXNlcnNBbmRHcm93dGhCeVJvbGUocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJvbGUgPSByZXEucXVlcnkucm9sZSBhcyBzdHJpbmc7XHJcblxyXG4gICAgICBpZiAoIXJvbGUpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgbWVzc2FnZTogJ1JvbGUgcGFyYW1ldGVyIGlzIHJlcXVpcmVkLidcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IFVzZXJNb2RlbC5nZXRUb3RhbFVzZXJzQW5kR3Jvd3RoQnlSb2xlKHJvbGUpO1xyXG4gICAgICByZXMuanNvbihkYXRhKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ1NvbWUgZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgdG90YWwgdXNlcnMgYW5kIGdyb3d0aC4nXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gR2V0IGFjdGl2ZSB1c2VycyBhbmQgZ3Jvd3RoIGJ5IHJvbGVcclxuICBzdGF0aWMgYXN5bmMgZ2V0QWN0aXZlVXNlcnNBbmRHcm93dGhCeVJvbGUocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJvbGUgPSByZXEucXVlcnkucm9sZSBhcyBzdHJpbmc7XHJcblxyXG4gICAgICBpZiAoIXJvbGUpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnUm9sZSBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQnIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlck1vZGVsLmdldEFjdGl2ZVVzZXJzQW5kR3Jvd3RoQnlSb2xlKHJvbGUpO1xyXG4gICAgICByZXMuanNvbihkYXRhKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWN0aXZlIHVzZXJzIGFuZCBncm93dGg6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRXJyb3IgcmV0cmlldmluZyBhY3RpdmUgdXNlcnMgYW5kIGdyb3d0aCcgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgbmV3IHVzZXJzIGFuZCBncm93dGhcclxuICBzdGF0aWMgYXN5bmMgZ2V0TmV3VXNlcnNBbmRHcm93dGgocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJvbGUgPSByZXEucXVlcnkucm9sZSBhcyBzdHJpbmc7XHJcblxyXG4gICAgICBpZiAoIXJvbGUpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIlJvbGUgcGFyYW1ldGVyIGlzIHJlcXVpcmVkLlwiIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlck1vZGVsLmdldE5ld1VzZXJzQW5kR3Jvd3RoQnlSb2xlKHJvbGUpO1xyXG4gICAgICByZXMuanNvbihkYXRhKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIG5ldyB1c2VycyBhbmQgZ3Jvd3RoOlwiLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBuZXcgdXNlcnMgYW5kIGdyb3d0aC5cIlxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCByZXZlbnVlIHBlciB1c2VyXHJcbiAgc3RhdGljIGFzeW5jIGdldFJldmVudWVQZXJVc2VyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByb2xlID0gcmVxLnF1ZXJ5LnJvbGUgYXMgc3RyaW5nO1xyXG5cclxuICAgICAgaWYgKCFyb2xlKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJSb2xlIHBhcmFtZXRlciBpcyByZXF1aXJlZC5cIiB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IFVzZXJNb2RlbC5nZXRSZXZlbnVlUGVyVXNlcihyb2xlKTtcclxuICAgICAgcmVzLmpzb24oZGF0YSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRXJyb3IgZmV0Y2hpbmcgcmV2ZW51ZSBwZXIgdXNlci5cIiB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCBzdHVkZW50IHBlbmRpZGlrYW4gZGlzdHJpYnV0aW9uXHJcbiAgc3RhdGljIGFzeW5jIGdldFN0dWRlbnRQZW5kaWRpa2FuRGlzdHJpYnV0aW9uKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlck1vZGVsLmdldFN0dWRlbnRQZW5kaWRpa2FuRGlzdHJpYnV0aW9uKCk7XHJcbiAgICAgIHJlcy5qc29uKGRhdGEpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCBcIlNvbWUgZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmV0cmlldmluZyBwZW5kaWRpa2FuIGRpc3RyaWJ1dGlvbi5cIlxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCBzdHVkZW50IGdyb3d0aFxyXG4gIHN0YXRpYyBhc3luYyBnZXRTdHVkZW50R3Jvd3RoKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlck1vZGVsLmdldFN0dWRlbnRHcm93dGgoKTtcclxuICAgICAgcmVzLmpzb24oZGF0YSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiBcIkVycm9yIHJldHJpZXZpbmcgc3R1ZGVudCBncm93dGggZGF0YS5cIixcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgdXNlciBkZXRhaWxzXHJcbiAgc3RhdGljIGFzeW5jIGdldFVzZXJEZXRhaWxzKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1c2VySWQgPSByZXEucXVlcnkudXNlcklkIGFzIHN0cmluZztcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IFVzZXJNb2RlbC5nZXRVc2VyRGV0YWlsc0J5SWQocGFyc2VJbnQodXNlcklkKSk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGRhdGEpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBpZiAoZXJyb3Iua2luZCA9PT0gJ25vdF9mb3VuZCcpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgbWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZC5cIlxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiBcIkVycm9yIHJldHJpZXZpbmcgdXNlciBkZXRhaWxzLlwiLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCBzdHVkZW50IGdyb3VwXHJcbiAgc3RhdGljIGFzeW5jIGdldFN0dWRlbnRHcm91cChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IFVzZXJNb2RlbC5nZXRTdHVkZW50R3JvdXAoKTtcclxuICAgICAgcmVzLmpzb24oZGF0YSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8IFwiRXJyb3IgZmV0Y2hpbmcgc3R1ZGVudCBncm91cHMuXCJcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VyQ29udHJvbGxlcjsgICJdLCJuYW1lcyI6WyJVc2VyTW9kZWwiLCJqd3QiLCJheGlvcyIsInNlY3JldEtleSIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUX0tFWSIsInJlZnJlc2hUb2tlblNlY3JldCIsIlJFRlJFU0hfVE9LRU5fU0VDUkVUIiwicmVmcmVzaFRva2VucyIsIlVzZXJDb250cm9sbGVyIiwiY3JlYXRlIiwicmVxIiwicmVzIiwiYm9keSIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidXNlcm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiY2FwdGNoYVRva2VuIiwicmVzcG9uc2UiLCJwb3N0IiwiUkVDQVBUQ0hBX1NFQ1JFVF9LRVkiLCJzdWNjZXNzIiwiZGF0YSIsImVycm9yIiwiY29uc29sZSIsInVzZXIiLCJyb2xlIiwiZ2V0U3RhdHVzIiwidXNlcklkIiwiaWQiLCJjYXJ0Q291bnQiLCJnZXRDYXJ0Q291bnQiLCJwYXJzZUludCIsInVucGFpZENvdW50IiwiZ2V0VW5wYWlkQ291bnQiLCJjcmVhdGVOb0NhcHRjaGEiLCJmdWxsTmFtZSIsInVzZXJSb2xlIiwidXBkYXRlVXNlciIsImxvZyIsInF1ZXJ5Iiwib2xkUGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImtpbmQiLCJkZWxldGVVc2VyIiwibG9naW4iLCJmaW5kQnlVc2VybmFtZSIsInVwZGF0ZUxhc3RMb2dpbiIsInRva2VuIiwic2lnbiIsImV4cGlyZXNJbiIsInJlZnJlc2hUb2tlbiIsInB1c2giLCJzZXRIZWFkZXIiLCJjb29raWVzIiwiaW5jbHVkZXMiLCJkZWNvZGVkIiwidmVyaWZ5IiwibmV3VG9rZW4iLCJsb2dvdXQiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJ1c2VyX2lkIiwiZmluZEJ5SWQiLCJnZXRVc2VyRGF0YUJ5Um9sZSIsInVzZXJzIiwic2VhcmNoVXNlcnNCeVJvbGVBbmROYW1lIiwic2VhcmNoVGVybSIsImxpbWl0IiwicGFyc2VkTGltaXQiLCJ0b1N0cmluZyIsImlzTmFOIiwic2VhcmNoVXNlcnNCeU11bHRpcGxlUm9sZXNBbmROYW1lIiwicm9sZXMiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJwYXJzZWRSb2xlcyIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsInNlYXJjaFVzZXJzQnlSb2xlc0FuZE5hbWUiLCJnZXRQYWdpbmF0ZWRVc2VycyIsInBhcmFtcyIsInNvcnRGaWVsZCIsInNvcnRPcmRlciIsInNlYXJjaCIsInBhZ2UiLCJlZHVjYXRpb24iLCJjaXR5IiwicHJvdmluY2UiLCJ0b3RhbCIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsImdldFRvdGFsVXNlcnNBbmRHcm93dGhCeVJvbGUiLCJnZXRBY3RpdmVVc2Vyc0FuZEdyb3d0aEJ5Um9sZSIsImdldE5ld1VzZXJzQW5kR3Jvd3RoIiwiZ2V0TmV3VXNlcnNBbmRHcm93dGhCeVJvbGUiLCJnZXRSZXZlbnVlUGVyVXNlciIsImdldFN0dWRlbnRQZW5kaWRpa2FuRGlzdHJpYnV0aW9uIiwiZ2V0U3R1ZGVudEdyb3d0aCIsImdldFVzZXJEZXRhaWxzIiwiZ2V0VXNlckRldGFpbHNCeUlkIiwiZ2V0U3R1ZGVudEdyb3VwIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./controllers/user.controller.ts\n");

/***/ }),

/***/ "(api-node)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// lib/db.ts\n\n\n// Read CA certificate\nconst ca = fs__WEBPACK_IMPORTED_MODULE_1__.readFileSync('./ca.pem').toString();\nconst config = {\n    host: process.env.DB_HOST,\n    user: process.env.DB_USER,\n    password: process.env.DB_PASSWORD,\n    database: process.env.DB_DATABASE,\n    port: parseInt(process.env.DB_PORT),\n    ssl: {\n        ca: ca,\n        rejectUnauthorized: false\n    }\n};\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool(config);\n// Test the database connection\npool.connect((err, client, release)=>{\n    if (err) {\n        console.error('Error acquiring client', err.stack);\n    } else {\n        console.log('Connected to the database');\n    }\n    release();\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsWUFBWTtBQUMwQjtBQUNiO0FBZXpCLHNCQUFzQjtBQUN0QixNQUFNRSxLQUFLRCw0Q0FBZSxDQUFDLFlBQVlHLFFBQVE7QUFFL0MsTUFBTUMsU0FBeUI7SUFDN0JDLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsT0FBTztJQUN6QkMsTUFBTUgsUUFBUUMsR0FBRyxDQUFDRyxPQUFPO0lBQ3pCQyxVQUFVTCxRQUFRQyxHQUFHLENBQUNLLFdBQVc7SUFDakNDLFVBQVVQLFFBQVFDLEdBQUcsQ0FBQ08sV0FBVztJQUNqQ0MsTUFBTUMsU0FBU1YsUUFBUUMsR0FBRyxDQUFDVSxPQUFPO0lBQ2xDQyxLQUFLO1FBQ0hqQixJQUFJQTtRQUNKa0Isb0JBQW9CO0lBQ3RCO0FBQ0Y7QUFFQSxNQUFNQyxPQUFPLElBQUlyQixvQ0FBSUEsQ0FBQ0s7QUFFdEIsK0JBQStCO0FBQy9CZ0IsS0FBS0MsT0FBTyxDQUFDLENBQUNDLEtBQXdCQyxRQUFnQ0M7SUFDcEUsSUFBSUYsS0FBSztRQUNQRyxRQUFRQyxLQUFLLENBQUMsMEJBQTBCSixJQUFJSyxLQUFLO0lBQ25ELE9BQU87UUFDTEYsUUFBUUcsR0FBRyxDQUFDO0lBQ2Q7SUFDQUo7QUFDRjtBQUVBLGlFQUFlSixJQUFJQSxFQUFDIiwic291cmNlcyI6WyJEOlxcTGF0aWhhblxcTmV3IGZvbGRlciAoMilcXEZFXFwxXFxGRVxcTmV4dFxcZnV0dXJlZHVcXGxpYlxcZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL2RiLnRzXHJcbmltcG9ydCB7IFBvb2wsIFBvb2xDbGllbnQgfSBmcm9tICdwZyc7XHJcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcclxuXHJcbi8vIFR5cGVzXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGF0YWJhc2VDb25maWcge1xyXG4gIGhvc3Q6IHN0cmluZztcclxuICB1c2VyOiBzdHJpbmc7XHJcbiAgcGFzc3dvcmQ6IHN0cmluZztcclxuICBkYXRhYmFzZTogc3RyaW5nO1xyXG4gIHBvcnQ6IG51bWJlcjtcclxuICBzc2w6IHtcclxuICAgIGNhOiBzdHJpbmc7XHJcbiAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGJvb2xlYW47XHJcbiAgfTtcclxufVxyXG5cclxuLy8gUmVhZCBDQSBjZXJ0aWZpY2F0ZVxyXG5jb25zdCBjYSA9IGZzLnJlYWRGaWxlU3luYygnLi9jYS5wZW0nKS50b1N0cmluZygpO1xyXG5cclxuY29uc3QgY29uZmlnOiBEYXRhYmFzZUNvbmZpZyA9IHtcclxuICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NUISxcclxuICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSISxcclxuICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQhLFxyXG4gIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9EQVRBQkFTRSEsXHJcbiAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfUE9SVCEpLFxyXG4gIHNzbDoge1xyXG4gICAgY2E6IGNhLFxyXG4gICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHBvb2wgPSBuZXcgUG9vbChjb25maWcpO1xyXG5cclxuLy8gVGVzdCB0aGUgZGF0YWJhc2UgY29ubmVjdGlvblxyXG5wb29sLmNvbm5lY3QoKGVycjogRXJyb3IgfCB1bmRlZmluZWQsIGNsaWVudDogUG9vbENsaWVudCB8IHVuZGVmaW5lZCwgcmVsZWFzZTogKCkgPT4gdm9pZCkgPT4ge1xyXG4gIGlmIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFjcXVpcmluZyBjbGllbnQnLCBlcnIuc3RhY2spO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIHRoZSBkYXRhYmFzZScpO1xyXG4gIH1cclxuICByZWxlYXNlKCk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcG9vbDsiXSwibmFtZXMiOlsiUG9vbCIsImZzIiwiY2EiLCJyZWFkRmlsZVN5bmMiLCJ0b1N0cmluZyIsImNvbmZpZyIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsImRhdGFiYXNlIiwiREJfREFUQUJBU0UiLCJwb3J0IiwicGFyc2VJbnQiLCJEQl9QT1JUIiwic3NsIiwicmVqZWN0VW5hdXRob3JpemVkIiwicG9vbCIsImNvbm5lY3QiLCJlcnIiLCJjbGllbnQiLCJyZWxlYXNlIiwiY29uc29sZSIsImVycm9yIiwic3RhY2siLCJsb2ciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/db.ts\n");

/***/ }),

/***/ "(api-node)/./models/user.model.ts":
/*!******************************!*\
  !*** ./models/user.model.ts ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/db */ \"(api-node)/./lib/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_db__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_db__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// models/user.model.ts\n\n// User Model Class\nclass UserModel {\n    // Create new user\n    static async create(newUser) {\n        try {\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"INSERT INTO users (username, email, password, role) VALUES ($1, $2, $3, $4) RETURNING *\", [\n                newUser.username,\n                newUser.email,\n                newUser.password,\n                newUser.role\n            ]);\n            if (newUser.fullName) {\n                await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"INSERT INTO user_account (user_id, nama_lengkap, is_manual) VALUES ($1, $2, false)\", [\n                    result.rows[0].user_id,\n                    newUser.fullName\n                ]);\n            }\n            console.log(\"created user: \", result.rows[0].user_id);\n            return result.rows[0];\n        } catch (error) {\n            console.log(\"error: \", error);\n            throw error;\n        }\n    }\n    // Get cart count\n    static async getCartCount(userId) {\n        const { rows } = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`SELECT COALESCE(SUM(ci.quantity),0) AS cartcount\n         FROM cart_items ci\n         JOIN cart        c  ON ci.cart_id = c.id\n        WHERE c.user_id = $1`, [\n            userId\n        ]);\n        return parseInt(rows[0].cartcount, 10);\n    }\n    // Get unpaid count\n    static async getUnpaidCount(userId) {\n        const { rows } = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`SELECT COUNT(*) AS unpaidcount\n         FROM sales_order_header\n        WHERE user_id = $1\n          AND payment_status = 'pending'`, [\n            userId\n        ]);\n        return parseInt(rows[0].unpaidcount, 10);\n    }\n    // Delete user by ID\n    static async deleteUser(userId) {\n        try {\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`DELETE FROM users WHERE id = $1 RETURNING id`, [\n                userId\n            ]);\n            if (result.rows.length === 0) {\n                throw {\n                    kind: \"not_found\"\n                };\n            }\n            console.log(\"Deleted user with id:\", result.rows[0].id);\n            return result.rows[0];\n        } catch (error) {\n            console.error(\"Error deleting user:\", error);\n            throw error;\n        }\n    }\n    // Update user data\n    static async updateUser(userId, updatedData) {\n        const { username, email, oldPassword, newPassword } = updatedData;\n        try {\n            // Check old password\n            const checkResult = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`SELECT password FROM users WHERE id = $1`, [\n                userId\n            ]);\n            if (checkResult.rows.length === 0) {\n                throw {\n                    message: \"User not found\"\n                };\n            }\n            const currentPassword = checkResult.rows[0].password;\n            if (currentPassword !== oldPassword) {\n                throw {\n                    message: \"Old password does not match\"\n                };\n            }\n            // Update user data\n            const updateResult = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`UPDATE users\n         SET username = $1, email = $2, password = $3\n         WHERE id = $4\n         RETURNING id, username, email, role, last_login, create_date`, [\n                username,\n                email,\n                newPassword,\n                userId\n            ]);\n            if (updateResult.rows.length === 0) {\n                throw {\n                    message: \"Update failed\"\n                };\n            }\n            return updateResult.rows[0];\n        } catch (error) {\n            console.error(\"Error updating user data:\", error);\n            throw error;\n        }\n    }\n    // Check if username or email exists\n    static async checkExistence(username, email) {\n        try {\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"SELECT * FROM users WHERE username = $1 OR email = $2\", [\n                username,\n                email\n            ]);\n            return result.rows;\n        } catch (error) {\n            console.log(\"error: \", error);\n            throw error;\n        }\n    }\n    // Find user by username\n    static async findByUsername(username) {\n        try {\n            console.log('Executing query to find user by username:', username);\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"SELECT * FROM users WHERE username = $1\", [\n                username\n            ]);\n            console.log('Query result:', result.rows);\n            if (result.rows.length === 0) {\n                console.log('User not found for username:', username);\n                throw {\n                    kind: \"not_found\"\n                };\n            }\n            console.log('User found:', result.rows[0]);\n            return result.rows[0];\n        } catch (error) {\n            console.log(\"error executing query: \", error);\n            throw error;\n        }\n    }\n    // Find user by ID\n    static async findById(id) {\n        try {\n            console.log('Executing query to find user by id:', id);\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"SELECT id, username, email FROM users WHERE id = $1\", [\n                id\n            ]);\n            console.log('Query result:', result.rows);\n            if (result.rows.length === 0) {\n                console.log('User not found for id:', id);\n                throw {\n                    kind: \"not_found\"\n                };\n            }\n            console.log('User found:', result.rows[0]);\n            return result.rows[0];\n        } catch (error) {\n            console.log(\"error executing query: \", error);\n            throw error;\n        }\n    }\n    // Update last login\n    static async updateLastLogin(username) {\n        try {\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"UPDATE users SET last_login = NOW() WHERE username = $1 RETURNING *\", [\n                username\n            ]);\n            console.log(\"Updated last_login for user:\", result.rows[0]);\n            return result.rows[0];\n        } catch (error) {\n            console.log(\"Error updating last_login:\", error);\n            throw error;\n        }\n    }\n    // Get user data by role\n    static async getUserDataByRole(role) {\n        try {\n            console.log('Executing query to find users by role:', role);\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"SELECT * FROM v_dashboard_UserData WHERE role = $1\", [\n                role\n            ]);\n            console.log('Query result:', result.rows);\n            if (result.rows.length === 0) {\n                console.log('No users found for role:', role);\n                throw {\n                    kind: \"not_found\"\n                };\n            }\n            return result.rows;\n        } catch (error) {\n            console.error(\"Error executing query:\", error);\n            throw error;\n        }\n    }\n    // Get paginated users\n    static async getPaginatedUsers(options = {}) {\n        const { sortField = 'id', sortOrder = 'asc', search = '', page = 1, limit = 10, role = '', education = '', city = '', province = '', status = '' } = options;\n        const offset = (page - 1) * limit;\n        let query = `\n    WITH filtered_users AS (\n      SELECT \n        userid id,*\n      FROM v_dashboard_UserData u\n      WHERE 1=1\n    `;\n        const values = [];\n        const conditions = [];\n        // Filter by role\n        if (role && role !== 'All') {\n            values.push(role);\n            conditions.push(`AND u.role = $${values.length}`);\n        }\n        // Filter by education\n        if (education && education !== 'All') {\n            values.push(education);\n            conditions.push(`AND u.pendidikan = $${values.length}`);\n        }\n        // Filter by city\n        if (city && city !== 'All') {\n            values.push(city);\n            conditions.push(`AND u.kota = $${values.length}`);\n        }\n        // Filter by province\n        if (province && province !== 'All') {\n            values.push(province);\n            conditions.push(`AND u.provinsi = $${values.length}`);\n        }\n        // Filter by status\n        if (status && status !== 'All') {\n            values.push(status);\n            conditions.push(`AND u.status = $${values.length}`);\n        }\n        // Search in user_code, nama_lengkap, and email\n        if (search) {\n            values.push(`%${search}%`);\n            values.push(`%${search}%`);\n            values.push(`%${search}%`);\n            conditions.push(`AND (\n        u.user_code ILIKE $${values.length - 2} OR \n        u.nama_lengkap ILIKE $${values.length - 1} OR \n        u.email ILIKE $${values.length}\n      )`);\n        }\n        if (conditions.length > 0) {\n            query += conditions.join(' ');\n        }\n        query += `) \n      SELECT \n        *, \n        COUNT(*) OVER() AS total \n      FROM filtered_users\n    `;\n        // Sorting\n        const validSortFields = [\n            'userid',\n            'user_code',\n            'nama_lengkap',\n            'email',\n            'pendidikan',\n            'kota',\n            'provinsi',\n            'status'\n        ];\n        if (validSortFields.includes(sortField.toLowerCase()) && [\n            'asc',\n            'desc'\n        ].includes(sortOrder.toLowerCase())) {\n            query += ` ORDER BY ${sortField} ${sortOrder.toUpperCase()}`;\n        } else {\n            query += ` ORDER BY userid ASC`;\n        }\n        query += ` LIMIT $${values.length + 1} OFFSET $${values.length + 2}`;\n        const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, [\n            ...values,\n            limit,\n            offset\n        ]);\n        return {\n            users: result.rows,\n            total: result.rows.length > 0 ? result.rows[0].total : 0\n        };\n    }\n    // Get total users and growth by role\n    static async getTotalUsersAndGrowthByRole(role) {\n        try {\n            const currentCountQuery = `\n          SELECT COUNT(*) AS total \n          FROM users\n          WHERE role = $1;\n      `;\n            const lastMonthCountQuery = `\n          SELECT COUNT(*) AS total \n          FROM users\n          WHERE role = $1 AND create_date >= NOW() - INTERVAL '1 MONTH';\n      `;\n            const currentCountResult = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(currentCountQuery, [\n                role\n            ]);\n            const lastMonthCountResult = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(lastMonthCountQuery, [\n                role\n            ]);\n            const totalUsers = currentCountResult.rows[0].total;\n            const lastMonthUsers = lastMonthCountResult.rows[0].total;\n            // Calculate growth\n            const growthPercentage = lastMonthUsers === 0 ? 0 : (totalUsers - lastMonthUsers) / lastMonthUsers * 100;\n            return {\n                totalUsers,\n                growthPercentage: parseFloat(growthPercentage.toFixed(2))\n            };\n        } catch (error) {\n            console.error('Error fetching total users and growth:', error);\n            throw error;\n        }\n    }\n    // Get active users and growth by role\n    static async getActiveUsersAndGrowthByRole(role) {\n        try {\n            const activeUsersQuery = `\n          SELECT COUNT(*) AS activeUsers\n          FROM users\n          WHERE role = $1 AND last_login >= NOW() - INTERVAL '14 DAYS';\n      `;\n            const lastMonthActiveUsersQuery = `\n          SELECT COUNT(*) AS lastMonthActiveUsers\n          FROM users\n          WHERE role = $1 AND last_login >= NOW() - INTERVAL '30 DAYS';\n      `;\n            const activeUsersResult = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(activeUsersQuery, [\n                role\n            ]);\n            const lastMonthActiveUsersResult = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(lastMonthActiveUsersQuery, [\n                role\n            ]);\n            const activeUsers = parseInt(activeUsersResult.rows[0].activeusers, 10);\n            const lastMonthActiveUsers = parseInt(lastMonthActiveUsersResult.rows[0].lastmonthactiveusers, 10);\n            // Calculate growth\n            const growthPercentage = lastMonthActiveUsers === 0 ? 0 : (activeUsers - lastMonthActiveUsers) / lastMonthActiveUsers * 100;\n            return {\n                activeUsers,\n                growthPercentage: parseFloat(growthPercentage.toFixed(2))\n            };\n        } catch (error) {\n            console.error(\"Error fetching active users and growth: \", error);\n            throw error;\n        }\n    }\n    // Get new users and growth by role\n    static async getNewUsersAndGrowthByRole(role) {\n        try {\n            // Query untuk pengguna baru bulan ini\n            const currentMonthQuery = `\n          SELECT COUNT(*) AS newUsers\n          FROM users\n          WHERE role = $1 AND create_date >= DATE_TRUNC('month', NOW());\n      `;\n            // Query untuk pengguna baru bulan lalu\n            const previousMonthQuery = `\n          SELECT COUNT(*) AS previousMonthUsers\n          FROM users\n          WHERE role = $1 AND create_date >= DATE_TRUNC('month', NOW()) - INTERVAL '1 MONTH'\n            AND create_date < DATE_TRUNC('month', NOW());\n      `;\n            const currentMonthResult = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(currentMonthQuery, [\n                role\n            ]);\n            const previousMonthResult = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(previousMonthQuery, [\n                role\n            ]);\n            const newUsers = parseInt(currentMonthResult.rows[0].newusers, 10);\n            const previousMonthUsers = parseInt(previousMonthResult.rows[0].previousmonthusers, 10);\n            // Hitung pertumbuhan\n            const growthPercentage = previousMonthUsers === 0 ? 0 : (newUsers - previousMonthUsers) / previousMonthUsers * 100;\n            return {\n                newUsers,\n                growthPercentage: parseFloat(growthPercentage.toFixed(2))\n            };\n        } catch (error) {\n            console.error(\"Error fetching new users and growth: \", error);\n            throw error;\n        }\n    }\n    // Get revenue per user\n    static async getRevenuePerUser(role) {\n        try {\n            const query = `\n          WITH current_quarter_revenue AS (\n              SELECT \n                  COALESCE(AVG(o.total_price)::NUMERIC, 0) AS avg_revenue_current_quarter\n              FROM \n                  payments p\n              JOIN \n                  users u ON p.user_id = u.id\n              JOIN \n                  orders o ON o.order_id = p.order_id\n              WHERE \n                  p.status = 'Settlement'\n                  AND u.role = $1\n                  AND EXTRACT(QUARTER FROM p.payment_date) = EXTRACT(QUARTER FROM CURRENT_DATE)\n                  AND EXTRACT(YEAR FROM p.payment_date) = EXTRACT(YEAR FROM CURRENT_DATE)\n          ),\n          previous_quarter_revenue AS (\n              SELECT \n                  COALESCE(AVG(o.total_price)::NUMERIC, 0) AS avg_revenue_previous_quarter\n              FROM \n                  payments p\n              JOIN \n                  users u ON p.user_id = u.id\n              JOIN \n                  orders o ON o.order_id = p.order_id\n              WHERE \n                  p.status = 'Settlement'\n                  AND u.role = $1\n                  AND (\n                      (EXTRACT(QUARTER FROM p.payment_date) = EXTRACT(QUARTER FROM CURRENT_DATE) - 1\n                      AND EXTRACT(YEAR FROM p.payment_date) = EXTRACT(YEAR FROM CURRENT_DATE))\n                      OR (EXTRACT(QUARTER FROM CURRENT_DATE) = 1 AND EXTRACT(QUARTER FROM p.payment_date) = 4 \n                      AND EXTRACT(YEAR FROM p.payment_date) = EXTRACT(YEAR FROM CURRENT_DATE) - 1)\n                  )\n          )\n          SELECT \n              current_quarter_revenue.avg_revenue_current_quarter,\n              previous_quarter_revenue.avg_revenue_previous_quarter,\n              CASE \n                  WHEN previous_quarter_revenue.avg_revenue_previous_quarter = 0 THEN 0\n                  ELSE ((current_quarter_revenue.avg_revenue_current_quarter - previous_quarter_revenue.avg_revenue_previous_quarter) \n                        / previous_quarter_revenue.avg_revenue_previous_quarter) * 100\n              END AS growth_percentage\n          FROM \n              current_quarter_revenue, \n              previous_quarter_revenue;\n      `;\n            const values = [\n                role\n            ];\n            const { rows } = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, values);\n            if (rows[0]) {\n                rows[0].avg_revenue_current_quarter = parseFloat(rows[0].avg_revenue_current_quarter);\n                rows[0].avg_revenue_previous_quarter = parseFloat(rows[0].avg_revenue_previous_quarter);\n                rows[0].growth_percentage = parseFloat(rows[0].growth_percentage);\n            }\n            return rows[0];\n        } catch (error) {\n            console.error('Error fetching revenue per user:', error);\n            throw error;\n        }\n    }\n    // Get student pendidikan distribution\n    static async getStudentPendidikanDistribution() {\n        try {\n            const query = `\n          SELECT \n              CASE\n                  WHEN ua.pendidikan_sekarang = 'Kuliah' THEN \n                      COALESCE(ua.strata, 'Other')\n                  WHEN ua.pendidikan_sekarang IS NULL OR ua.pendidikan_sekarang = '' THEN 'Other'\n                  ELSE ua.pendidikan_sekarang\n              END AS pendidikan_group,\n              COUNT(*) AS total\n          FROM \n              users u\n          LEFT JOIN \n              user_account ua ON u.id = ua.id\n          WHERE\n              u.role = 'student'\n          GROUP BY \n              CASE\n                  WHEN ua.pendidikan_sekarang = 'Kuliah' THEN \n                      COALESCE(ua.strata, 'Other')\n                  WHEN ua.pendidikan_sekarang IS NULL OR ua.pendidikan_sekarang = '' THEN 'Other'\n                  ELSE ua.pendidikan_sekarang\n              END;\n      `;\n            const { rows } = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query);\n            return rows;\n        } catch (error) {\n            console.error('Error fetching pendidikan distribution:', error);\n            throw error;\n        }\n    }\n    // Get student growth\n    static async getStudentGrowth() {\n        try {\n            const query = `\n          WITH student_data AS (\n              SELECT\n                  COALESCE(\n                      CASE\n                          WHEN ua.pendidikan_sekarang = 'Kuliah' THEN CONCAT('Kuliah - ', ua.strata)\n                          WHEN ua.pendidikan_sekarang IS NULL OR ua.pendidikan_sekarang = '' THEN 'Other'\n                          ELSE ua.pendidikan_sekarang\n                      END,\n                      'Other'\n                  ) AS pendidikan_group,\n                  to_char(\n                      (u.create_date AT TIME ZONE 'UTC' AT TIME ZONE 'Asia/Jakarta'),\n                      'IYYY-IW'\n                  ) AS year_week\n              FROM users u\n              LEFT JOIN user_account ua ON u.id = ua.id\n          )\n          SELECT\n              pendidikan_group,\n              year_week,\n              COUNT(*) AS total\n          FROM student_data\n          GROUP BY pendidikan_group, year_week\n          ORDER BY year_week ASC, pendidikan_group ASC;\n      `;\n            const { rows } = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query);\n            return rows;\n        } catch (error) {\n            console.error(\"Error fetching student growth data:\", error);\n            throw error;\n        }\n    }\n    // Get user details by ID\n    static async getUserDetailsById(userId) {\n        try {\n            const query = `\n          SELECT\n              u.username,\n              u.email,\n              u.create_date,\n              u.last_login,\n              ua.tanggal_lahir,\n              ua.nomor_whatsapp,\n              ua.tahun_lulus_sma_smk,\n              ua.tahun_masuk,\n              ua.tahun_lulus,\n              ua.nomor_whatsapp_ortu,\n              ua.provinsi,\n              ua.kota,\n              ua.kecamatan,\n              ua.kelurahan,\n              ua.pendidikan_sekarang,\n              ua.sekolah,\n              ua.kelas,\n              ua.jurusan,\n              ua.pendidikan_terakhir,\n              ua.strata,\n              ua.nama_lengkap,\n              ua.nama_panggilan,\n              ua.jenis_kelamin,\n              ua.universitas,\n              ua.program_studi\n          FROM users u\n          JOIN user_account ua ON u.id = ua.id\n          WHERE u.id = $1\n      `;\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, [\n                userId\n            ]);\n            if (result.rows.length === 0) {\n                throw {\n                    kind: \"not_found\"\n                };\n            }\n            const filteredData = {};\n            for(const key in result.rows[0]){\n                if (result.rows[0][key] !== null) {\n                    filteredData[key] = result.rows[0][key];\n                }\n            }\n            return filteredData;\n        } catch (error) {\n            console.error(\"Error fetching user details:\", error);\n            throw error;\n        }\n    }\n    // Search users by role and name\n    static async searchUsersByRoleAndName(role, searchTerm, limit = 10) {\n        const query = `\n        SELECT userid, name, username\n        FROM v_dashboard_userdata\n        WHERE role = $1 \n        AND (\n            name ILIKE $2 \n            OR username ILIKE $2\n        )\n        ORDER BY name ASC\n        LIMIT $3\n    `;\n        const values = [\n            role,\n            `%${searchTerm}%`,\n            limit\n        ];\n        try {\n            const res = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, values);\n            return res.rows;\n        } catch (error) {\n            throw error;\n        }\n    }\n    // Search users by roles and name\n    static async searchUsersByRolesAndName(roles, searchTerm) {\n        const query = `\n        SELECT userid, name\n        FROM v_dashboard_userdata\n        WHERE role IN (${roles.map((_, i)=>`$${i + 1}`).join(', ')})\n        AND name ILIKE $${roles.length + 1}\n        ORDER BY name ASC\n        LIMIT 50\n    `;\n        const values = [\n            ...roles,\n            `%${searchTerm}%`\n        ];\n        try {\n            const res = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, values);\n            return res.rows;\n        } catch (error) {\n            console.error('Query error:', error.message);\n            throw error;\n        }\n    }\n    // Get student group\n    static async getStudentGroup() {\n        try {\n            const query = `\n        SELECT \n          dgu.id,\n          dgu.name,\n          dgu.id_list,\n          array_agg(vdu.name) AS user_names\n        FROM \n          dimgroupstudent dgu\n        CROSS JOIN LATERAL UNNEST(dgu.id_list) AS user_id\n        JOIN \n          v_dashboard_userdata vdu ON vdu.userid = user_id\n        WHERE dgu.status = 1\n        GROUP BY \n          dgu.id, dgu.name;\n      `;\n            const result = await _lib_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query);\n            return result.rows;\n        } catch (error) {\n            throw new Error(`Error fetching student groups: ${error.message}`);\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserModel);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ2pCLEVBQUUsT0FBT0ksT0FBTztZQUNkRixRQUFRRSxLQUFLLENBQUMsZ0JBQWdCQSxNQUFNZ0IsT0FBTztZQUMzQyxNQUFNaEI7UUFDUjtJQUNGO0lBRUEsb0JBQW9CO0lBQ3BCLGFBQWEyRixrQkFBMkM7UUFDdEQsSUFBSTtZQUNGLE1BQU1yRyxRQUFRLENBQUM7Ozs7Ozs7Ozs7Ozs7O01BY2YsQ0FBQztZQUNELE1BQU1ELFNBQVMsTUFBTUoscURBQVUsQ0FBQ0s7WUFDaEMsT0FBT0QsT0FBT08sSUFBSTtRQUNwQixFQUFFLE9BQU9JLE9BQU87WUFDZCxNQUFNLElBQUk0RixNQUFNLENBQUMsK0JBQStCLEVBQUU1RixNQUFNZ0IsT0FBTyxFQUFFO1FBQ25FO0lBQ0Y7QUFDRjtBQUVBLGlFQUFlOUIsU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsiRDpcXExhdGloYW5cXE5ldyBmb2xkZXIgKDIpXFxGRVxcMVxcRkVcXE5leHRcXGZ1dHVyZWR1XFxtb2RlbHNcXHVzZXIubW9kZWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbW9kZWxzL3VzZXIubW9kZWwudHNcclxuaW1wb3J0IHBvb2wgZnJvbSAnLi4vbGliL2RiJztcclxuaW1wb3J0IHsgUG9vbENsaWVudCB9IGZyb20gJ3BnJztcclxuXHJcbi8vIFR5cGVzXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNlciB7XHJcbiAgaWQ/OiBudW1iZXI7XHJcbiAgdXNlcm5hbWU6IHN0cmluZztcclxuICBmdWxsTmFtZT86IHN0cmluZztcclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIHBhc3N3b3JkOiBzdHJpbmc7XHJcbiAgcm9sZTogc3RyaW5nO1xyXG4gIGNyZWF0ZV9kYXRlPzogRGF0ZTtcclxuICBsYXN0X2xvZ2luPzogRGF0ZTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VyQWNjb3VudCB7XHJcbiAgdXNlcl9pZDogbnVtYmVyO1xyXG4gIG5hbWFfbGVuZ2thcDogc3RyaW5nO1xyXG4gIGlzX21hbnVhbDogYm9vbGVhbjtcclxuICB0YW5nZ2FsX2xhaGlyPzogRGF0ZTtcclxuICBub21vcl93aGF0c2FwcD86IHN0cmluZztcclxuICB0YWh1bl9sdWx1c19zbWFfc21rPzogc3RyaW5nO1xyXG4gIHRhaHVuX21hc3VrPzogc3RyaW5nO1xyXG4gIHRhaHVuX2x1bHVzPzogc3RyaW5nO1xyXG4gIG5vbW9yX3doYXRzYXBwX29ydHU/OiBzdHJpbmc7XHJcbiAgcHJvdmluc2k/OiBzdHJpbmc7XHJcbiAga290YT86IHN0cmluZztcclxuICBrZWNhbWF0YW4/OiBzdHJpbmc7XHJcbiAga2VsdXJhaGFuPzogc3RyaW5nO1xyXG4gIHBlbmRpZGlrYW5fc2VrYXJhbmc/OiBzdHJpbmc7XHJcbiAgc2Vrb2xhaD86IHN0cmluZztcclxuICBrZWxhcz86IHN0cmluZztcclxuICBqdXJ1c2FuPzogc3RyaW5nO1xyXG4gIHBlbmRpZGlrYW5fdGVyYWtoaXI/OiBzdHJpbmc7XHJcbiAgc3RyYXRhPzogc3RyaW5nO1xyXG4gIG5hbWFfcGFuZ2dpbGFuPzogc3RyaW5nO1xyXG4gIGplbmlzX2tlbGFtaW4/OiBzdHJpbmc7XHJcbiAgdW5pdmVyc2l0YXM/OiBzdHJpbmc7XHJcbiAgcHJvZ3JhbV9zdHVkaT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VyRmlsdGVycyB7XHJcbiAgc29ydEZpZWxkPzogc3RyaW5nO1xyXG4gIHNvcnRPcmRlcj86IHN0cmluZztcclxuICBzZWFyY2g/OiBzdHJpbmc7XHJcbiAgcGFnZT86IG51bWJlcjtcclxuICBsaW1pdD86IG51bWJlcjtcclxuICByb2xlPzogc3RyaW5nO1xyXG4gIGVkdWNhdGlvbj86IHN0cmluZztcclxuICBjaXR5Pzogc3RyaW5nO1xyXG4gIHByb3ZpbmNlPzogc3RyaW5nO1xyXG4gIHN0YXR1cz86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VyU3RhdGlzdGljcyB7XHJcbiAgdG90YWxVc2VyczogbnVtYmVyO1xyXG4gIGdyb3d0aFBlcmNlbnRhZ2U6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZXZlbnVlUGVyVXNlciB7XHJcbiAgYXZnX3JldmVudWVfY3VycmVudF9xdWFydGVyOiBudW1iZXI7XHJcbiAgYXZnX3JldmVudWVfcHJldmlvdXNfcXVhcnRlcjogbnVtYmVyO1xyXG4gIGdyb3d0aF9wZXJjZW50YWdlOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUGVuZGlkaWthbkRpc3RyaWJ1dGlvbiB7XHJcbiAgcGVuZGlkaWthbl9ncm91cDogc3RyaW5nO1xyXG4gIHRvdGFsOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3R1ZGVudEdyb3d0aCB7XHJcbiAgcGVuZGlkaWthbl9ncm91cDogc3RyaW5nO1xyXG4gIHllYXJfd2Vlazogc3RyaW5nO1xyXG4gIHRvdGFsOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNlckRldGFpbHMgZXh0ZW5kcyBVc2VyIHtcclxuICB0YW5nZ2FsX2xhaGlyPzogRGF0ZTtcclxuICBub21vcl93aGF0c2FwcD86IHN0cmluZztcclxuICB0YWh1bl9sdWx1c19zbWFfc21rPzogc3RyaW5nO1xyXG4gIHRhaHVuX21hc3VrPzogc3RyaW5nO1xyXG4gIHRhaHVuX2x1bHVzPzogc3RyaW5nO1xyXG4gIG5vbW9yX3doYXRzYXBwX29ydHU/OiBzdHJpbmc7XHJcbiAgcHJvdmluc2k/OiBzdHJpbmc7XHJcbiAga290YT86IHN0cmluZztcclxuICBrZWNhbWF0YW4/OiBzdHJpbmc7XHJcbiAga2VsdXJhaGFuPzogc3RyaW5nO1xyXG4gIHBlbmRpZGlrYW5fc2VrYXJhbmc/OiBzdHJpbmc7XHJcbiAgc2Vrb2xhaD86IHN0cmluZztcclxuICBrZWxhcz86IHN0cmluZztcclxuICBqdXJ1c2FuPzogc3RyaW5nO1xyXG4gIHBlbmRpZGlrYW5fdGVyYWtoaXI/OiBzdHJpbmc7XHJcbiAgc3RyYXRhPzogc3RyaW5nO1xyXG4gIG5hbWFfbGVuZ2thcD86IHN0cmluZztcclxuICBuYW1hX3BhbmdnaWxhbj86IHN0cmluZztcclxuICBqZW5pc19rZWxhbWluPzogc3RyaW5nO1xyXG4gIHVuaXZlcnNpdGFzPzogc3RyaW5nO1xyXG4gIHByb2dyYW1fc3R1ZGk/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2VhcmNoVXNlciB7XHJcbiAgdXNlcmlkOiBudW1iZXI7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHVzZXJuYW1lPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN0dWRlbnRHcm91cCB7XHJcbiAgaWQ6IG51bWJlcjtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgaWRfbGlzdDogbnVtYmVyW107XHJcbiAgdXNlcl9uYW1lczogc3RyaW5nW107XHJcbn1cclxuXHJcbi8vIFVzZXIgTW9kZWwgQ2xhc3NcclxuY2xhc3MgVXNlck1vZGVsIHtcclxuICAvLyBDcmVhdGUgbmV3IHVzZXJcclxuICBzdGF0aWMgYXN5bmMgY3JlYXRlKG5ld1VzZXI6IFVzZXIpOiBQcm9taXNlPFVzZXI+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgICAgXCJJTlNFUlQgSU5UTyB1c2VycyAodXNlcm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgcm9sZSkgVkFMVUVTICgkMSwgJDIsICQzLCAkNCkgUkVUVVJOSU5HICpcIixcclxuICAgICAgICBbbmV3VXNlci51c2VybmFtZSwgbmV3VXNlci5lbWFpbCwgbmV3VXNlci5wYXNzd29yZCwgbmV3VXNlci5yb2xlXVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKG5ld1VzZXIuZnVsbE5hbWUpIHtcclxuICAgICAgICBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICAgICAgXCJJTlNFUlQgSU5UTyB1c2VyX2FjY291bnQgKHVzZXJfaWQsIG5hbWFfbGVuZ2thcCwgaXNfbWFudWFsKSBWQUxVRVMgKCQxLCAkMiwgZmFsc2UpXCIsXHJcbiAgICAgICAgICBbcmVzdWx0LnJvd3NbMF0udXNlcl9pZCwgbmV3VXNlci5mdWxsTmFtZV1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhcImNyZWF0ZWQgdXNlcjogXCIsIHJlc3VsdC5yb3dzWzBdLnVzZXJfaWQpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImVycm9yOiBcIiwgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCBjYXJ0IGNvdW50XHJcbiAgc3RhdGljIGFzeW5jIGdldENhcnRDb3VudCh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgIGBTRUxFQ1QgQ09BTEVTQ0UoU1VNKGNpLnF1YW50aXR5KSwwKSBBUyBjYXJ0Y291bnRcclxuICAgICAgICAgRlJPTSBjYXJ0X2l0ZW1zIGNpXHJcbiAgICAgICAgIEpPSU4gY2FydCAgICAgICAgYyAgT04gY2kuY2FydF9pZCA9IGMuaWRcclxuICAgICAgICBXSEVSRSBjLnVzZXJfaWQgPSAkMWAsXHJcbiAgICAgIFt1c2VySWRdXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHBhcnNlSW50KHJvd3NbMF0uY2FydGNvdW50LCAxMCk7XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgdW5wYWlkIGNvdW50XHJcbiAgc3RhdGljIGFzeW5jIGdldFVucGFpZENvdW50KHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgYFNFTEVDVCBDT1VOVCgqKSBBUyB1bnBhaWRjb3VudFxyXG4gICAgICAgICBGUk9NIHNhbGVzX29yZGVyX2hlYWRlclxyXG4gICAgICAgIFdIRVJFIHVzZXJfaWQgPSAkMVxyXG4gICAgICAgICAgQU5EIHBheW1lbnRfc3RhdHVzID0gJ3BlbmRpbmcnYCxcclxuICAgICAgW3VzZXJJZF1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcGFyc2VJbnQocm93c1swXS51bnBhaWRjb3VudCwgMTApO1xyXG4gIH1cclxuXHJcbiAgLy8gRGVsZXRlIHVzZXIgYnkgSURcclxuICBzdGF0aWMgYXN5bmMgZGVsZXRlVXNlcih1c2VySWQ6IG51bWJlcik6IFByb21pc2U8VXNlcj4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgICBgREVMRVRFIEZST00gdXNlcnMgV0hFUkUgaWQgPSAkMSBSRVRVUk5JTkcgaWRgLFxyXG4gICAgICAgIFt1c2VySWRdXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAocmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgeyBraW5kOiBcIm5vdF9mb3VuZFwiIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRGVsZXRlZCB1c2VyIHdpdGggaWQ6XCIsIHJlc3VsdC5yb3dzWzBdLmlkKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5yb3dzWzBdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIHVzZXI6XCIsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBVcGRhdGUgdXNlciBkYXRhXHJcbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVVzZXIodXNlcklkOiBudW1iZXIsIHVwZGF0ZWREYXRhOiB7XHJcbiAgICB1c2VybmFtZTogc3RyaW5nO1xyXG4gICAgZW1haWw6IHN0cmluZztcclxuICAgIG9sZFBhc3N3b3JkOiBzdHJpbmc7XHJcbiAgICBuZXdQYXNzd29yZDogc3RyaW5nO1xyXG4gIH0pOiBQcm9taXNlPFVzZXI+IHtcclxuICAgIGNvbnN0IHsgdXNlcm5hbWUsIGVtYWlsLCBvbGRQYXNzd29yZCwgbmV3UGFzc3dvcmQgfSA9IHVwZGF0ZWREYXRhO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIENoZWNrIG9sZCBwYXNzd29yZFxyXG4gICAgICBjb25zdCBjaGVja1Jlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgICAgYFNFTEVDVCBwYXNzd29yZCBGUk9NIHVzZXJzIFdIRVJFIGlkID0gJDFgLFxyXG4gICAgICAgIFt1c2VySWRdXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoY2hlY2tSZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aHJvdyB7IG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmRcIiB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBjdXJyZW50UGFzc3dvcmQgPSBjaGVja1Jlc3VsdC5yb3dzWzBdLnBhc3N3b3JkO1xyXG5cclxuICAgICAgaWYgKGN1cnJlbnRQYXNzd29yZCAhPT0gb2xkUGFzc3dvcmQpIHtcclxuICAgICAgICB0aHJvdyB7IG1lc3NhZ2U6IFwiT2xkIHBhc3N3b3JkIGRvZXMgbm90IG1hdGNoXCIgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVXBkYXRlIHVzZXIgZGF0YVxyXG4gICAgICBjb25zdCB1cGRhdGVSZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICAgIGBVUERBVEUgdXNlcnNcclxuICAgICAgICAgU0VUIHVzZXJuYW1lID0gJDEsIGVtYWlsID0gJDIsIHBhc3N3b3JkID0gJDNcclxuICAgICAgICAgV0hFUkUgaWQgPSAkNFxyXG4gICAgICAgICBSRVRVUk5JTkcgaWQsIHVzZXJuYW1lLCBlbWFpbCwgcm9sZSwgbGFzdF9sb2dpbiwgY3JlYXRlX2RhdGVgLFxyXG4gICAgICAgIFt1c2VybmFtZSwgZW1haWwsIG5ld1Bhc3N3b3JkLCB1c2VySWRdXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAodXBkYXRlUmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgeyBtZXNzYWdlOiBcIlVwZGF0ZSBmYWlsZWRcIiB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdXBkYXRlUmVzdWx0LnJvd3NbMF07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgdXNlciBkYXRhOlwiLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgaWYgdXNlcm5hbWUgb3IgZW1haWwgZXhpc3RzXHJcbiAgc3RhdGljIGFzeW5jIGNoZWNrRXhpc3RlbmNlKHVzZXJuYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJbXT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgICBcIlNFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSAkMSBPUiBlbWFpbCA9ICQyXCIsXHJcbiAgICAgICAgW3VzZXJuYW1lLCBlbWFpbF1cclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5yb3dzO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJlcnJvcjogXCIsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBGaW5kIHVzZXIgYnkgdXNlcm5hbWVcclxuICBzdGF0aWMgYXN5bmMgZmluZEJ5VXNlcm5hbWUodXNlcm5hbWU6IHN0cmluZyk6IFByb21pc2U8VXNlcj4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ0V4ZWN1dGluZyBxdWVyeSB0byBmaW5kIHVzZXIgYnkgdXNlcm5hbWU6JywgdXNlcm5hbWUpO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICAgIFwiU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ICQxXCIsXHJcbiAgICAgICAgW3VzZXJuYW1lXVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1F1ZXJ5IHJlc3VsdDonLCByZXN1bHQucm93cyk7XHJcbiAgICAgIGlmIChyZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBub3QgZm91bmQgZm9yIHVzZXJuYW1lOicsIHVzZXJuYW1lKTtcclxuICAgICAgICB0aHJvdyB7IGtpbmQ6IFwibm90X2ZvdW5kXCIgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1VzZXIgZm91bmQ6JywgcmVzdWx0LnJvd3NbMF0pO1xyXG4gICAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImVycm9yIGV4ZWN1dGluZyBxdWVyeTogXCIsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBGaW5kIHVzZXIgYnkgSURcclxuICBzdGF0aWMgYXN5bmMgZmluZEJ5SWQoaWQ6IG51bWJlcik6IFByb21pc2U8VXNlcj4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ0V4ZWN1dGluZyBxdWVyeSB0byBmaW5kIHVzZXIgYnkgaWQ6JywgaWQpO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICAgIFwiU0VMRUNUIGlkLCB1c2VybmFtZSwgZW1haWwgRlJPTSB1c2VycyBXSEVSRSBpZCA9ICQxXCIsXHJcbiAgICAgICAgW2lkXVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1F1ZXJ5IHJlc3VsdDonLCByZXN1bHQucm93cyk7XHJcbiAgICAgIGlmIChyZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBub3QgZm91bmQgZm9yIGlkOicsIGlkKTtcclxuICAgICAgICB0aHJvdyB7IGtpbmQ6IFwibm90X2ZvdW5kXCIgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1VzZXIgZm91bmQ6JywgcmVzdWx0LnJvd3NbMF0pO1xyXG4gICAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImVycm9yIGV4ZWN1dGluZyBxdWVyeTogXCIsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBVcGRhdGUgbGFzdCBsb2dpblxyXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVMYXN0TG9naW4odXNlcm5hbWU6IHN0cmluZyk6IFByb21pc2U8VXNlcj4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgICBcIlVQREFURSB1c2VycyBTRVQgbGFzdF9sb2dpbiA9IE5PVygpIFdIRVJFIHVzZXJuYW1lID0gJDEgUkVUVVJOSU5HICpcIixcclxuICAgICAgICBbdXNlcm5hbWVdXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiVXBkYXRlZCBsYXN0X2xvZ2luIGZvciB1c2VyOlwiLCByZXN1bHQucm93c1swXSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQucm93c1swXTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgdXBkYXRpbmcgbGFzdF9sb2dpbjpcIiwgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCB1c2VyIGRhdGEgYnkgcm9sZVxyXG4gIHN0YXRpYyBhc3luYyBnZXRVc2VyRGF0YUJ5Um9sZShyb2xlOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJbXT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ0V4ZWN1dGluZyBxdWVyeSB0byBmaW5kIHVzZXJzIGJ5IHJvbGU6Jywgcm9sZSk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgICAgXCJTRUxFQ1QgKiBGUk9NIHZfZGFzaGJvYXJkX1VzZXJEYXRhIFdIRVJFIHJvbGUgPSAkMVwiLFxyXG4gICAgICAgIFtyb2xlXVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1F1ZXJ5IHJlc3VsdDonLCByZXN1bHQucm93cyk7XHJcbiAgICAgIGlmIChyZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gdXNlcnMgZm91bmQgZm9yIHJvbGU6Jywgcm9sZSk7XHJcbiAgICAgICAgdGhyb3cgeyBraW5kOiBcIm5vdF9mb3VuZFwiIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQucm93cztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBleGVjdXRpbmcgcXVlcnk6XCIsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgcGFnaW5hdGVkIHVzZXJzXHJcbiAgc3RhdGljIGFzeW5jIGdldFBhZ2luYXRlZFVzZXJzKG9wdGlvbnM6IFVzZXJGaWx0ZXJzID0ge30pOiBQcm9taXNlPHtcclxuICAgIHVzZXJzOiBhbnlbXTtcclxuICAgIHRvdGFsOiBudW1iZXI7XHJcbiAgfT4ge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBzb3J0RmllbGQgPSAnaWQnLFxyXG4gICAgICBzb3J0T3JkZXIgPSAnYXNjJyxcclxuICAgICAgc2VhcmNoID0gJycsXHJcbiAgICAgIHBhZ2UgPSAxLFxyXG4gICAgICBsaW1pdCA9IDEwLFxyXG4gICAgICByb2xlID0gJycsXHJcbiAgICAgIGVkdWNhdGlvbiA9ICcnLFxyXG4gICAgICBjaXR5ID0gJycsXHJcbiAgICAgIHByb3ZpbmNlID0gJycsXHJcbiAgICAgIHN0YXR1cyA9ICcnXHJcbiAgICB9ID0gb3B0aW9ucztcclxuXHJcbiAgICBjb25zdCBvZmZzZXQgPSAocGFnZSAtIDEpICogbGltaXQ7XHJcbiAgICBsZXQgcXVlcnkgPSBgXHJcbiAgICBXSVRIIGZpbHRlcmVkX3VzZXJzIEFTIChcclxuICAgICAgU0VMRUNUIFxyXG4gICAgICAgIHVzZXJpZCBpZCwqXHJcbiAgICAgIEZST00gdl9kYXNoYm9hcmRfVXNlckRhdGEgdVxyXG4gICAgICBXSEVSRSAxPTFcclxuICAgIGA7XHJcblxyXG4gICAgY29uc3QgdmFsdWVzOiBhbnlbXSA9IFtdO1xyXG4gICAgY29uc3QgY29uZGl0aW9uczogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAvLyBGaWx0ZXIgYnkgcm9sZVxyXG4gICAgaWYgKHJvbGUgJiYgcm9sZSAhPT0gJ0FsbCcpIHtcclxuICAgICAgdmFsdWVzLnB1c2gocm9sZSk7XHJcbiAgICAgIGNvbmRpdGlvbnMucHVzaChgQU5EIHUucm9sZSA9ICQke3ZhbHVlcy5sZW5ndGh9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmlsdGVyIGJ5IGVkdWNhdGlvblxyXG4gICAgaWYgKGVkdWNhdGlvbiAmJiBlZHVjYXRpb24gIT09ICdBbGwnKSB7XHJcbiAgICAgIHZhbHVlcy5wdXNoKGVkdWNhdGlvbik7XHJcbiAgICAgIGNvbmRpdGlvbnMucHVzaChgQU5EIHUucGVuZGlkaWthbiA9ICQke3ZhbHVlcy5sZW5ndGh9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmlsdGVyIGJ5IGNpdHlcclxuICAgIGlmIChjaXR5ICYmIGNpdHkgIT09ICdBbGwnKSB7XHJcbiAgICAgIHZhbHVlcy5wdXNoKGNpdHkpO1xyXG4gICAgICBjb25kaXRpb25zLnB1c2goYEFORCB1LmtvdGEgPSAkJHt2YWx1ZXMubGVuZ3RofWApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbHRlciBieSBwcm92aW5jZVxyXG4gICAgaWYgKHByb3ZpbmNlICYmIHByb3ZpbmNlICE9PSAnQWxsJykge1xyXG4gICAgICB2YWx1ZXMucHVzaChwcm92aW5jZSk7XHJcbiAgICAgIGNvbmRpdGlvbnMucHVzaChgQU5EIHUucHJvdmluc2kgPSAkJHt2YWx1ZXMubGVuZ3RofWApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbHRlciBieSBzdGF0dXNcclxuICAgIGlmIChzdGF0dXMgJiYgc3RhdHVzICE9PSAnQWxsJykge1xyXG4gICAgICB2YWx1ZXMucHVzaChzdGF0dXMpO1xyXG4gICAgICBjb25kaXRpb25zLnB1c2goYEFORCB1LnN0YXR1cyA9ICQke3ZhbHVlcy5sZW5ndGh9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2VhcmNoIGluIHVzZXJfY29kZSwgbmFtYV9sZW5na2FwLCBhbmQgZW1haWxcclxuICAgIGlmIChzZWFyY2gpIHtcclxuICAgICAgdmFsdWVzLnB1c2goYCUke3NlYXJjaH0lYCk7XHJcbiAgICAgIHZhbHVlcy5wdXNoKGAlJHtzZWFyY2h9JWApO1xyXG4gICAgICB2YWx1ZXMucHVzaChgJSR7c2VhcmNofSVgKTtcclxuICAgICAgY29uZGl0aW9ucy5wdXNoKGBBTkQgKFxyXG4gICAgICAgIHUudXNlcl9jb2RlIElMSUtFICQke3ZhbHVlcy5sZW5ndGggLSAyfSBPUiBcclxuICAgICAgICB1Lm5hbWFfbGVuZ2thcCBJTElLRSAkJHt2YWx1ZXMubGVuZ3RoIC0gMX0gT1IgXHJcbiAgICAgICAgdS5lbWFpbCBJTElLRSAkJHt2YWx1ZXMubGVuZ3RofVxyXG4gICAgICApYCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNvbmRpdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBxdWVyeSArPSBjb25kaXRpb25zLmpvaW4oJyAnKTtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeSArPSBgKSBcclxuICAgICAgU0VMRUNUIFxyXG4gICAgICAgICosIFxyXG4gICAgICAgIENPVU5UKCopIE9WRVIoKSBBUyB0b3RhbCBcclxuICAgICAgRlJPTSBmaWx0ZXJlZF91c2Vyc1xyXG4gICAgYDtcclxuXHJcbiAgICAvLyBTb3J0aW5nXHJcbiAgICBjb25zdCB2YWxpZFNvcnRGaWVsZHMgPSBbJ3VzZXJpZCcsICd1c2VyX2NvZGUnLCAnbmFtYV9sZW5na2FwJywgJ2VtYWlsJywgJ3BlbmRpZGlrYW4nLCAna290YScsICdwcm92aW5zaScsICdzdGF0dXMnXTtcclxuICAgIGlmICh2YWxpZFNvcnRGaWVsZHMuaW5jbHVkZXMoc29ydEZpZWxkLnRvTG93ZXJDYXNlKCkpICYmIFsnYXNjJywgJ2Rlc2MnXS5pbmNsdWRlcyhzb3J0T3JkZXIudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgcXVlcnkgKz0gYCBPUkRFUiBCWSAke3NvcnRGaWVsZH0gJHtzb3J0T3JkZXIudG9VcHBlckNhc2UoKX1gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcXVlcnkgKz0gYCBPUkRFUiBCWSB1c2VyaWQgQVNDYDtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeSArPSBgIExJTUlUICQke3ZhbHVlcy5sZW5ndGggKyAxfSBPRkZTRVQgJCR7dmFsdWVzLmxlbmd0aCArIDJ9YDtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KHF1ZXJ5LCBbLi4udmFsdWVzLCBsaW1pdCwgb2Zmc2V0XSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2VyczogcmVzdWx0LnJvd3MsXHJcbiAgICAgIHRvdGFsOiByZXN1bHQucm93cy5sZW5ndGggPiAwID8gcmVzdWx0LnJvd3NbMF0udG90YWwgOiAwXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gR2V0IHRvdGFsIHVzZXJzIGFuZCBncm93dGggYnkgcm9sZVxyXG4gIHN0YXRpYyBhc3luYyBnZXRUb3RhbFVzZXJzQW5kR3Jvd3RoQnlSb2xlKHJvbGU6IHN0cmluZyk6IFByb21pc2U8VXNlclN0YXRpc3RpY3M+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRDb3VudFF1ZXJ5ID0gYFxyXG4gICAgICAgICAgU0VMRUNUIENPVU5UKCopIEFTIHRvdGFsIFxyXG4gICAgICAgICAgRlJPTSB1c2Vyc1xyXG4gICAgICAgICAgV0hFUkUgcm9sZSA9ICQxO1xyXG4gICAgICBgO1xyXG4gICAgICBjb25zdCBsYXN0TW9udGhDb3VudFF1ZXJ5ID0gYFxyXG4gICAgICAgICAgU0VMRUNUIENPVU5UKCopIEFTIHRvdGFsIFxyXG4gICAgICAgICAgRlJPTSB1c2Vyc1xyXG4gICAgICAgICAgV0hFUkUgcm9sZSA9ICQxIEFORCBjcmVhdGVfZGF0ZSA+PSBOT1coKSAtIElOVEVSVkFMICcxIE1PTlRIJztcclxuICAgICAgYDtcclxuXHJcbiAgICAgIGNvbnN0IGN1cnJlbnRDb3VudFJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkoY3VycmVudENvdW50UXVlcnksIFtyb2xlXSk7XHJcbiAgICAgIGNvbnN0IGxhc3RNb250aENvdW50UmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShsYXN0TW9udGhDb3VudFF1ZXJ5LCBbcm9sZV0pO1xyXG5cclxuICAgICAgY29uc3QgdG90YWxVc2VycyA9IGN1cnJlbnRDb3VudFJlc3VsdC5yb3dzWzBdLnRvdGFsO1xyXG4gICAgICBjb25zdCBsYXN0TW9udGhVc2VycyA9IGxhc3RNb250aENvdW50UmVzdWx0LnJvd3NbMF0udG90YWw7XHJcblxyXG4gICAgICAvLyBDYWxjdWxhdGUgZ3Jvd3RoXHJcbiAgICAgIGNvbnN0IGdyb3d0aFBlcmNlbnRhZ2UgPSBsYXN0TW9udGhVc2VycyA9PT0gMFxyXG4gICAgICAgID8gMFxyXG4gICAgICAgIDogKCh0b3RhbFVzZXJzIC0gbGFzdE1vbnRoVXNlcnMpIC8gbGFzdE1vbnRoVXNlcnMpICogMTAwO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0b3RhbFVzZXJzLFxyXG4gICAgICAgIGdyb3d0aFBlcmNlbnRhZ2U6IHBhcnNlRmxvYXQoZ3Jvd3RoUGVyY2VudGFnZS50b0ZpeGVkKDIpKVxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdG90YWwgdXNlcnMgYW5kIGdyb3d0aDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gR2V0IGFjdGl2ZSB1c2VycyBhbmQgZ3Jvd3RoIGJ5IHJvbGVcclxuICBzdGF0aWMgYXN5bmMgZ2V0QWN0aXZlVXNlcnNBbmRHcm93dGhCeVJvbGUocm9sZTogc3RyaW5nKTogUHJvbWlzZTxVc2VyU3RhdGlzdGljcz4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgYWN0aXZlVXNlcnNRdWVyeSA9IGBcclxuICAgICAgICAgIFNFTEVDVCBDT1VOVCgqKSBBUyBhY3RpdmVVc2Vyc1xyXG4gICAgICAgICAgRlJPTSB1c2Vyc1xyXG4gICAgICAgICAgV0hFUkUgcm9sZSA9ICQxIEFORCBsYXN0X2xvZ2luID49IE5PVygpIC0gSU5URVJWQUwgJzE0IERBWVMnO1xyXG4gICAgICBgO1xyXG5cclxuICAgICAgY29uc3QgbGFzdE1vbnRoQWN0aXZlVXNlcnNRdWVyeSA9IGBcclxuICAgICAgICAgIFNFTEVDVCBDT1VOVCgqKSBBUyBsYXN0TW9udGhBY3RpdmVVc2Vyc1xyXG4gICAgICAgICAgRlJPTSB1c2Vyc1xyXG4gICAgICAgICAgV0hFUkUgcm9sZSA9ICQxIEFORCBsYXN0X2xvZ2luID49IE5PVygpIC0gSU5URVJWQUwgJzMwIERBWVMnO1xyXG4gICAgICBgO1xyXG5cclxuICAgICAgY29uc3QgYWN0aXZlVXNlcnNSZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KGFjdGl2ZVVzZXJzUXVlcnksIFtyb2xlXSk7XHJcbiAgICAgIGNvbnN0IGxhc3RNb250aEFjdGl2ZVVzZXJzUmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShsYXN0TW9udGhBY3RpdmVVc2Vyc1F1ZXJ5LCBbcm9sZV0pO1xyXG5cclxuICAgICAgY29uc3QgYWN0aXZlVXNlcnMgPSBwYXJzZUludChhY3RpdmVVc2Vyc1Jlc3VsdC5yb3dzWzBdLmFjdGl2ZXVzZXJzLCAxMCk7XHJcbiAgICAgIGNvbnN0IGxhc3RNb250aEFjdGl2ZVVzZXJzID0gcGFyc2VJbnQobGFzdE1vbnRoQWN0aXZlVXNlcnNSZXN1bHQucm93c1swXS5sYXN0bW9udGhhY3RpdmV1c2VycywgMTApO1xyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIGdyb3d0aFxyXG4gICAgICBjb25zdCBncm93dGhQZXJjZW50YWdlID0gbGFzdE1vbnRoQWN0aXZlVXNlcnMgPT09IDBcclxuICAgICAgICA/IDBcclxuICAgICAgICA6ICgoYWN0aXZlVXNlcnMgLSBsYXN0TW9udGhBY3RpdmVVc2VycykgLyBsYXN0TW9udGhBY3RpdmVVc2VycykgKiAxMDA7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGFjdGl2ZVVzZXJzLFxyXG4gICAgICAgIGdyb3d0aFBlcmNlbnRhZ2U6IHBhcnNlRmxvYXQoZ3Jvd3RoUGVyY2VudGFnZS50b0ZpeGVkKDIpKVxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGFjdGl2ZSB1c2VycyBhbmQgZ3Jvd3RoOiBcIiwgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCBuZXcgdXNlcnMgYW5kIGdyb3d0aCBieSByb2xlXHJcbiAgc3RhdGljIGFzeW5jIGdldE5ld1VzZXJzQW5kR3Jvd3RoQnlSb2xlKHJvbGU6IHN0cmluZyk6IFByb21pc2U8VXNlclN0YXRpc3RpY3M+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFF1ZXJ5IHVudHVrIHBlbmdndW5hIGJhcnUgYnVsYW4gaW5pXHJcbiAgICAgIGNvbnN0IGN1cnJlbnRNb250aFF1ZXJ5ID0gYFxyXG4gICAgICAgICAgU0VMRUNUIENPVU5UKCopIEFTIG5ld1VzZXJzXHJcbiAgICAgICAgICBGUk9NIHVzZXJzXHJcbiAgICAgICAgICBXSEVSRSByb2xlID0gJDEgQU5EIGNyZWF0ZV9kYXRlID49IERBVEVfVFJVTkMoJ21vbnRoJywgTk9XKCkpO1xyXG4gICAgICBgO1xyXG5cclxuICAgICAgLy8gUXVlcnkgdW50dWsgcGVuZ2d1bmEgYmFydSBidWxhbiBsYWx1XHJcbiAgICAgIGNvbnN0IHByZXZpb3VzTW9udGhRdWVyeSA9IGBcclxuICAgICAgICAgIFNFTEVDVCBDT1VOVCgqKSBBUyBwcmV2aW91c01vbnRoVXNlcnNcclxuICAgICAgICAgIEZST00gdXNlcnNcclxuICAgICAgICAgIFdIRVJFIHJvbGUgPSAkMSBBTkQgY3JlYXRlX2RhdGUgPj0gREFURV9UUlVOQygnbW9udGgnLCBOT1coKSkgLSBJTlRFUlZBTCAnMSBNT05USCdcclxuICAgICAgICAgICAgQU5EIGNyZWF0ZV9kYXRlIDwgREFURV9UUlVOQygnbW9udGgnLCBOT1coKSk7XHJcbiAgICAgIGA7XHJcblxyXG4gICAgICBjb25zdCBjdXJyZW50TW9udGhSZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KGN1cnJlbnRNb250aFF1ZXJ5LCBbcm9sZV0pO1xyXG4gICAgICBjb25zdCBwcmV2aW91c01vbnRoUmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShwcmV2aW91c01vbnRoUXVlcnksIFtyb2xlXSk7XHJcblxyXG4gICAgICBjb25zdCBuZXdVc2VycyA9IHBhcnNlSW50KGN1cnJlbnRNb250aFJlc3VsdC5yb3dzWzBdLm5ld3VzZXJzLCAxMCk7XHJcbiAgICAgIGNvbnN0IHByZXZpb3VzTW9udGhVc2VycyA9IHBhcnNlSW50KHByZXZpb3VzTW9udGhSZXN1bHQucm93c1swXS5wcmV2aW91c21vbnRodXNlcnMsIDEwKTtcclxuXHJcbiAgICAgIC8vIEhpdHVuZyBwZXJ0dW1idWhhblxyXG4gICAgICBjb25zdCBncm93dGhQZXJjZW50YWdlID0gcHJldmlvdXNNb250aFVzZXJzID09PSAwXHJcbiAgICAgICAgPyAwXHJcbiAgICAgICAgOiAoKG5ld1VzZXJzIC0gcHJldmlvdXNNb250aFVzZXJzKSAvIHByZXZpb3VzTW9udGhVc2VycykgKiAxMDA7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG5ld1VzZXJzLFxyXG4gICAgICAgIGdyb3d0aFBlcmNlbnRhZ2U6IHBhcnNlRmxvYXQoZ3Jvd3RoUGVyY2VudGFnZS50b0ZpeGVkKDIpKVxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIG5ldyB1c2VycyBhbmQgZ3Jvd3RoOiBcIiwgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCByZXZlbnVlIHBlciB1c2VyXHJcbiAgc3RhdGljIGFzeW5jIGdldFJldmVudWVQZXJVc2VyKHJvbGU6IHN0cmluZyk6IFByb21pc2U8UmV2ZW51ZVBlclVzZXI+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gYFxyXG4gICAgICAgICAgV0lUSCBjdXJyZW50X3F1YXJ0ZXJfcmV2ZW51ZSBBUyAoXHJcbiAgICAgICAgICAgICAgU0VMRUNUIFxyXG4gICAgICAgICAgICAgICAgICBDT0FMRVNDRShBVkcoby50b3RhbF9wcmljZSk6Ok5VTUVSSUMsIDApIEFTIGF2Z19yZXZlbnVlX2N1cnJlbnRfcXVhcnRlclxyXG4gICAgICAgICAgICAgIEZST00gXHJcbiAgICAgICAgICAgICAgICAgIHBheW1lbnRzIHBcclxuICAgICAgICAgICAgICBKT0lOIFxyXG4gICAgICAgICAgICAgICAgICB1c2VycyB1IE9OIHAudXNlcl9pZCA9IHUuaWRcclxuICAgICAgICAgICAgICBKT0lOIFxyXG4gICAgICAgICAgICAgICAgICBvcmRlcnMgbyBPTiBvLm9yZGVyX2lkID0gcC5vcmRlcl9pZFxyXG4gICAgICAgICAgICAgIFdIRVJFIFxyXG4gICAgICAgICAgICAgICAgICBwLnN0YXR1cyA9ICdTZXR0bGVtZW50J1xyXG4gICAgICAgICAgICAgICAgICBBTkQgdS5yb2xlID0gJDFcclxuICAgICAgICAgICAgICAgICAgQU5EIEVYVFJBQ1QoUVVBUlRFUiBGUk9NIHAucGF5bWVudF9kYXRlKSA9IEVYVFJBQ1QoUVVBUlRFUiBGUk9NIENVUlJFTlRfREFURSlcclxuICAgICAgICAgICAgICAgICAgQU5EIEVYVFJBQ1QoWUVBUiBGUk9NIHAucGF5bWVudF9kYXRlKSA9IEVYVFJBQ1QoWUVBUiBGUk9NIENVUlJFTlRfREFURSlcclxuICAgICAgICAgICksXHJcbiAgICAgICAgICBwcmV2aW91c19xdWFydGVyX3JldmVudWUgQVMgKFxyXG4gICAgICAgICAgICAgIFNFTEVDVCBcclxuICAgICAgICAgICAgICAgICAgQ09BTEVTQ0UoQVZHKG8udG90YWxfcHJpY2UpOjpOVU1FUklDLCAwKSBBUyBhdmdfcmV2ZW51ZV9wcmV2aW91c19xdWFydGVyXHJcbiAgICAgICAgICAgICAgRlJPTSBcclxuICAgICAgICAgICAgICAgICAgcGF5bWVudHMgcFxyXG4gICAgICAgICAgICAgIEpPSU4gXHJcbiAgICAgICAgICAgICAgICAgIHVzZXJzIHUgT04gcC51c2VyX2lkID0gdS5pZFxyXG4gICAgICAgICAgICAgIEpPSU4gXHJcbiAgICAgICAgICAgICAgICAgIG9yZGVycyBvIE9OIG8ub3JkZXJfaWQgPSBwLm9yZGVyX2lkXHJcbiAgICAgICAgICAgICAgV0hFUkUgXHJcbiAgICAgICAgICAgICAgICAgIHAuc3RhdHVzID0gJ1NldHRsZW1lbnQnXHJcbiAgICAgICAgICAgICAgICAgIEFORCB1LnJvbGUgPSAkMVxyXG4gICAgICAgICAgICAgICAgICBBTkQgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgKEVYVFJBQ1QoUVVBUlRFUiBGUk9NIHAucGF5bWVudF9kYXRlKSA9IEVYVFJBQ1QoUVVBUlRFUiBGUk9NIENVUlJFTlRfREFURSkgLSAxXHJcbiAgICAgICAgICAgICAgICAgICAgICBBTkQgRVhUUkFDVChZRUFSIEZST00gcC5wYXltZW50X2RhdGUpID0gRVhUUkFDVChZRUFSIEZST00gQ1VSUkVOVF9EQVRFKSlcclxuICAgICAgICAgICAgICAgICAgICAgIE9SIChFWFRSQUNUKFFVQVJURVIgRlJPTSBDVVJSRU5UX0RBVEUpID0gMSBBTkQgRVhUUkFDVChRVUFSVEVSIEZST00gcC5wYXltZW50X2RhdGUpID0gNCBcclxuICAgICAgICAgICAgICAgICAgICAgIEFORCBFWFRSQUNUKFlFQVIgRlJPTSBwLnBheW1lbnRfZGF0ZSkgPSBFWFRSQUNUKFlFQVIgRlJPTSBDVVJSRU5UX0RBVEUpIC0gMSlcclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgU0VMRUNUIFxyXG4gICAgICAgICAgICAgIGN1cnJlbnRfcXVhcnRlcl9yZXZlbnVlLmF2Z19yZXZlbnVlX2N1cnJlbnRfcXVhcnRlcixcclxuICAgICAgICAgICAgICBwcmV2aW91c19xdWFydGVyX3JldmVudWUuYXZnX3JldmVudWVfcHJldmlvdXNfcXVhcnRlcixcclxuICAgICAgICAgICAgICBDQVNFIFxyXG4gICAgICAgICAgICAgICAgICBXSEVOIHByZXZpb3VzX3F1YXJ0ZXJfcmV2ZW51ZS5hdmdfcmV2ZW51ZV9wcmV2aW91c19xdWFydGVyID0gMCBUSEVOIDBcclxuICAgICAgICAgICAgICAgICAgRUxTRSAoKGN1cnJlbnRfcXVhcnRlcl9yZXZlbnVlLmF2Z19yZXZlbnVlX2N1cnJlbnRfcXVhcnRlciAtIHByZXZpb3VzX3F1YXJ0ZXJfcmV2ZW51ZS5hdmdfcmV2ZW51ZV9wcmV2aW91c19xdWFydGVyKSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyBwcmV2aW91c19xdWFydGVyX3JldmVudWUuYXZnX3JldmVudWVfcHJldmlvdXNfcXVhcnRlcikgKiAxMDBcclxuICAgICAgICAgICAgICBFTkQgQVMgZ3Jvd3RoX3BlcmNlbnRhZ2VcclxuICAgICAgICAgIEZST00gXHJcbiAgICAgICAgICAgICAgY3VycmVudF9xdWFydGVyX3JldmVudWUsIFxyXG4gICAgICAgICAgICAgIHByZXZpb3VzX3F1YXJ0ZXJfcmV2ZW51ZTtcclxuICAgICAgYDtcclxuICAgICAgY29uc3QgdmFsdWVzID0gW3JvbGVdO1xyXG4gICAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHBvb2wucXVlcnkocXVlcnksIHZhbHVlcyk7XHJcblxyXG4gICAgICBpZiAocm93c1swXSkge1xyXG4gICAgICAgIHJvd3NbMF0uYXZnX3JldmVudWVfY3VycmVudF9xdWFydGVyID0gcGFyc2VGbG9hdChyb3dzWzBdLmF2Z19yZXZlbnVlX2N1cnJlbnRfcXVhcnRlcik7XHJcbiAgICAgICAgcm93c1swXS5hdmdfcmV2ZW51ZV9wcmV2aW91c19xdWFydGVyID0gcGFyc2VGbG9hdChyb3dzWzBdLmF2Z19yZXZlbnVlX3ByZXZpb3VzX3F1YXJ0ZXIpO1xyXG4gICAgICAgIHJvd3NbMF0uZ3Jvd3RoX3BlcmNlbnRhZ2UgPSBwYXJzZUZsb2F0KHJvd3NbMF0uZ3Jvd3RoX3BlcmNlbnRhZ2UpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcm93c1swXTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHJldmVudWUgcGVyIHVzZXI6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEdldCBzdHVkZW50IHBlbmRpZGlrYW4gZGlzdHJpYnV0aW9uXHJcbiAgc3RhdGljIGFzeW5jIGdldFN0dWRlbnRQZW5kaWRpa2FuRGlzdHJpYnV0aW9uKCk6IFByb21pc2U8UGVuZGlkaWthbkRpc3RyaWJ1dGlvbltdPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBxdWVyeSA9IGBcclxuICAgICAgICAgIFNFTEVDVCBcclxuICAgICAgICAgICAgICBDQVNFXHJcbiAgICAgICAgICAgICAgICAgIFdIRU4gdWEucGVuZGlkaWthbl9zZWthcmFuZyA9ICdLdWxpYWgnIFRIRU4gXHJcbiAgICAgICAgICAgICAgICAgICAgICBDT0FMRVNDRSh1YS5zdHJhdGEsICdPdGhlcicpXHJcbiAgICAgICAgICAgICAgICAgIFdIRU4gdWEucGVuZGlkaWthbl9zZWthcmFuZyBJUyBOVUxMIE9SIHVhLnBlbmRpZGlrYW5fc2VrYXJhbmcgPSAnJyBUSEVOICdPdGhlcidcclxuICAgICAgICAgICAgICAgICAgRUxTRSB1YS5wZW5kaWRpa2FuX3Nla2FyYW5nXHJcbiAgICAgICAgICAgICAgRU5EIEFTIHBlbmRpZGlrYW5fZ3JvdXAsXHJcbiAgICAgICAgICAgICAgQ09VTlQoKikgQVMgdG90YWxcclxuICAgICAgICAgIEZST00gXHJcbiAgICAgICAgICAgICAgdXNlcnMgdVxyXG4gICAgICAgICAgTEVGVCBKT0lOIFxyXG4gICAgICAgICAgICAgIHVzZXJfYWNjb3VudCB1YSBPTiB1LmlkID0gdWEuaWRcclxuICAgICAgICAgIFdIRVJFXHJcbiAgICAgICAgICAgICAgdS5yb2xlID0gJ3N0dWRlbnQnXHJcbiAgICAgICAgICBHUk9VUCBCWSBcclxuICAgICAgICAgICAgICBDQVNFXHJcbiAgICAgICAgICAgICAgICAgIFdIRU4gdWEucGVuZGlkaWthbl9zZWthcmFuZyA9ICdLdWxpYWgnIFRIRU4gXHJcbiAgICAgICAgICAgICAgICAgICAgICBDT0FMRVNDRSh1YS5zdHJhdGEsICdPdGhlcicpXHJcbiAgICAgICAgICAgICAgICAgIFdIRU4gdWEucGVuZGlkaWthbl9zZWthcmFuZyBJUyBOVUxMIE9SIHVhLnBlbmRpZGlrYW5fc2VrYXJhbmcgPSAnJyBUSEVOICdPdGhlcidcclxuICAgICAgICAgICAgICAgICAgRUxTRSB1YS5wZW5kaWRpa2FuX3Nla2FyYW5nXHJcbiAgICAgICAgICAgICAgRU5EO1xyXG4gICAgICBgO1xyXG4gICAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHBvb2wucXVlcnkocXVlcnkpO1xyXG4gICAgICByZXR1cm4gcm93cztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBlbmRpZGlrYW4gZGlzdHJpYnV0aW9uOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgc3R1ZGVudCBncm93dGhcclxuICBzdGF0aWMgYXN5bmMgZ2V0U3R1ZGVudEdyb3d0aCgpOiBQcm9taXNlPFN0dWRlbnRHcm93dGhbXT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcXVlcnkgPSBgXHJcbiAgICAgICAgICBXSVRIIHN0dWRlbnRfZGF0YSBBUyAoXHJcbiAgICAgICAgICAgICAgU0VMRUNUXHJcbiAgICAgICAgICAgICAgICAgIENPQUxFU0NFKFxyXG4gICAgICAgICAgICAgICAgICAgICAgQ0FTRVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFdIRU4gdWEucGVuZGlkaWthbl9zZWthcmFuZyA9ICdLdWxpYWgnIFRIRU4gQ09OQ0FUKCdLdWxpYWggLSAnLCB1YS5zdHJhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgV0hFTiB1YS5wZW5kaWRpa2FuX3Nla2FyYW5nIElTIE5VTEwgT1IgdWEucGVuZGlkaWthbl9zZWthcmFuZyA9ICcnIFRIRU4gJ090aGVyJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIEVMU0UgdWEucGVuZGlkaWthbl9zZWthcmFuZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgRU5ELFxyXG4gICAgICAgICAgICAgICAgICAgICAgJ090aGVyJ1xyXG4gICAgICAgICAgICAgICAgICApIEFTIHBlbmRpZGlrYW5fZ3JvdXAsXHJcbiAgICAgICAgICAgICAgICAgIHRvX2NoYXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAodS5jcmVhdGVfZGF0ZSBBVCBUSU1FIFpPTkUgJ1VUQycgQVQgVElNRSBaT05FICdBc2lhL0pha2FydGEnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICdJWVlZLUlXJ1xyXG4gICAgICAgICAgICAgICAgICApIEFTIHllYXJfd2Vla1xyXG4gICAgICAgICAgICAgIEZST00gdXNlcnMgdVxyXG4gICAgICAgICAgICAgIExFRlQgSk9JTiB1c2VyX2FjY291bnQgdWEgT04gdS5pZCA9IHVhLmlkXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBTRUxFQ1RcclxuICAgICAgICAgICAgICBwZW5kaWRpa2FuX2dyb3VwLFxyXG4gICAgICAgICAgICAgIHllYXJfd2VlayxcclxuICAgICAgICAgICAgICBDT1VOVCgqKSBBUyB0b3RhbFxyXG4gICAgICAgICAgRlJPTSBzdHVkZW50X2RhdGFcclxuICAgICAgICAgIEdST1VQIEJZIHBlbmRpZGlrYW5fZ3JvdXAsIHllYXJfd2Vla1xyXG4gICAgICAgICAgT1JERVIgQlkgeWVhcl93ZWVrIEFTQywgcGVuZGlkaWthbl9ncm91cCBBU0M7XHJcbiAgICAgIGA7XHJcblxyXG4gICAgICBjb25zdCB7IHJvd3MgfSA9IGF3YWl0IHBvb2wucXVlcnkocXVlcnkpO1xyXG4gICAgICByZXR1cm4gcm93cztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBzdHVkZW50IGdyb3d0aCBkYXRhOlwiLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gR2V0IHVzZXIgZGV0YWlscyBieSBJRFxyXG4gIHN0YXRpYyBhc3luYyBnZXRVc2VyRGV0YWlsc0J5SWQodXNlcklkOiBudW1iZXIpOiBQcm9taXNlPFVzZXJEZXRhaWxzPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBxdWVyeSA9IGBcclxuICAgICAgICAgIFNFTEVDVFxyXG4gICAgICAgICAgICAgIHUudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgdS5lbWFpbCxcclxuICAgICAgICAgICAgICB1LmNyZWF0ZV9kYXRlLFxyXG4gICAgICAgICAgICAgIHUubGFzdF9sb2dpbixcclxuICAgICAgICAgICAgICB1YS50YW5nZ2FsX2xhaGlyLFxyXG4gICAgICAgICAgICAgIHVhLm5vbW9yX3doYXRzYXBwLFxyXG4gICAgICAgICAgICAgIHVhLnRhaHVuX2x1bHVzX3NtYV9zbWssXHJcbiAgICAgICAgICAgICAgdWEudGFodW5fbWFzdWssXHJcbiAgICAgICAgICAgICAgdWEudGFodW5fbHVsdXMsXHJcbiAgICAgICAgICAgICAgdWEubm9tb3Jfd2hhdHNhcHBfb3J0dSxcclxuICAgICAgICAgICAgICB1YS5wcm92aW5zaSxcclxuICAgICAgICAgICAgICB1YS5rb3RhLFxyXG4gICAgICAgICAgICAgIHVhLmtlY2FtYXRhbixcclxuICAgICAgICAgICAgICB1YS5rZWx1cmFoYW4sXHJcbiAgICAgICAgICAgICAgdWEucGVuZGlkaWthbl9zZWthcmFuZyxcclxuICAgICAgICAgICAgICB1YS5zZWtvbGFoLFxyXG4gICAgICAgICAgICAgIHVhLmtlbGFzLFxyXG4gICAgICAgICAgICAgIHVhLmp1cnVzYW4sXHJcbiAgICAgICAgICAgICAgdWEucGVuZGlkaWthbl90ZXJha2hpcixcclxuICAgICAgICAgICAgICB1YS5zdHJhdGEsXHJcbiAgICAgICAgICAgICAgdWEubmFtYV9sZW5na2FwLFxyXG4gICAgICAgICAgICAgIHVhLm5hbWFfcGFuZ2dpbGFuLFxyXG4gICAgICAgICAgICAgIHVhLmplbmlzX2tlbGFtaW4sXHJcbiAgICAgICAgICAgICAgdWEudW5pdmVyc2l0YXMsXHJcbiAgICAgICAgICAgICAgdWEucHJvZ3JhbV9zdHVkaVxyXG4gICAgICAgICAgRlJPTSB1c2VycyB1XHJcbiAgICAgICAgICBKT0lOIHVzZXJfYWNjb3VudCB1YSBPTiB1LmlkID0gdWEuaWRcclxuICAgICAgICAgIFdIRVJFIHUuaWQgPSAkMVxyXG4gICAgICBgO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeShxdWVyeSwgW3VzZXJJZF0pO1xyXG4gICAgICBcclxuICAgICAgaWYgKHJlc3VsdC5yb3dzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IHsga2luZDogXCJub3RfZm91bmRcIiB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBmaWx0ZXJlZERhdGE6IGFueSA9IHt9O1xyXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiByZXN1bHQucm93c1swXSkge1xyXG4gICAgICAgIGlmIChyZXN1bHQucm93c1swXVtrZXldICE9PSBudWxsKSB7XHJcbiAgICAgICAgICBmaWx0ZXJlZERhdGFba2V5XSA9IHJlc3VsdC5yb3dzWzBdW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmaWx0ZXJlZERhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdXNlciBkZXRhaWxzOlwiLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU2VhcmNoIHVzZXJzIGJ5IHJvbGUgYW5kIG5hbWVcclxuICBzdGF0aWMgYXN5bmMgc2VhcmNoVXNlcnNCeVJvbGVBbmROYW1lKHJvbGU6IHN0cmluZywgc2VhcmNoVGVybTogc3RyaW5nLCBsaW1pdDogbnVtYmVyID0gMTApOiBQcm9taXNlPFNlYXJjaFVzZXJbXT4ge1xyXG4gICAgY29uc3QgcXVlcnkgPSBgXHJcbiAgICAgICAgU0VMRUNUIHVzZXJpZCwgbmFtZSwgdXNlcm5hbWVcclxuICAgICAgICBGUk9NIHZfZGFzaGJvYXJkX3VzZXJkYXRhXHJcbiAgICAgICAgV0hFUkUgcm9sZSA9ICQxIFxyXG4gICAgICAgIEFORCAoXHJcbiAgICAgICAgICAgIG5hbWUgSUxJS0UgJDIgXHJcbiAgICAgICAgICAgIE9SIHVzZXJuYW1lIElMSUtFICQyXHJcbiAgICAgICAgKVxyXG4gICAgICAgIE9SREVSIEJZIG5hbWUgQVNDXHJcbiAgICAgICAgTElNSVQgJDNcclxuICAgIGA7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSBbcm9sZSwgYCUke3NlYXJjaFRlcm19JWAsIGxpbWl0XTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBwb29sLnF1ZXJ5KHF1ZXJ5LCB2YWx1ZXMpO1xyXG4gICAgICByZXR1cm4gcmVzLnJvd3M7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFNlYXJjaCB1c2VycyBieSByb2xlcyBhbmQgbmFtZVxyXG4gIHN0YXRpYyBhc3luYyBzZWFyY2hVc2Vyc0J5Um9sZXNBbmROYW1lKHJvbGVzOiBzdHJpbmdbXSwgc2VhcmNoVGVybTogc3RyaW5nKTogUHJvbWlzZTxTZWFyY2hVc2VyW10+IHtcclxuICAgIGNvbnN0IHF1ZXJ5ID0gYFxyXG4gICAgICAgIFNFTEVDVCB1c2VyaWQsIG5hbWVcclxuICAgICAgICBGUk9NIHZfZGFzaGJvYXJkX3VzZXJkYXRhXHJcbiAgICAgICAgV0hFUkUgcm9sZSBJTiAoJHtyb2xlcy5tYXAoKF8sIGkpID0+IGAkJHtpICsgMX1gKS5qb2luKCcsICcpfSlcclxuICAgICAgICBBTkQgbmFtZSBJTElLRSAkJHtyb2xlcy5sZW5ndGggKyAxfVxyXG4gICAgICAgIE9SREVSIEJZIG5hbWUgQVNDXHJcbiAgICAgICAgTElNSVQgNTBcclxuICAgIGA7XHJcblxyXG4gICAgY29uc3QgdmFsdWVzID0gWy4uLnJvbGVzLCBgJSR7c2VhcmNoVGVybX0lYF07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcG9vbC5xdWVyeShxdWVyeSwgdmFsdWVzKTtcclxuICAgICAgcmV0dXJuIHJlcy5yb3dzO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignUXVlcnkgZXJyb3I6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gR2V0IHN0dWRlbnQgZ3JvdXBcclxuICBzdGF0aWMgYXN5bmMgZ2V0U3R1ZGVudEdyb3VwKCk6IFByb21pc2U8U3R1ZGVudEdyb3VwW10+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gYFxyXG4gICAgICAgIFNFTEVDVCBcclxuICAgICAgICAgIGRndS5pZCxcclxuICAgICAgICAgIGRndS5uYW1lLFxyXG4gICAgICAgICAgZGd1LmlkX2xpc3QsXHJcbiAgICAgICAgICBhcnJheV9hZ2codmR1Lm5hbWUpIEFTIHVzZXJfbmFtZXNcclxuICAgICAgICBGUk9NIFxyXG4gICAgICAgICAgZGltZ3JvdXBzdHVkZW50IGRndVxyXG4gICAgICAgIENST1NTIEpPSU4gTEFURVJBTCBVTk5FU1QoZGd1LmlkX2xpc3QpIEFTIHVzZXJfaWRcclxuICAgICAgICBKT0lOIFxyXG4gICAgICAgICAgdl9kYXNoYm9hcmRfdXNlcmRhdGEgdmR1IE9OIHZkdS51c2VyaWQgPSB1c2VyX2lkXHJcbiAgICAgICAgV0hFUkUgZGd1LnN0YXR1cyA9IDFcclxuICAgICAgICBHUk9VUCBCWSBcclxuICAgICAgICAgIGRndS5pZCwgZGd1Lm5hbWU7XHJcbiAgICAgIGA7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBvb2wucXVlcnkocXVlcnkpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0LnJvd3M7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGZldGNoaW5nIHN0dWRlbnQgZ3JvdXBzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VyTW9kZWw7Il0sIm5hbWVzIjpbInBvb2wiLCJVc2VyTW9kZWwiLCJjcmVhdGUiLCJuZXdVc2VyIiwicmVzdWx0IiwicXVlcnkiLCJ1c2VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJyb2xlIiwiZnVsbE5hbWUiLCJyb3dzIiwidXNlcl9pZCIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImdldENhcnRDb3VudCIsInVzZXJJZCIsInBhcnNlSW50IiwiY2FydGNvdW50IiwiZ2V0VW5wYWlkQ291bnQiLCJ1bnBhaWRjb3VudCIsImRlbGV0ZVVzZXIiLCJsZW5ndGgiLCJraW5kIiwiaWQiLCJ1cGRhdGVVc2VyIiwidXBkYXRlZERhdGEiLCJvbGRQYXNzd29yZCIsIm5ld1Bhc3N3b3JkIiwiY2hlY2tSZXN1bHQiLCJtZXNzYWdlIiwiY3VycmVudFBhc3N3b3JkIiwidXBkYXRlUmVzdWx0IiwiY2hlY2tFeGlzdGVuY2UiLCJmaW5kQnlVc2VybmFtZSIsImZpbmRCeUlkIiwidXBkYXRlTGFzdExvZ2luIiwiZ2V0VXNlckRhdGFCeVJvbGUiLCJnZXRQYWdpbmF0ZWRVc2VycyIsIm9wdGlvbnMiLCJzb3J0RmllbGQiLCJzb3J0T3JkZXIiLCJzZWFyY2giLCJwYWdlIiwibGltaXQiLCJlZHVjYXRpb24iLCJjaXR5IiwicHJvdmluY2UiLCJzdGF0dXMiLCJvZmZzZXQiLCJ2YWx1ZXMiLCJjb25kaXRpb25zIiwicHVzaCIsImpvaW4iLCJ2YWxpZFNvcnRGaWVsZHMiLCJpbmNsdWRlcyIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiLCJ1c2VycyIsInRvdGFsIiwiZ2V0VG90YWxVc2Vyc0FuZEdyb3d0aEJ5Um9sZSIsImN1cnJlbnRDb3VudFF1ZXJ5IiwibGFzdE1vbnRoQ291bnRRdWVyeSIsImN1cnJlbnRDb3VudFJlc3VsdCIsImxhc3RNb250aENvdW50UmVzdWx0IiwidG90YWxVc2VycyIsImxhc3RNb250aFVzZXJzIiwiZ3Jvd3RoUGVyY2VudGFnZSIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwiZ2V0QWN0aXZlVXNlcnNBbmRHcm93dGhCeVJvbGUiLCJhY3RpdmVVc2Vyc1F1ZXJ5IiwibGFzdE1vbnRoQWN0aXZlVXNlcnNRdWVyeSIsImFjdGl2ZVVzZXJzUmVzdWx0IiwibGFzdE1vbnRoQWN0aXZlVXNlcnNSZXN1bHQiLCJhY3RpdmVVc2VycyIsImFjdGl2ZXVzZXJzIiwibGFzdE1vbnRoQWN0aXZlVXNlcnMiLCJsYXN0bW9udGhhY3RpdmV1c2VycyIsImdldE5ld1VzZXJzQW5kR3Jvd3RoQnlSb2xlIiwiY3VycmVudE1vbnRoUXVlcnkiLCJwcmV2aW91c01vbnRoUXVlcnkiLCJjdXJyZW50TW9udGhSZXN1bHQiLCJwcmV2aW91c01vbnRoUmVzdWx0IiwibmV3VXNlcnMiLCJuZXd1c2VycyIsInByZXZpb3VzTW9udGhVc2VycyIsInByZXZpb3VzbW9udGh1c2VycyIsImdldFJldmVudWVQZXJVc2VyIiwiYXZnX3JldmVudWVfY3VycmVudF9xdWFydGVyIiwiYXZnX3JldmVudWVfcHJldmlvdXNfcXVhcnRlciIsImdyb3d0aF9wZXJjZW50YWdlIiwiZ2V0U3R1ZGVudFBlbmRpZGlrYW5EaXN0cmlidXRpb24iLCJnZXRTdHVkZW50R3Jvd3RoIiwiZ2V0VXNlckRldGFpbHNCeUlkIiwiZmlsdGVyZWREYXRhIiwia2V5Iiwic2VhcmNoVXNlcnNCeVJvbGVBbmROYW1lIiwic2VhcmNoVGVybSIsInJlcyIsInNlYXJjaFVzZXJzQnlSb2xlc0FuZE5hbWUiLCJyb2xlcyIsIm1hcCIsIl8iLCJpIiwiZ2V0U3R1ZGVudEdyb3VwIiwiRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./models/user.model.ts\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fusers%2Flogin&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cusers%5Clogin.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fusers%2Flogin&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cusers%5Clogin.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_users_login_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\users\\login.ts */ \"(api-node)/./pages/api/users/login.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_users_login_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_users_login_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_users_login_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_users_login_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/users/login\",\n        pathname: \"/api/users/login\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_users_login_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGdXNlcnMlMkZsb2dpbiZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDdXNlcnMlNUNsb2dpbi50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUMwRDtBQUMxRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsc0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHNEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHVzZXJzXFxcXGxvZ2luLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91c2Vycy9sb2dpblwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VzZXJzL2xvZ2luXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fusers%2Flogin&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cusers%5Clogin.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/users/login.ts":
/*!**********************************!*\
  !*** ./pages/api/users/login.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _controllers_user_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../controllers/user.controller */ \"(api-node)/./controllers/user.controller.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_controllers_user_controller__WEBPACK_IMPORTED_MODULE_0__]);\n_controllers_user_controller__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// pages/api/users/login.ts\n\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            message: 'Method not allowed'\n        });\n    }\n    try {\n        return await _controllers_user_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].login(req, res);\n    } catch (error) {\n        return res.status(500).json({\n            message: 'Internal server error'\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS91c2Vycy9sb2dpbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLDJCQUEyQjtBQUV1QztBQUVuRCxlQUFlQyxRQUFRQyxHQUFtQixFQUFFQyxHQUFvQjtJQUM3RSxJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBcUI7SUFDOUQ7SUFFQSxJQUFJO1FBQ0YsT0FBTyxNQUFNUCwwRUFBb0IsQ0FBQ0UsS0FBS0M7SUFDekMsRUFBRSxPQUFPTSxPQUFPO1FBQ2QsT0FBT04sSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQXdCO0lBQ2pFO0FBQ0YiLCJzb3VyY2VzIjpbIkQ6XFxMYXRpaGFuXFxOZXcgZm9sZGVyICgyKVxcRkVcXDFcXEZFXFxOZXh0XFxmdXR1cmVkdVxccGFnZXNcXGFwaVxcdXNlcnNcXGxvZ2luLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS91c2Vycy9sb2dpbi50c1xyXG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCBVc2VyQ29udHJvbGxlciBmcm9tICcuLi8uLi8uLi9jb250cm9sbGVycy91c2VyLmNvbnRyb2xsZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBhd2FpdCBVc2VyQ29udHJvbGxlci5sb2dpbihyZXEsIHJlcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJVc2VyQ29udHJvbGxlciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImxvZ2luIiwiZXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/users/login.ts\n");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fusers%2Flogin&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cusers%5Clogin.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();